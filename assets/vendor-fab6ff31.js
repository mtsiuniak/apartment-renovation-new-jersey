var Ut=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gt={};/*!
	By AndrÃ© Rinas, www.andrerinas.de
	Documentation, www.simplelightbox.com
	Available for use under the MIT License
	Version 2.14.2
*/(function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;function e(b){"@babel/helpers - typeof";return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},e(b)}function t(b,v){var i=typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(!i){if(Array.isArray(b)||(i=s(b))||v&&b&&typeof b.length=="number"){i&&(b=i);var l=0,g=function(){};return{s:g,n:function(){return l>=b.length?{done:!0}:{done:!1,value:b[l++]}},e:function(E){throw E},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var C=!0,S=!1,P;return{s:function(){i=i.call(b)},n:function(){var E=i.next();return C=E.done,E},e:function(E){S=!0,P=E},f:function(){try{!C&&i.return!=null&&i.return()}finally{if(S)throw P}}}}function o(b){return r(b)||a(b)||s(b)||n()}function n(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s(b,v){if(b){if(typeof b=="string")return d(b,v);var i=Object.prototype.toString.call(b).slice(8,-1);if(i==="Object"&&b.constructor&&(i=b.constructor.name),i==="Map"||i==="Set")return Array.from(b);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return d(b,v)}}function a(b){if(typeof Symbol<"u"&&b[Symbol.iterator]!=null||b["@@iterator"]!=null)return Array.from(b)}function r(b){if(Array.isArray(b))return d(b)}function d(b,v){(v==null||v>b.length)&&(v=b.length);for(var i=0,l=new Array(v);i<v;i++)l[i]=b[i];return l}function h(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function u(b,v){for(var i=0;i<v.length;i++){var l=v[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(b,l.key,l)}}function m(b,v,i){return v&&u(b.prototype,v),i&&u(b,i),Object.defineProperty(b,"prototype",{writable:!1}),b}function p(b,v,i){return v in b?Object.defineProperty(b,v,{value:i,enumerable:!0,configurable:!0,writable:!0}):b[v]=i,b}var f=function(){function b(v,i){var l=this;if(h(this,b),p(this,"defaultOptions",{sourceAttr:"href",overlay:!0,overlayOpacity:.7,spinner:!0,nav:!0,navText:["&lsaquo;","&rsaquo;"],captions:!0,captionDelay:0,captionSelector:"img",captionType:"attr",captionsData:"title",captionPosition:"bottom",captionClass:"",captionHTML:!0,close:!0,closeText:"&times;",swipeClose:!0,showCounter:!0,fileExt:"png|jpg|jpeg|gif|webp",animationSlide:!0,animationSpeed:250,preloading:!0,enableKeyboard:!0,loop:!0,rel:!1,docClose:!0,swipeTolerance:50,className:"simple-lightbox",widthRatio:.8,heightRatio:.9,scaleImageToRatio:!1,disableRightClick:!1,disableScroll:!0,alertError:!0,alertErrorMessage:"Image not found, next image will be loaded",additionalHtml:!1,history:!0,throttleInterval:0,doubleTapZoom:2,maxZoom:10,htmlClass:"has-lightbox",rtl:!1,fixedClass:"sl-fixed",fadeSpeed:300,uniqueImages:!0,focus:!0,scrollZoom:!0,scrollZoomFactor:.5,download:!1}),p(this,"transitionPrefix",void 0),p(this,"isPassiveEventsSupported",void 0),p(this,"transitionCapable",!1),p(this,"isTouchDevice","ontouchstart"in window),p(this,"isAppleDevice",/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),p(this,"initialLocationHash",void 0),p(this,"pushStateSupport","pushState"in history),p(this,"isOpen",!1),p(this,"isAnimating",!1),p(this,"isClosing",!1),p(this,"isFadeIn",!1),p(this,"urlChangedOnce",!1),p(this,"hashReseted",!1),p(this,"historyHasChanges",!1),p(this,"historyUpdateTimeout",null),p(this,"currentImage",void 0),p(this,"eventNamespace","simplelightbox"),p(this,"domNodes",{}),p(this,"loadedImages",[]),p(this,"initialImageIndex",0),p(this,"currentImageIndex",0),p(this,"initialSelector",null),p(this,"globalScrollbarWidth",0),p(this,"controlCoordinates",{swipeDiff:0,swipeYDiff:0,swipeStart:0,swipeEnd:0,swipeYStart:0,swipeYEnd:0,mousedown:!1,imageLeft:0,zoomed:!1,containerHeight:0,containerWidth:0,containerOffsetX:0,containerOffsetY:0,imgHeight:0,imgWidth:0,capture:!1,initialOffsetX:0,initialOffsetY:0,initialPointerOffsetX:0,initialPointerOffsetY:0,initialPointerOffsetX2:0,initialPointerOffsetY2:0,initialScale:1,initialPinchDistance:0,pointerOffsetX:0,pointerOffsetY:0,pointerOffsetX2:0,pointerOffsetY2:0,targetOffsetX:0,targetOffsetY:0,targetScale:0,pinchOffsetX:0,pinchOffsetY:0,limitOffsetX:0,limitOffsetY:0,scaleDifference:0,targetPinchDistance:0,touchCount:0,doubleTapped:!1,touchmoveCount:0}),this.options=Object.assign(this.defaultOptions,i),this.isPassiveEventsSupported=this.checkPassiveEventsSupport(),typeof v=="string"?(this.initialSelector=v,this.elements=Array.from(document.querySelectorAll(v))):this.elements=typeof v.length<"u"&&v.length>0?Array.from(v):[v],this.relatedElements=[],this.transitionPrefix=this.calculateTransitionPrefix(),this.transitionCapable=this.transitionPrefix!==!1,this.initialLocationHash=this.hash,this.options.rel&&(this.elements=this.getRelated(this.options.rel)),this.options.uniqueImages){var g=[];this.elements=Array.from(this.elements).filter(function(C){var S=C.getAttribute(l.options.sourceAttr);return g.indexOf(S)===-1?(g.push(S),!0):!1})}this.createDomNodes(),this.options.close&&this.domNodes.wrapper.appendChild(this.domNodes.closeButton),this.options.nav&&this.domNodes.wrapper.appendChild(this.domNodes.navigation),this.options.spinner&&this.domNodes.wrapper.appendChild(this.domNodes.spinner),this.addEventListener(this.elements,"click."+this.eventNamespace,function(C){if(l.isValidLink(C.currentTarget)){if(C.preventDefault(),l.isAnimating)return!1;l.initialImageIndex=l.elements.indexOf(C.currentTarget),l.openImage(C.currentTarget)}}),this.options.docClose&&this.addEventListener(this.domNodes.wrapper,["click."+this.eventNamespace,"touchstart."+this.eventNamespace],function(C){l.isOpen&&C.target===C.currentTarget&&l.close()}),this.options.disableRightClick&&this.addEventListener(document.body,"contextmenu."+this.eventNamespace,function(C){C.target.parentElement.classList.contains("sl-image")&&C.preventDefault()}),this.options.enableKeyboard&&this.addEventListener(document.body,"keyup."+this.eventNamespace,this.throttle(function(C){if(l.controlCoordinates.swipeDiff=0,l.isAnimating&&C.key==="Escape"){l.currentImage.setAttribute("src",""),l.isAnimating=!1,l.close();return}l.isOpen&&(C.preventDefault(),C.key==="Escape"&&l.close(),!l.isAnimating&&["ArrowLeft","ArrowRight"].indexOf(C.key)>-1&&l.loadImage(C.key==="ArrowRight"?1:-1))},this.options.throttleInterval)),this.addEvents()}return m(b,[{key:"checkPassiveEventsSupport",value:function(){var i=!1;try{var l=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassive",null,l),window.removeEventListener("testPassive",null,l)}catch{}return i}},{key:"getCaptionElement",value:function(i){if(this.options.captionSelector.startsWith("+")){var l=this.options.captionSelector.replace(/^\+/,"").trimStart(),g=i.nextElementSibling;return g&&g.matches(l)?g:!1}else if(this.options.captionSelector.startsWith(">")){var C=this.options.captionSelector.replace(/^>/,"").trimStart();return i.querySelector(C)}else return i.querySelector(this.options.captionSelector)}},{key:"generateQuerySelector",value:function(i){var l=i.tagName,g=i.id,C=i.className,S=i.parentNode;if(l==="HTML")return"HTML";var P=l;if(P+=g!==""?"#".concat(g):"",C)for(var w=C.trim().split(/\s/),E=0;E<w.length;E++)P+=".".concat(w[E]);for(var T=1,A=i;A.previousElementSibling;A=A.previousElementSibling)T+=1;return P+=":nth-child(".concat(T,")"),"".concat(this.generateQuerySelector(S)," > ").concat(P)}},{key:"createDomNodes",value:function(){if(this.domNodes.overlay=document.createElement("div"),this.domNodes.overlay.classList.add("sl-overlay"),this.domNodes.overlay.dataset.opacityTarget=this.options.overlayOpacity,this.domNodes.closeButton=document.createElement("button"),this.domNodes.closeButton.classList.add("sl-close"),this.domNodes.closeButton.innerHTML=this.options.closeText,this.domNodes.spinner=document.createElement("div"),this.domNodes.spinner.classList.add("sl-spinner"),this.domNodes.spinner.innerHTML="<div></div>",this.domNodes.navigation=document.createElement("div"),this.domNodes.navigation.classList.add("sl-navigation"),this.domNodes.navigation.innerHTML='<button class="sl-prev">'.concat(this.options.navText[0],'</button><button class="sl-next">').concat(this.options.navText[1],"</button>"),this.domNodes.counter=document.createElement("div"),this.domNodes.counter.classList.add("sl-counter"),this.domNodes.counter.innerHTML='<span class="sl-current"></span>/<span class="sl-total"></span>',this.domNodes.download=document.createElement("div"),this.domNodes.download.classList.add("sl-download"),this.domNodes.downloadLink=document.createElement("a"),this.domNodes.downloadLink.setAttribute("download",""),this.domNodes.downloadLink.textContent=this.options.download,this.domNodes.download.appendChild(this.domNodes.downloadLink),this.domNodes.caption=document.createElement("div"),this.domNodes.caption.classList.add("sl-caption","pos-"+this.options.captionPosition),this.options.captionClass){var i,l=this.options.captionClass.split(/[\s,]+/);(i=this.domNodes.caption.classList).add.apply(i,o(l))}this.domNodes.image=document.createElement("div"),this.domNodes.image.classList.add("sl-image"),this.domNodes.wrapper=document.createElement("div"),this.domNodes.wrapper.classList.add("sl-wrapper"),this.domNodes.wrapper.setAttribute("tabindex",-1),this.domNodes.wrapper.setAttribute("role","dialog"),this.domNodes.wrapper.setAttribute("aria-hidden",!1),this.options.className&&this.domNodes.wrapper.classList.add(this.options.className),this.options.rtl&&this.domNodes.wrapper.classList.add("sl-dir-rtl")}},{key:"throttle",value:function(i,l){var g;return function(){g||(i.apply(this,arguments),g=!0,setTimeout(function(){return g=!1},l))}}},{key:"isValidLink",value:function(i){return!this.options.fileExt||i.getAttribute(this.options.sourceAttr)&&new RegExp("("+this.options.fileExt+")($|\\?.*$)","i").test(i.getAttribute(this.options.sourceAttr))}},{key:"calculateTransitionPrefix",value:function(){var i=(document.body||document.documentElement).style;return"transition"in i?"":"WebkitTransition"in i?"-webkit-":"MozTransition"in i?"-moz-":"OTransition"in i?"-o":!1}},{key:"getScrollbarWidth",value:function(){var i=0,l=document.createElement("div");return l.classList.add("sl-scrollbar-measure"),document.body.appendChild(l),i=l.offsetWidth-l.clientWidth,document.body.removeChild(l),i}},{key:"toggleScrollbar",value:function(i){var l=0,g=[].slice.call(document.querySelectorAll("."+this.options.fixedClass));if(i==="hide"){var C=window.innerWidth;if(!C){var S=document.documentElement.getBoundingClientRect();C=S.right-Math.abs(S.left)}if(document.body.clientWidth<C||this.isAppleDevice){var P=parseInt(window.getComputedStyle(document.body).paddingRight||0,10);l=this.getScrollbarWidth(),document.body.dataset.originalPaddingRight=P,(l>0||l==0&&this.isAppleDevice)&&(document.body.classList.add("hidden-scroll"),document.body.style.paddingRight=P+l+"px",g.forEach(function(w){var E=w.style.paddingRight,T=window.getComputedStyle(w)["padding-right"];w.dataset.originalPaddingRight=E,w.style.paddingRight="".concat(parseFloat(T)+l,"px")}))}}else document.body.classList.remove("hidden-scroll"),document.body.style.paddingRight=document.body.dataset.originalPaddingRight+"px",g.forEach(function(w){var E=w.dataset.originalPaddingRight;typeof E<"u"&&(w.style.paddingRight=E)});return l}},{key:"close",value:function(){var i=this;if(!this.isOpen||this.isAnimating||this.isClosing)return!1;this.isClosing=!0;var l=this.relatedElements[this.currentImageIndex];l.dispatchEvent(new Event("close.simplelightbox")),this.options.history&&(this.historyHasChanges=!1,this.hashReseted||this.resetHash()),this.removeEventListener(document,"focusin."+this.eventNamespace),this.fadeOut(this.domNodes.overlay,this.options.fadeSpeed),this.fadeOut(document.querySelectorAll(".sl-image img,  .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter"),this.options.fadeSpeed,function(){i.options.disableScroll&&i.toggleScrollbar("show"),i.options.htmlClass&&i.options.htmlClass!==""&&document.querySelector("html").classList.remove(i.options.htmlClass),document.body.removeChild(i.domNodes.wrapper),i.options.overlay&&document.body.removeChild(i.domNodes.overlay),i.domNodes.additionalHtml=null,i.domNodes.download=null,l.dispatchEvent(new Event("closed.simplelightbox")),i.isClosing=!1}),this.currentImage=null,this.isOpen=!1,this.isAnimating=!1;for(var g in this.controlCoordinates)this.controlCoordinates[g]=0;this.controlCoordinates.mousedown=!1,this.controlCoordinates.zoomed=!1,this.controlCoordinates.capture=!1,this.controlCoordinates.initialScale=this.minMax(1,1,this.options.maxZoom),this.controlCoordinates.doubleTapped=!1}},{key:"hash",get:function(){return window.location.hash.substring(1)}},{key:"preload",value:function(){var i=this,l=this.currentImageIndex,g=this.relatedElements.length,C=l+1<0?g-1:l+1>=g-1?0:l+1,S=l-1<0?g-1:l-1>=g-1?0:l-1,P=new Image,w=new Image;P.addEventListener("load",function(E){var T=E.target.getAttribute("src");i.loadedImages.indexOf(T)===-1&&i.loadedImages.push(T),i.relatedElements[l].dispatchEvent(new Event("nextImageLoaded."+i.eventNamespace))}),P.setAttribute("src",this.relatedElements[C].getAttribute(this.options.sourceAttr)),w.addEventListener("load",function(E){var T=E.target.getAttribute("src");i.loadedImages.indexOf(T)===-1&&i.loadedImages.push(T),i.relatedElements[l].dispatchEvent(new Event("prevImageLoaded."+i.eventNamespace))}),w.setAttribute("src",this.relatedElements[S].getAttribute(this.options.sourceAttr))}},{key:"loadImage",value:function(i){var l=this,g=i;this.options.rtl&&(i=-i),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event("change."+this.eventNamespace)),this.relatedElements[this.currentImageIndex].dispatchEvent(new Event((i===1?"next":"prev")+"."+this.eventNamespace));var C=this.currentImageIndex+i;if(this.isAnimating||(C<0||C>=this.relatedElements.length)&&this.options.loop===!1)return!1;this.currentImageIndex=C<0?this.relatedElements.length-1:C>this.relatedElements.length-1?0:C,this.domNodes.counter.querySelector(".sl-current").innerHTML=this.currentImageIndex+1,this.options.animationSlide&&this.slide(this.options.animationSpeed/1e3,-100*g-this.controlCoordinates.swipeDiff+"px"),this.fadeOut(this.domNodes.image,this.options.fadeSpeed,function(){l.isAnimating=!0,l.isClosing?l.isAnimating=!1:setTimeout(function(){var S=l.relatedElements[l.currentImageIndex];l.currentImage&&(l.currentImage.setAttribute("src",S.getAttribute(l.options.sourceAttr)),l.loadedImages.indexOf(S.getAttribute(l.options.sourceAttr))===-1&&l.show(l.domNodes.spinner),l.domNodes.image.contains(l.domNodes.caption)&&l.domNodes.image.removeChild(l.domNodes.caption),l.adjustImage(g),l.options.preloading&&l.preload())},100)})}},{key:"adjustImage",value:function(i){var l=this;if(!this.currentImage)return!1;var g=new Image,C=window.innerWidth*this.options.widthRatio,S=window.innerHeight*this.options.heightRatio;g.setAttribute("src",this.currentImage.getAttribute("src")),this.currentImage.dataset.scale=1,this.currentImage.dataset.translateX=0,this.currentImage.dataset.translateY=0,this.zoomPanElement(0,0,1),g.addEventListener("error",function(P){l.relatedElements[l.currentImageIndex].dispatchEvent(new Event("error."+l.eventNamespace)),l.isAnimating=!1,l.isOpen=!0,l.domNodes.spinner.style.display="none";var w=i===1||i===-1;if(l.initialImageIndex===l.currentImageIndex&&w)return l.close();l.options.alertError&&alert(l.options.alertErrorMessage),l.loadImage(w?i:1)}),g.addEventListener("load",function(P){typeof i<"u"&&(l.relatedElements[l.currentImageIndex].dispatchEvent(new Event("changed."+l.eventNamespace)),l.relatedElements[l.currentImageIndex].dispatchEvent(new Event((i===1?"nextDone":"prevDone")+"."+l.eventNamespace))),l.options.history&&l.updateURL(),l.loadedImages.indexOf(l.currentImage.getAttribute("src"))===-1&&l.loadedImages.push(l.currentImage.getAttribute("src"));var w=P.target.width,E=P.target.height;if(l.options.scaleImageToRatio||w>C||E>S){var T=w/E>C/S?w/C:E/S;w/=T,E/=T}l.domNodes.image.style.top=(window.innerHeight-E)/2+"px",l.domNodes.image.style.left=(window.innerWidth-w-l.globalScrollbarWidth)/2+"px",l.domNodes.image.style.width=w+"px",l.domNodes.image.style.height=E+"px",l.domNodes.spinner.style.display="none",l.options.focus&&l.forceFocus(),l.fadeIn(l.currentImage,l.options.fadeSpeed,function(){l.options.focus&&l.domNodes.wrapper.focus()}),l.isOpen=!0;var A,N;typeof l.options.captionSelector=="string"?A=l.options.captionSelector==="self"?l.relatedElements[l.currentImageIndex]:l.getCaptionElement(l.relatedElements[l.currentImageIndex]):typeof l.options.captionSelector=="function"&&(A=l.options.captionSelector(l.relatedElements[l.currentImageIndex])),l.options.captions&&A&&(l.options.captionType==="data"?N=A.dataset[l.options.captionsData]:l.options.captionType==="text"?N=A.innerHTML:N=A.getAttribute(l.options.captionsData)),l.options.loop?l.relatedElements.length===1?l.hide(l.domNodes.navigation.querySelectorAll(".sl-prev, .sl-next")):l.show(l.domNodes.navigation.querySelectorAll(".sl-prev, .sl-next")):(l.currentImageIndex===0&&l.hide(l.domNodes.navigation.querySelector(".sl-prev")),l.currentImageIndex>=l.relatedElements.length-1&&l.hide(l.domNodes.navigation.querySelector(".sl-next")),l.currentImageIndex>0&&l.show(l.domNodes.navigation.querySelector(".sl-prev")),l.currentImageIndex<l.relatedElements.length-1&&l.show(l.domNodes.navigation.querySelector(".sl-next"))),i===1||i===-1?(l.options.animationSlide&&(l.slide(0,100*i+"px"),setTimeout(function(){l.slide(l.options.animationSpeed/1e3,"0px")},50)),l.fadeIn(l.domNodes.image,l.options.fadeSpeed,function(){l.isAnimating=!1,l.setCaption(N,w)})):(l.isAnimating=!1,l.setCaption(N,w)),l.options.additionalHtml&&!l.domNodes.additionalHtml&&(l.domNodes.additionalHtml=document.createElement("div"),l.domNodes.additionalHtml.classList.add("sl-additional-html"),l.domNodes.additionalHtml.innerHTML=l.options.additionalHtml,l.domNodes.image.appendChild(l.domNodes.additionalHtml)),l.options.download&&l.domNodes.downloadLink.setAttribute("href",l.currentImage.getAttribute("src"))})}},{key:"zoomPanElement",value:function(i,l,g){this.currentImage.style[this.transitionPrefix+"transform"]="translate("+i+","+l+") scale("+g+")"}},{key:"minMax",value:function(i,l,g){return i<l?l:i>g?g:i}},{key:"setZoomData",value:function(i,l,g){this.currentImage.dataset.scale=i,this.currentImage.dataset.translateX=l,this.currentImage.dataset.translateY=g}},{key:"hashchangeHandler",value:function(){this.isOpen&&this.hash===this.initialLocationHash&&(this.hashReseted=!0,this.close())}},{key:"addEvents",value:function(){var i=this;if(this.addEventListener(window,"resize."+this.eventNamespace,function(g){i.isOpen&&i.adjustImage()}),this.addEventListener(this.domNodes.closeButton,["click."+this.eventNamespace,"touchstart."+this.eventNamespace],this.close.bind(this)),this.options.history&&setTimeout(function(){i.addEventListener(window,"hashchange."+i.eventNamespace,function(g){i.isOpen&&i.hashchangeHandler()})},40),this.addEventListener(this.domNodes.navigation.getElementsByTagName("button"),"click."+this.eventNamespace,function(g){if(!g.currentTarget.tagName.match(/button/i))return!0;g.preventDefault(),i.controlCoordinates.swipeDiff=0,i.loadImage(g.currentTarget.classList.contains("sl-next")?1:-1)}),this.options.scrollZoom){var l=1;this.addEventListener(this.domNodes.image,["mousewheel","DOMMouseScroll"],function(g){if(i.controlCoordinates.mousedown||i.isAnimating||i.isClosing||!i.isOpen)return!0;i.controlCoordinates.containerHeight==0&&(i.controlCoordinates.containerHeight=i.getDimensions(i.domNodes.image).height,i.controlCoordinates.containerWidth=i.getDimensions(i.domNodes.image).width,i.controlCoordinates.imgHeight=i.getDimensions(i.currentImage).height,i.controlCoordinates.imgWidth=i.getDimensions(i.currentImage).width,i.controlCoordinates.containerOffsetX=i.domNodes.image.offsetLeft,i.controlCoordinates.containerOffsetY=i.domNodes.image.offsetTop,i.controlCoordinates.initialOffsetX=parseFloat(i.currentImage.dataset.translateX),i.controlCoordinates.initialOffsetY=parseFloat(i.currentImage.dataset.translateY));var C=g.delta||g.wheelDelta;C===void 0&&(C=g.detail),C=Math.max(-1,Math.min(1,C)),l+=C*i.options.scrollZoomFactor*l,l=Math.max(1,Math.min(i.options.maxZoom,l)),i.controlCoordinates.targetScale=l;var S=document.documentElement.scrollTop||document.body.scrollTop;i.controlCoordinates.pinchOffsetX=g.pageX,i.controlCoordinates.pinchOffsetY=g.pageY-S||0,i.controlCoordinates.limitOffsetX=(i.controlCoordinates.imgWidth*i.controlCoordinates.targetScale-i.controlCoordinates.containerWidth)/2,i.controlCoordinates.limitOffsetY=(i.controlCoordinates.imgHeight*i.controlCoordinates.targetScale-i.controlCoordinates.containerHeight)/2,i.controlCoordinates.scaleDifference=i.controlCoordinates.targetScale-i.controlCoordinates.initialScale,i.controlCoordinates.targetOffsetX=i.controlCoordinates.imgWidth*i.controlCoordinates.targetScale<=i.controlCoordinates.containerWidth?0:i.minMax(i.controlCoordinates.initialOffsetX-(i.controlCoordinates.pinchOffsetX-i.controlCoordinates.containerOffsetX-i.controlCoordinates.containerWidth/2-i.controlCoordinates.initialOffsetX)/(i.controlCoordinates.targetScale-i.controlCoordinates.scaleDifference)*i.controlCoordinates.scaleDifference,i.controlCoordinates.limitOffsetX*-1,i.controlCoordinates.limitOffsetX),i.controlCoordinates.targetOffsetY=i.controlCoordinates.imgHeight*i.controlCoordinates.targetScale<=i.controlCoordinates.containerHeight?0:i.minMax(i.controlCoordinates.initialOffsetY-(i.controlCoordinates.pinchOffsetY-i.controlCoordinates.containerOffsetY-i.controlCoordinates.containerHeight/2-i.controlCoordinates.initialOffsetY)/(i.controlCoordinates.targetScale-i.controlCoordinates.scaleDifference)*i.controlCoordinates.scaleDifference,i.controlCoordinates.limitOffsetY*-1,i.controlCoordinates.limitOffsetY),i.zoomPanElement(i.controlCoordinates.targetOffsetX+"px",i.controlCoordinates.targetOffsetY+"px",i.controlCoordinates.targetScale),i.controlCoordinates.targetScale>1?(i.controlCoordinates.zoomed=!0,(!i.domNodes.caption.style.opacity||i.domNodes.caption.style.opacity>0)&&i.domNodes.caption.style.display!=="none"&&i.fadeOut(i.domNodes.caption,i.options.fadeSpeed)):(i.controlCoordinates.initialScale===1&&(i.controlCoordinates.zoomed=!1,i.domNodes.caption.style.display==="none"&&i.fadeIn(i.domNodes.caption,i.options.fadeSpeed)),i.controlCoordinates.initialPinchDistance=null,i.controlCoordinates.capture=!1),i.controlCoordinates.initialPinchDistance=i.controlCoordinates.targetPinchDistance,i.controlCoordinates.initialScale=i.controlCoordinates.targetScale,i.controlCoordinates.initialOffsetX=i.controlCoordinates.targetOffsetX,i.controlCoordinates.initialOffsetY=i.controlCoordinates.targetOffsetY,i.setZoomData(i.controlCoordinates.targetScale,i.controlCoordinates.targetOffsetX,i.controlCoordinates.targetOffsetY),i.zoomPanElement(i.controlCoordinates.targetOffsetX+"px",i.controlCoordinates.targetOffsetY+"px",i.controlCoordinates.targetScale)})}this.addEventListener(this.domNodes.image,["touchstart."+this.eventNamespace,"mousedown."+this.eventNamespace],function(g){if(g.target.tagName==="A"&&g.type==="touchstart")return!0;if(g.type==="mousedown")g.preventDefault(),i.controlCoordinates.initialPointerOffsetX=g.clientX,i.controlCoordinates.initialPointerOffsetY=g.clientY,i.controlCoordinates.containerHeight=i.getDimensions(i.domNodes.image).height,i.controlCoordinates.containerWidth=i.getDimensions(i.domNodes.image).width,i.controlCoordinates.imgHeight=i.getDimensions(i.currentImage).height,i.controlCoordinates.imgWidth=i.getDimensions(i.currentImage).width,i.controlCoordinates.containerOffsetX=i.domNodes.image.offsetLeft,i.controlCoordinates.containerOffsetY=i.domNodes.image.offsetTop,i.controlCoordinates.initialOffsetX=parseFloat(i.currentImage.dataset.translateX),i.controlCoordinates.initialOffsetY=parseFloat(i.currentImage.dataset.translateY),i.controlCoordinates.capture=!0;else{if(i.controlCoordinates.touchCount=g.touches.length,i.controlCoordinates.initialPointerOffsetX=g.touches[0].clientX,i.controlCoordinates.initialPointerOffsetY=g.touches[0].clientY,i.controlCoordinates.containerHeight=i.getDimensions(i.domNodes.image).height,i.controlCoordinates.containerWidth=i.getDimensions(i.domNodes.image).width,i.controlCoordinates.imgHeight=i.getDimensions(i.currentImage).height,i.controlCoordinates.imgWidth=i.getDimensions(i.currentImage).width,i.controlCoordinates.containerOffsetX=i.domNodes.image.offsetLeft,i.controlCoordinates.containerOffsetY=i.domNodes.image.offsetTop,i.controlCoordinates.touchCount===1){if(!i.controlCoordinates.doubleTapped)i.controlCoordinates.doubleTapped=!0,setTimeout(function(){i.controlCoordinates.doubleTapped=!1},300);else return i.currentImage.classList.add("sl-transition"),i.controlCoordinates.zoomed?(i.controlCoordinates.initialScale=1,i.setZoomData(i.controlCoordinates.initialScale,0,0),i.zoomPanElement("0px","0px",i.controlCoordinates.initialScale),i.controlCoordinates.zoomed=!1):(i.controlCoordinates.initialScale=i.options.doubleTapZoom,i.setZoomData(i.controlCoordinates.initialScale,0,0),i.zoomPanElement("0px","0px",i.controlCoordinates.initialScale),(!i.domNodes.caption.style.opacity||i.domNodes.caption.style.opacity>0)&&i.domNodes.caption.style.display!=="none"&&i.fadeOut(i.domNodes.caption,i.options.fadeSpeed),i.controlCoordinates.zoomed=!0),setTimeout(function(){i.currentImage&&i.currentImage.classList.remove("sl-transition")},200),!1;i.controlCoordinates.initialOffsetX=parseFloat(i.currentImage.dataset.translateX),i.controlCoordinates.initialOffsetY=parseFloat(i.currentImage.dataset.translateY)}else i.controlCoordinates.touchCount===2&&(i.controlCoordinates.initialPointerOffsetX2=g.touches[1].clientX,i.controlCoordinates.initialPointerOffsetY2=g.touches[1].clientY,i.controlCoordinates.initialOffsetX=parseFloat(i.currentImage.dataset.translateX),i.controlCoordinates.initialOffsetY=parseFloat(i.currentImage.dataset.translateY),i.controlCoordinates.pinchOffsetX=(i.controlCoordinates.initialPointerOffsetX+i.controlCoordinates.initialPointerOffsetX2)/2,i.controlCoordinates.pinchOffsetY=(i.controlCoordinates.initialPointerOffsetY+i.controlCoordinates.initialPointerOffsetY2)/2,i.controlCoordinates.initialPinchDistance=Math.sqrt((i.controlCoordinates.initialPointerOffsetX-i.controlCoordinates.initialPointerOffsetX2)*(i.controlCoordinates.initialPointerOffsetX-i.controlCoordinates.initialPointerOffsetX2)+(i.controlCoordinates.initialPointerOffsetY-i.controlCoordinates.initialPointerOffsetY2)*(i.controlCoordinates.initialPointerOffsetY-i.controlCoordinates.initialPointerOffsetY2)));i.controlCoordinates.capture=!0}return i.controlCoordinates.mousedown?!0:(i.transitionCapable&&(i.controlCoordinates.imageLeft=parseInt(i.domNodes.image.style.left,10)),i.controlCoordinates.mousedown=!0,i.controlCoordinates.swipeDiff=0,i.controlCoordinates.swipeYDiff=0,i.controlCoordinates.swipeStart=g.pageX||g.touches[0].pageX,i.controlCoordinates.swipeYStart=g.pageY||g.touches[0].pageY,!1)}),this.addEventListener(this.domNodes.image,["touchmove."+this.eventNamespace,"mousemove."+this.eventNamespace,"MSPointerMove"],function(g){if(!i.controlCoordinates.mousedown)return!0;if(g.type==="touchmove"){if(i.controlCoordinates.capture===!1)return!1;i.controlCoordinates.pointerOffsetX=g.touches[0].clientX,i.controlCoordinates.pointerOffsetY=g.touches[0].clientY,i.controlCoordinates.touchCount=g.touches.length,i.controlCoordinates.touchmoveCount++,i.controlCoordinates.touchCount>1?(i.controlCoordinates.pointerOffsetX2=g.touches[1].clientX,i.controlCoordinates.pointerOffsetY2=g.touches[1].clientY,i.controlCoordinates.targetPinchDistance=Math.sqrt((i.controlCoordinates.pointerOffsetX-i.controlCoordinates.pointerOffsetX2)*(i.controlCoordinates.pointerOffsetX-i.controlCoordinates.pointerOffsetX2)+(i.controlCoordinates.pointerOffsetY-i.controlCoordinates.pointerOffsetY2)*(i.controlCoordinates.pointerOffsetY-i.controlCoordinates.pointerOffsetY2)),i.controlCoordinates.initialPinchDistance===null&&(i.controlCoordinates.initialPinchDistance=i.controlCoordinates.targetPinchDistance),Math.abs(i.controlCoordinates.initialPinchDistance-i.controlCoordinates.targetPinchDistance)>=1&&(i.controlCoordinates.targetScale=i.minMax(i.controlCoordinates.targetPinchDistance/i.controlCoordinates.initialPinchDistance*i.controlCoordinates.initialScale,1,i.options.maxZoom),i.controlCoordinates.limitOffsetX=(i.controlCoordinates.imgWidth*i.controlCoordinates.targetScale-i.controlCoordinates.containerWidth)/2,i.controlCoordinates.limitOffsetY=(i.controlCoordinates.imgHeight*i.controlCoordinates.targetScale-i.controlCoordinates.containerHeight)/2,i.controlCoordinates.scaleDifference=i.controlCoordinates.targetScale-i.controlCoordinates.initialScale,i.controlCoordinates.targetOffsetX=i.controlCoordinates.imgWidth*i.controlCoordinates.targetScale<=i.controlCoordinates.containerWidth?0:i.minMax(i.controlCoordinates.initialOffsetX-(i.controlCoordinates.pinchOffsetX-i.controlCoordinates.containerOffsetX-i.controlCoordinates.containerWidth/2-i.controlCoordinates.initialOffsetX)/(i.controlCoordinates.targetScale-i.controlCoordinates.scaleDifference)*i.controlCoordinates.scaleDifference,i.controlCoordinates.limitOffsetX*-1,i.controlCoordinates.limitOffsetX),i.controlCoordinates.targetOffsetY=i.controlCoordinates.imgHeight*i.controlCoordinates.targetScale<=i.controlCoordinates.containerHeight?0:i.minMax(i.controlCoordinates.initialOffsetY-(i.controlCoordinates.pinchOffsetY-i.controlCoordinates.containerOffsetY-i.controlCoordinates.containerHeight/2-i.controlCoordinates.initialOffsetY)/(i.controlCoordinates.targetScale-i.controlCoordinates.scaleDifference)*i.controlCoordinates.scaleDifference,i.controlCoordinates.limitOffsetY*-1,i.controlCoordinates.limitOffsetY),i.zoomPanElement(i.controlCoordinates.targetOffsetX+"px",i.controlCoordinates.targetOffsetY+"px",i.controlCoordinates.targetScale),i.controlCoordinates.targetScale>1&&(i.controlCoordinates.zoomed=!0,(!i.domNodes.caption.style.opacity||i.domNodes.caption.style.opacity>0)&&i.domNodes.caption.style.display!=="none"&&i.fadeOut(i.domNodes.caption,i.options.fadeSpeed)),i.controlCoordinates.initialPinchDistance=i.controlCoordinates.targetPinchDistance,i.controlCoordinates.initialScale=i.controlCoordinates.targetScale,i.controlCoordinates.initialOffsetX=i.controlCoordinates.targetOffsetX,i.controlCoordinates.initialOffsetY=i.controlCoordinates.targetOffsetY)):(i.controlCoordinates.targetScale=i.controlCoordinates.initialScale,i.controlCoordinates.limitOffsetX=(i.controlCoordinates.imgWidth*i.controlCoordinates.targetScale-i.controlCoordinates.containerWidth)/2,i.controlCoordinates.limitOffsetY=(i.controlCoordinates.imgHeight*i.controlCoordinates.targetScale-i.controlCoordinates.containerHeight)/2,i.controlCoordinates.targetOffsetX=i.controlCoordinates.imgWidth*i.controlCoordinates.targetScale<=i.controlCoordinates.containerWidth?0:i.minMax(i.controlCoordinates.pointerOffsetX-(i.controlCoordinates.initialPointerOffsetX-i.controlCoordinates.initialOffsetX),i.controlCoordinates.limitOffsetX*-1,i.controlCoordinates.limitOffsetX),i.controlCoordinates.targetOffsetY=i.controlCoordinates.imgHeight*i.controlCoordinates.targetScale<=i.controlCoordinates.containerHeight?0:i.minMax(i.controlCoordinates.pointerOffsetY-(i.controlCoordinates.initialPointerOffsetY-i.controlCoordinates.initialOffsetY),i.controlCoordinates.limitOffsetY*-1,i.controlCoordinates.limitOffsetY),Math.abs(i.controlCoordinates.targetOffsetX)===Math.abs(i.controlCoordinates.limitOffsetX)&&(i.controlCoordinates.initialOffsetX=i.controlCoordinates.targetOffsetX,i.controlCoordinates.initialPointerOffsetX=i.controlCoordinates.pointerOffsetX),Math.abs(i.controlCoordinates.targetOffsetY)===Math.abs(i.controlCoordinates.limitOffsetY)&&(i.controlCoordinates.initialOffsetY=i.controlCoordinates.targetOffsetY,i.controlCoordinates.initialPointerOffsetY=i.controlCoordinates.pointerOffsetY),i.setZoomData(i.controlCoordinates.initialScale,i.controlCoordinates.targetOffsetX,i.controlCoordinates.targetOffsetY),i.zoomPanElement(i.controlCoordinates.targetOffsetX+"px",i.controlCoordinates.targetOffsetY+"px",i.controlCoordinates.targetScale))}if(g.type==="mousemove"&&i.controlCoordinates.mousedown){if(g.type=="touchmove")return!0;if(g.preventDefault(),i.controlCoordinates.capture===!1)return!1;i.controlCoordinates.pointerOffsetX=g.clientX,i.controlCoordinates.pointerOffsetY=g.clientY,i.controlCoordinates.targetScale=i.controlCoordinates.initialScale,i.controlCoordinates.limitOffsetX=(i.controlCoordinates.imgWidth*i.controlCoordinates.targetScale-i.controlCoordinates.containerWidth)/2,i.controlCoordinates.limitOffsetY=(i.controlCoordinates.imgHeight*i.controlCoordinates.targetScale-i.controlCoordinates.containerHeight)/2,i.controlCoordinates.targetOffsetX=i.controlCoordinates.imgWidth*i.controlCoordinates.targetScale<=i.controlCoordinates.containerWidth?0:i.minMax(i.controlCoordinates.pointerOffsetX-(i.controlCoordinates.initialPointerOffsetX-i.controlCoordinates.initialOffsetX),i.controlCoordinates.limitOffsetX*-1,i.controlCoordinates.limitOffsetX),i.controlCoordinates.targetOffsetY=i.controlCoordinates.imgHeight*i.controlCoordinates.targetScale<=i.controlCoordinates.containerHeight?0:i.minMax(i.controlCoordinates.pointerOffsetY-(i.controlCoordinates.initialPointerOffsetY-i.controlCoordinates.initialOffsetY),i.controlCoordinates.limitOffsetY*-1,i.controlCoordinates.limitOffsetY),Math.abs(i.controlCoordinates.targetOffsetX)===Math.abs(i.controlCoordinates.limitOffsetX)&&(i.controlCoordinates.initialOffsetX=i.controlCoordinates.targetOffsetX,i.controlCoordinates.initialPointerOffsetX=i.controlCoordinates.pointerOffsetX),Math.abs(i.controlCoordinates.targetOffsetY)===Math.abs(i.controlCoordinates.limitOffsetY)&&(i.controlCoordinates.initialOffsetY=i.controlCoordinates.targetOffsetY,i.controlCoordinates.initialPointerOffsetY=i.controlCoordinates.pointerOffsetY),i.setZoomData(i.controlCoordinates.initialScale,i.controlCoordinates.targetOffsetX,i.controlCoordinates.targetOffsetY),i.zoomPanElement(i.controlCoordinates.targetOffsetX+"px",i.controlCoordinates.targetOffsetY+"px",i.controlCoordinates.targetScale)}i.controlCoordinates.zoomed||(i.controlCoordinates.swipeEnd=g.pageX||g.touches[0].pageX,i.controlCoordinates.swipeYEnd=g.pageY||g.touches[0].pageY,i.controlCoordinates.swipeDiff=i.controlCoordinates.swipeStart-i.controlCoordinates.swipeEnd,i.controlCoordinates.swipeYDiff=i.controlCoordinates.swipeYStart-i.controlCoordinates.swipeYEnd,i.options.animationSlide&&i.slide(0,-i.controlCoordinates.swipeDiff+"px"))}),this.addEventListener(this.domNodes.image,["touchend."+this.eventNamespace,"mouseup."+this.eventNamespace,"touchcancel."+this.eventNamespace,"mouseleave."+this.eventNamespace,"pointerup","pointercancel","MSPointerUp","MSPointerCancel"],function(g){if(i.isTouchDevice&&g.type==="touchend"&&(i.controlCoordinates.touchCount=g.touches.length,i.controlCoordinates.touchCount===0?(i.currentImage&&i.setZoomData(i.controlCoordinates.initialScale,i.controlCoordinates.targetOffsetX,i.controlCoordinates.targetOffsetY),i.controlCoordinates.initialScale===1&&(i.controlCoordinates.zoomed=!1,i.domNodes.caption.style.display==="none"&&i.fadeIn(i.domNodes.caption,i.options.fadeSpeed)),i.controlCoordinates.initialPinchDistance=null,i.controlCoordinates.capture=!1):i.controlCoordinates.touchCount===1?(i.controlCoordinates.initialPointerOffsetX=g.touches[0].clientX,i.controlCoordinates.initialPointerOffsetY=g.touches[0].clientY):i.controlCoordinates.touchCount>1&&(i.controlCoordinates.initialPinchDistance=null)),i.controlCoordinates.mousedown){i.controlCoordinates.mousedown=!1;var C=!0;i.options.loop||(i.currentImageIndex===0&&i.controlCoordinates.swipeDiff<0&&(C=!1),i.currentImageIndex>=i.relatedElements.length-1&&i.controlCoordinates.swipeDiff>0&&(C=!1)),Math.abs(i.controlCoordinates.swipeDiff)>i.options.swipeTolerance&&C?i.loadImage(i.controlCoordinates.swipeDiff>0?1:-1):i.options.animationSlide&&i.slide(i.options.animationSpeed/1e3,"0px"),i.options.swipeClose&&Math.abs(i.controlCoordinates.swipeYDiff)>50&&Math.abs(i.controlCoordinates.swipeDiff)<i.options.swipeTolerance&&i.close()}}),this.addEventListener(this.domNodes.image,["dblclick"],function(g){if(!i.isTouchDevice)return i.controlCoordinates.initialPointerOffsetX=g.clientX,i.controlCoordinates.initialPointerOffsetY=g.clientY,i.controlCoordinates.containerHeight=i.getDimensions(i.domNodes.image).height,i.controlCoordinates.containerWidth=i.getDimensions(i.domNodes.image).width,i.controlCoordinates.imgHeight=i.getDimensions(i.currentImage).height,i.controlCoordinates.imgWidth=i.getDimensions(i.currentImage).width,i.controlCoordinates.containerOffsetX=i.domNodes.image.offsetLeft,i.controlCoordinates.containerOffsetY=i.domNodes.image.offsetTop,i.currentImage.classList.add("sl-transition"),i.controlCoordinates.zoomed?(i.controlCoordinates.initialScale=1,i.setZoomData(i.controlCoordinates.initialScale,0,0),i.zoomPanElement("0px","0px",i.controlCoordinates.initialScale),i.controlCoordinates.zoomed=!1,i.domNodes.caption.style.display==="none"&&i.fadeIn(i.domNodes.caption,i.options.fadeSpeed)):(i.controlCoordinates.initialScale=i.options.doubleTapZoom,i.setZoomData(i.controlCoordinates.initialScale,0,0),i.zoomPanElement("0px","0px",i.controlCoordinates.initialScale),(!i.domNodes.caption.style.opacity||i.domNodes.caption.style.opacity>0)&&i.domNodes.caption.style.display!=="none"&&i.fadeOut(i.domNodes.caption,i.options.fadeSpeed),i.controlCoordinates.zoomed=!0),setTimeout(function(){i.currentImage&&(i.currentImage.classList.remove("sl-transition"),i.currentImage.style[i.transitionPrefix+"transform-origin"]=null)},200),i.controlCoordinates.capture=!0,!1})}},{key:"getDimensions",value:function(i){var l=window.getComputedStyle(i),g=i.offsetHeight,C=i.offsetWidth,S=parseFloat(l.borderTopWidth),P=parseFloat(l.borderBottomWidth),w=parseFloat(l.paddingTop),E=parseFloat(l.paddingBottom),T=parseFloat(l.borderLeftWidth),A=parseFloat(l.borderRightWidth),N=parseFloat(l.paddingLeft),H=parseFloat(l.paddingRight);return{height:g-P-S-w-E,width:C-T-A-N-H}}},{key:"updateHash",value:function(){var i="pid="+(this.currentImageIndex+1),l=window.location.href.split("#")[0]+"#"+i;this.hashReseted=!1,this.pushStateSupport?window.history[this.historyHasChanges?"replaceState":"pushState"]("",document.title,l):this.historyHasChanges?window.location.replace(l):window.location.hash=i,this.historyHasChanges||(this.urlChangedOnce=!0),this.historyHasChanges=!0}},{key:"resetHash",value:function(){this.hashReseted=!0,this.urlChangedOnce?history.back():this.pushStateSupport?history.pushState("",document.title,window.location.pathname+window.location.search):window.location.hash="",clearTimeout(this.historyUpdateTimeout)}},{key:"updateURL",value:function(){clearTimeout(this.historyUpdateTimeout),this.historyHasChanges?this.historyUpdateTimeout=setTimeout(this.updateHash.bind(this),800):this.updateHash()}},{key:"setCaption",value:function(i,l,g){var C=this;if(this.options.captions&&i&&i!==""&&typeof i<"u"){var S,P=!((S=g??this.options.captionHTML)!==null&&S!==void 0)||S?"innerHTML":"innerText";this.hide(this.domNodes.caption),this.domNodes.caption.style.width=l+"px",this.domNodes.caption[P]=i,this.domNodes.image.appendChild(this.domNodes.caption),setTimeout(function(){C.fadeIn(C.domNodes.caption,C.options.fadeSpeed)},this.options.captionDelay)}}},{key:"slide",value:function(i,l){if(!this.transitionCapable)return this.domNodes.image.style.left=l;this.domNodes.image.style[this.transitionPrefix+"transform"]="translateX("+l+")",this.domNodes.image.style[this.transitionPrefix+"transition"]=this.transitionPrefix+"transform "+i+"s linear"}},{key:"getRelated",value:function(i){var l;return i&&i!==!1&&i!=="nofollow"?l=Array.from(this.elements).filter(function(g){return g.getAttribute("rel")===i}):l=this.elements,l}},{key:"openImage",value:function(i){var l=this;i.dispatchEvent(new Event("show."+this.eventNamespace)),this.globalScrollbarWidth=this.getScrollbarWidth(),this.options.disableScroll&&(this.toggleScrollbar("hide"),this.globalScrollbarWidth=0),this.options.htmlClass&&this.options.htmlClass!==""&&document.querySelector("html").classList.add(this.options.htmlClass),document.body.appendChild(this.domNodes.wrapper),this.domNodes.wrapper.appendChild(this.domNodes.image),this.options.overlay&&document.body.appendChild(this.domNodes.overlay),this.relatedElements=this.getRelated(i.rel),this.options.showCounter&&(this.relatedElements.length==1&&this.domNodes.wrapper.contains(this.domNodes.counter)?this.domNodes.wrapper.removeChild(this.domNodes.counter):this.relatedElements.length>1&&!this.domNodes.wrapper.contains(this.domNodes.counter)&&this.domNodes.wrapper.appendChild(this.domNodes.counter)),this.options.download&&this.domNodes.download&&this.domNodes.wrapper.appendChild(this.domNodes.download),this.isAnimating=!0,this.currentImageIndex=this.relatedElements.indexOf(i);var g=i.getAttribute(this.options.sourceAttr);this.currentImage=document.createElement("img"),this.currentImage.style.display="none",this.currentImage.setAttribute("src",g),this.currentImage.dataset.scale=1,this.currentImage.dataset.translateX=0,this.currentImage.dataset.translateY=0,this.loadedImages.indexOf(g)===-1&&this.loadedImages.push(g),this.domNodes.image.innerHTML="",this.domNodes.image.setAttribute("style",""),this.domNodes.image.appendChild(this.currentImage),this.fadeIn(this.domNodes.overlay,this.options.fadeSpeed),this.fadeIn([this.domNodes.counter,this.domNodes.navigation,this.domNodes.closeButton,this.domNodes.download],this.options.fadeSpeed),this.show(this.domNodes.spinner),this.domNodes.counter.querySelector(".sl-current").innerHTML=this.currentImageIndex+1,this.domNodes.counter.querySelector(".sl-total").innerHTML=this.relatedElements.length,this.adjustImage(),this.options.preloading&&this.preload(),setTimeout(function(){i.dispatchEvent(new Event("shown."+l.eventNamespace))},this.options.animationSpeed)}},{key:"forceFocus",value:function(){var i=this;this.removeEventListener(document,"focusin."+this.eventNamespace),this.addEventListener(document,"focusin."+this.eventNamespace,function(l){document!==l.target&&i.domNodes.wrapper!==l.target&&!i.domNodes.wrapper.contains(l.target)&&i.domNodes.wrapper.focus()})}},{key:"addEventListener",value:function(i,l,g,C){i=this.wrap(i),l=this.wrap(l);var S=t(i),P;try{for(S.s();!(P=S.n()).done;){var w=P.value;w.namespaces||(w.namespaces={});var E=t(l),T;try{for(E.s();!(T=E.n()).done;){var A=T.value,N=C||!1,H=["touchstart","touchmove","mousewheel","DOMMouseScroll"].indexOf(A.split(".")[0])>=0;H&&this.isPassiveEventsSupported&&(e(N)==="object"?N.passive=!0:N={passive:!0}),w.namespaces[A]=g,w.addEventListener(A.split(".")[0],g,N)}}catch(q){E.e(q)}finally{E.f()}}}catch(q){S.e(q)}finally{S.f()}}},{key:"removeEventListener",value:function(i,l){i=this.wrap(i),l=this.wrap(l);var g=t(i),C;try{for(g.s();!(C=g.n()).done;){var S=C.value,P=t(l),w;try{for(P.s();!(w=P.n()).done;){var E=w.value;S.namespaces&&S.namespaces[E]&&(S.removeEventListener(E.split(".")[0],S.namespaces[E]),delete S.namespaces[E])}}catch(T){P.e(T)}finally{P.f()}}}catch(T){g.e(T)}finally{g.f()}}},{key:"fadeOut",value:function(i,l,g){var C=this;i=this.wrap(i);var S=t(i),P;try{for(S.s();!(P=S.n()).done;){var w=P.value;w.style.opacity=parseFloat(w)||window.getComputedStyle(w).getPropertyValue("opacity")}}catch(A){S.e(A)}finally{S.f()}this.isFadeIn=!1;var E=16.66666/(l||this.options.fadeSpeed),T=function A(){var N=parseFloat(i[0].style.opacity);if((N-=E)<0){var H=t(i),q;try{for(H.s();!(q=H.n()).done;){var K=q.value;K.style.display="none",K.style.opacity=1}}catch(re){H.e(re)}finally{H.f()}g&&g.call(C,i)}else{var J=t(i),fe;try{for(J.s();!(fe=J.n()).done;){var ae=fe.value;ae.style.opacity=N}}catch(re){J.e(re)}finally{J.f()}requestAnimationFrame(A)}};T()}},{key:"fadeIn",value:function(i,l,g,C){var S=this;i=this.wrap(i);var P=t(i),w;try{for(P.s();!(w=P.n()).done;){var E=w.value;E&&(E.style.opacity=0,E.style.display=C||"block")}}catch(H){P.e(H)}finally{P.f()}this.isFadeIn=!0;var T=parseFloat(i[0].dataset.opacityTarget||1),A=16.66666*T/(l||this.options.fadeSpeed),N=function H(){var q=parseFloat(i[0].style.opacity);if((q+=A)>T){var ae=t(i),re;try{for(ae.s();!(re=ae.n()).done;){var ot=re.value;ot&&(ot.style.opacity=T)}}catch(De){ae.e(De)}finally{ae.f()}g&&g.call(S,i)}else{var K=t(i),J;try{for(K.s();!(J=K.n()).done;){var fe=J.value;fe&&(fe.style.opacity=q)}}catch(De){K.e(De)}finally{K.f()}if(!S.isFadeIn)return;requestAnimationFrame(H)}};N()}},{key:"hide",value:function(i){i=this.wrap(i);var l=t(i),g;try{for(l.s();!(g=l.n()).done;){var C=g.value;C.style.display!="none"&&(C.dataset.initialDisplay=C.style.display),C.style.display="none"}}catch(S){l.e(S)}finally{l.f()}}},{key:"show",value:function(i,l){i=this.wrap(i);var g=t(i),C;try{for(g.s();!(C=g.n()).done;){var S=C.value;S.style.display=S.dataset.initialDisplay||l||"block"}}catch(P){g.e(P)}finally{g.f()}}},{key:"wrap",value:function(i){return typeof i[Symbol.iterator]=="function"&&typeof i!="string"?i:[i]}},{key:"on",value:function(i,l){i=this.wrap(i);var g=t(this.elements),C;try{for(g.s();!(C=g.n()).done;){var S=C.value;S.fullyNamespacedEvents||(S.fullyNamespacedEvents={});var P=t(i),w;try{for(P.s();!(w=P.n()).done;){var E=w.value;S.fullyNamespacedEvents[E]=l,S.addEventListener(E,l)}}catch(T){P.e(T)}finally{P.f()}}}catch(T){g.e(T)}finally{g.f()}return this}},{key:"off",value:function(i){i=this.wrap(i);var l=t(this.elements),g;try{for(l.s();!(g=l.n()).done;){var C=g.value,S=t(i),P;try{for(S.s();!(P=S.n()).done;){var w=P.value;typeof C.fullyNamespacedEvents<"u"&&w in C.fullyNamespacedEvents&&C.removeEventListener(w,C.fullyNamespacedEvents[w])}}catch(E){S.e(E)}finally{S.f()}}}catch(E){l.e(E)}finally{l.f()}return this}},{key:"open",value:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;i=i||this.elements[0],typeof jQuery<"u"&&i instanceof jQuery&&(i=i.get(0)),l>0&&(i=this.elements[l]),this.initialImageIndex=this.elements.indexOf(i),this.initialImageIndex>-1&&this.openImage(i)}},{key:"openPosition",value:function(i){var l=this.elements[i];this.open(l,i)}},{key:"next",value:function(){this.loadImage(1)}},{key:"prev",value:function(){this.loadImage(-1)}},{key:"getLighboxData",value:function(){return{currentImageIndex:this.currentImageIndex,currentImage:this.currentImage,globalScrollbarWidth:this.globalScrollbarWidth}}},{key:"destroy",value:function(){this.off(["close."+this.eventNamespace,"closed."+this.eventNamespace,"nextImageLoaded."+this.eventNamespace,"prevImageLoaded."+this.eventNamespace,"change."+this.eventNamespace,"nextDone."+this.eventNamespace,"prevDone."+this.eventNamespace,"error."+this.eventNamespace,"changed."+this.eventNamespace,"next."+this.eventNamespace,"prev."+this.eventNamespace,"show."+this.eventNamespace,"shown."+this.eventNamespace]),this.removeEventListener(this.elements,"click."+this.eventNamespace),this.removeEventListener(document,"focusin."+this.eventNamespace),this.removeEventListener(document.body,"contextmenu."+this.eventNamespace),this.removeEventListener(document.body,"keyup."+this.eventNamespace),this.removeEventListener(this.domNodes.navigation.getElementsByTagName("button"),"click."+this.eventNamespace),this.removeEventListener(this.domNodes.closeButton,"click."+this.eventNamespace),this.removeEventListener(window,"resize."+this.eventNamespace),this.removeEventListener(window,"hashchange."+this.eventNamespace),this.close(),this.isOpen&&(document.body.removeChild(this.domNodes.wrapper),document.body.removeChild(this.domNodes.overlay)),this.elements=null}},{key:"refresh",value:function(){if(!this.initialSelector)throw"refreshing only works when you initialize using a selector!";var i=this.options,l=this.initialSelector;return this.destroy(),this.constructor(l,i),this}}]),b}(),y=f;c.default=y,Ut.SimpleLightbox=f})(Gt);const x=(c,e=1e4)=>(c=parseFloat(c+"")||0,Math.round((c+Number.EPSILON)*e)/e),Ke=function(c){if(!(c&&c instanceof Element&&c.offsetParent))return!1;const e=c.scrollHeight>c.clientHeight,t=window.getComputedStyle(c).overflowY,o=t.indexOf("hidden")!==-1,n=t.indexOf("visible")!==-1;return e&&!o&&!n},Ae=function(c,e=void 0){return!(!c||c===document.body||e&&c===e)&&(Ke(c)?c:Ae(c.parentElement,e))},_=function(c){var e=new DOMParser().parseFromString(c,"text/html").body;if(e.childElementCount>1){for(var t=document.createElement("div");e.firstChild;)t.appendChild(e.firstChild);return t}return e.firstChild},et=c=>`${c||""}`.split(" ").filter(e=>!!e),$=(c,e,t)=>{c&&et(e).forEach(o=>{c.classList.toggle(o,t||!1)})};class le{constructor(e){Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,this.id=self.Touch&&e instanceof Touch?e.identifier:-1,this.time=Date.now()}}const ce={passive:!1};class Kt{constructor(e,{start:t=()=>!0,move:o=()=>{},end:n=()=>{}}){Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=e,this.startCallback=t,this.moveCallback=o,this.endCallback=n;for(const s of["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"])this[s]=this[s].bind(this);this.element.addEventListener("mousedown",this.onPointerStart,ce),this.element.addEventListener("touchstart",this.onTouchStart,ce),this.element.addEventListener("touchmove",this.onMove,ce),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}onPointerStart(e){if(!e.buttons||e.button!==0)return;const t=new le(e);this.currentPointers.some(o=>o.id===t.id)||this.triggerPointerStart(t,e)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur))}onTouchStart(e){for(const t of Array.from(e.changedTouches||[]))this.triggerPointerStart(new le(t),e);window.addEventListener("blur",this.onWindowBlur)}onMove(e){const t=this.currentPointers.slice(),o="changedTouches"in e?Array.from(e.changedTouches||[]).map(s=>new le(s)):[new le(e)],n=[];for(const s of o){const a=this.currentPointers.findIndex(r=>r.id===s.id);a<0||(n.push(s),this.currentPointers[a]=s)}n.length&&this.moveCallback(e,this.currentPointers.slice(),t)}onPointerEnd(e){e.buttons>0&&e.button!==0||(this.triggerPointerEnd(e,new le(e)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}onTouchEnd(e){for(const t of Array.from(e.changedTouches||[]))this.triggerPointerEnd(e,new le(t))}triggerPointerStart(e,t){return!!this.startCallback(t,e,this.currentPointers.slice())&&(this.currentPointers.push(e),this.startPointers.push(e),!0)}triggerPointerEnd(e,t){const o=this.currentPointers.findIndex(n=>n.id===t.id);o<0||(this.currentPointers.splice(o,1),this.startPointers.splice(o,1),this.endCallback(e,t,this.currentPointers.slice()))}onWindowBlur(){this.clear()}clear(){for(;this.currentPointers.length;){const e=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:e.clientX,clientY:e.clientY}),e,this.currentPointers.slice())}}stop(){this.element.removeEventListener("mousedown",this.onPointerStart,ce),this.element.removeEventListener("touchstart",this.onTouchStart,ce),this.element.removeEventListener("touchmove",this.onMove,ce),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}}function nt(c,e){return e?Math.sqrt(Math.pow(e.clientX-c.clientX,2)+Math.pow(e.clientY-c.clientY,2)):0}function st(c,e){return e?{clientX:(c.clientX+e.clientX)/2,clientY:(c.clientY+e.clientY)/2}:c}const Je=c=>typeof c=="object"&&c!==null&&c.constructor===Object&&Object.prototype.toString.call(c)==="[object Object]",F=(c,...e)=>{const t=e.length;for(let o=0;o<t;o++){const n=e[o]||{};Object.entries(n).forEach(([s,a])=>{const r=Array.isArray(a)?[]:{};c[s]||Object.assign(c,{[s]:r}),Je(a)?Object.assign(c[s],F(r,a)):Array.isArray(a)?Object.assign(c,{[s]:[...a]}):Object.assign(c,{[s]:a})})}return c},ze=function(c,e){return c.split(".").reduce((t,o)=>typeof t=="object"?t[o]:void 0,e)};class Ne{constructor(e={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(e);for(const t of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))t.startsWith("on")&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}setOptions(e){this.options=e?F({},this.constructor.defaults,e):{};for(const[t,o]of Object.entries(this.option("on")||{}))this.on(t,o)}option(e,...t){let o=ze(e,this.options);return o&&typeof o=="function"&&(o=o.call(this,this,...t)),o}optionFor(e,t,o,...n){let s=ze(t,e);var a;typeof(a=s)!="string"||isNaN(a)||isNaN(parseFloat(a))||(s=parseFloat(s)),s==="true"&&(s=!0),s==="false"&&(s=!1),s&&typeof s=="function"&&(s=s.call(this,this,e,...n));let r=ze(t,this.options);return r&&typeof r=="function"?s=r.call(this,this,e,...n,s):s===void 0&&(s=r),s===void 0?o:s}cn(e){const t=this.options.classes;return t&&t[e]||""}localize(e,t=[]){e=String(e).replace(/\{\{(\w+).?(\w+)?\}\}/g,(o,n,s)=>{let a="";return s?a=this.option(`${n[0]+n.toLowerCase().substring(1)}.l10n.${s}`):n&&(a=this.option(`l10n.${n}`)),a||(a=o),a});for(let o=0;o<t.length;o++)e=e.split(t[o][0]).join(t[o][1]);return e=e.replace(/\{\{(.*?)\}\}/g,(o,n)=>n)}on(e,t){let o=[];typeof e=="string"?o=e.split(" "):Array.isArray(e)&&(o=e),this.events||(this.events=new Map),o.forEach(n=>{let s=this.events.get(n);s||(this.events.set(n,[]),s=[]),s.includes(t)||s.push(t),this.events.set(n,s)})}off(e,t){let o=[];typeof e=="string"?o=e.split(" "):Array.isArray(e)&&(o=e),o.forEach(n=>{const s=this.events.get(n);if(Array.isArray(s)){const a=s.indexOf(t);a>-1&&s.splice(a,1)}})}emit(e,...t){[...this.events.get(e)||[]].forEach(o=>o(this,...t)),e!=="*"&&this.emit("*",e,...t)}}Object.defineProperty(Ne,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.33"}),Object.defineProperty(Ne,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});class tt extends Ne{constructor(e={}){super(e),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}})}attachPlugins(e={}){const t=new Map;for(const[o,n]of Object.entries(e)){const s=this.option(o),a=this.plugins[o];a||s===!1?a&&s===!1&&(a.detach(),delete this.plugins[o]):t.set(o,new n(this,s||{}))}for(const[o,n]of t)this.plugins[o]=n,n.attach()}detachPlugins(e){e=e||Object.keys(this.plugins);for(const t of e){const o=this.plugins[t];o&&o.detach(),delete this.plugins[t]}return this.emit("detachPlugins"),this}}var L;(function(c){c[c.Init=0]="Init",c[c.Error=1]="Error",c[c.Ready=2]="Ready",c[c.Panning=3]="Panning",c[c.Mousemove=4]="Mousemove",c[c.Destroy=5]="Destroy"})(L||(L={}));const Z=["a","b","c","d","e","f"],At={PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"},Jt={content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:At},at='<circle cx="25" cy="25" r="20"></circle>',it='<div class="f-spinner"><svg viewBox="0 0 50 50">'+at+at+"</svg></div>",R=c=>c&&c!==null&&c instanceof Element&&"nodeType"in c,I=(c,e)=>{c&&et(e).forEach(t=>{c.classList.remove(t)})},O=(c,e)=>{c&&et(e).forEach(t=>{c.classList.add(t)})},ye={a:1,b:0,c:0,d:1,e:0,f:0},Qt=1e5,Ce=1e4,j="mousemove",rt="drag",lt="content";let Re=null,Fe=null;class se extends tt{get fits(){return this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1}get isTouchDevice(){return Fe===null&&(Fe=window.matchMedia("(hover: none)").matches),Fe}get isMobile(){return Re===null&&(Re=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),Re}get panMode(){return this.options.panMode!==j||this.isTouchDevice?rt:j}get panOnlyZoomed(){const e=this.options.panOnlyZoomed;return e==="auto"?this.isTouchDevice:e}get isInfinite(){return this.option("infinite")}get angle(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}get targetAngle(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}get scale(){const{a:e,b:t}=this.current;return Math.sqrt(e*e+t*t)||1}get targetScale(){const{a:e,b:t}=this.target;return Math.sqrt(e*e+t*t)||1}get minScale(){return this.option("minScale")||1}get fullScale(){const{contentRect:e}=this;return e.fullWidth/e.fitWidth||1}get maxScale(){return this.fullScale*(this.option("maxScale")||1)||1}get coverScale(){const{containerRect:e,contentRect:t}=this,o=Math.max(e.height/t.fitHeight,e.width/t.fitWidth)||1;return Math.min(this.fullScale,o)}get isScaling(){return Math.abs(this.targetScale-this.scale)>1e-5&&!this.isResting}get isContentLoading(){const e=this.content;return!!(e&&e instanceof HTMLImageElement)&&!e.complete}get isResting(){if(this.isBouncingX||this.isBouncingY)return!1;for(const e of Z){const t=e=="e"||e==="f"?1e-4:1e-5;if(Math.abs(this.target[e]-this.current[e])>t)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}constructor(e,t={},o={}){var n;if(super(t),Object.defineProperty(this,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:L.Init}),Object.defineProperty(this,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(this,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(this,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(this,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},ye)}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},ye)}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(this,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!e)throw new Error("Container Element Not Found");this.container=e,this.initContent(),this.attachPlugins(Object.assign(Object.assign({},se.Plugins),o)),this.emit("attachPlugins"),this.emit("init");const s=this.content;if(s.addEventListener("load",this.onLoad),s.addEventListener("error",this.onError),this.isContentLoading){if(this.option("spinner")){e.classList.add(this.cn("isLoading"));const a=_(it);!e.contains(s)||s.parentElement instanceof HTMLPictureElement?this.spinner=e.appendChild(a):this.spinner=((n=s.parentElement)===null||n===void 0?void 0:n.insertBefore(a,s))||null}this.emit("beforeLoad")}else queueMicrotask(()=>{this.enable()})}initContent(){const{container:e}=this,t=this.cn(lt);let o=this.option(lt)||e.querySelector(`.${t}`);if(o||(o=e.querySelector("img,picture")||e.firstElementChild,o&&O(o,t)),o instanceof HTMLPictureElement&&(o=o.querySelector("img")),!o)throw new Error("No content found");this.content=o}onLoad(){const{spinner:e,container:t,state:o}=this;e&&(e.remove(),this.spinner=null),this.option("spinner")&&t.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),o===L.Init?this.enable():this.updateMetrics()}onError(){this.state!==L.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=L.Error,this.emit("error"))}getNextScale(e){const{fullScale:t,targetScale:o,coverScale:n,maxScale:s,minScale:a}=this;let r=a;switch(e){case"toggleMax":r=o-a<.5*(s-a)?s:a;break;case"toggleCover":r=o-a<.5*(n-a)?n:a;break;case"toggleZoom":r=o-a<.5*(t-a)?t:a;break;case"iterateZoom":let d=[1,t,s].sort((u,m)=>u-m),h=d.findIndex(u=>u>o+1e-5);r=d[h]||1}return r}attachObserver(){var e;const t=()=>{const{container:o,containerRect:n}=this;return Math.abs(n.width-o.getBoundingClientRect().width)>.1||Math.abs(n.height-o.getBoundingClientRect().height)>.1};this.resizeObserver||window.ResizeObserver===void 0||(this.resizeObserver=new ResizeObserver(()=>{this.updateTimer||(t()?(this.onResize(),this.isMobile&&(this.updateTimer=setTimeout(()=>{t()&&this.onResize(),this.updateTimer=null},500))):this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null))})),(e=this.resizeObserver)===null||e===void 0||e.observe(this.container)}detachObserver(){var e;(e=this.resizeObserver)===null||e===void 0||e.disconnect()}attachEvents(){const{container:e}=this;e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new Kt(e,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(j,this.onMouseMove)}detachEvents(){var e;const{container:t}=this;t.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),t.removeEventListener("wheel",this.onWheel,{passive:!1}),(e=this.pointerTracker)===null||e===void 0||e.stop(),this.pointerTracker=null,document.removeEventListener(j,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}animate(){this.setTargetForce();const e=this.friction,t=this.option("maxVelocity");for(const o of Z)e?(this.velocity[o]*=1-e,t&&!this.isScaling&&(this.velocity[o]=Math.max(Math.min(this.velocity[o],t),-1*t)),this.current[o]+=this.velocity[o]):this.current[o]=this.target[o];this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame(()=>this.animate()):this.stop("current")}setTargetForce(){for(const e of Z)e==="e"&&this.isBouncingX||e==="f"&&this.isBouncingY||(this.velocity[e]=(1/(1-this.friction)-1)*(this.target[e]-this.current[e]))}checkBounds(e=0,t=0){const{current:o}=this,n=o.e+e,s=o.f+t,a=this.getBounds(),{x:r,y:d}=a,h=r.min,u=r.max,m=d.min,p=d.max;let f=0,y=0;return h!==1/0&&n<h?f=h-n:u!==1/0&&n>u&&(f=u-n),m!==1/0&&s<m?y=m-s:p!==1/0&&s>p&&(y=p-s),Math.abs(f)<1e-4&&(f=0),Math.abs(y)<1e-4&&(y=0),Object.assign(Object.assign({},a),{xDiff:f,yDiff:y,inBounds:!f&&!y})}clampTargetBounds(){const{target:e}=this,{x:t,y:o}=this.getBounds();t.min!==1/0&&(e.e=Math.max(e.e,t.min)),t.max!==1/0&&(e.e=Math.min(e.e,t.max)),o.min!==1/0&&(e.f=Math.max(e.f,o.min)),o.max!==1/0&&(e.f=Math.min(e.f,o.max))}calculateContentDim(e=this.current){const{content:t,contentRect:o}=this,{fitWidth:n,fitHeight:s,fullWidth:a,fullHeight:r}=o;let d=a,h=r;if(this.option("zoom")||this.angle!==0){const u=!(t instanceof HTMLImageElement)&&(window.getComputedStyle(t).maxWidth==="none"||window.getComputedStyle(t).maxHeight==="none"),m=u?a:n,p=u?r:s,f=this.getMatrix(e),y=new DOMPoint(0,0).matrixTransform(f),b=new DOMPoint(0+m,0).matrixTransform(f),v=new DOMPoint(0+m,0+p).matrixTransform(f),i=new DOMPoint(0,0+p).matrixTransform(f),l=Math.abs(v.x-y.x),g=Math.abs(v.y-y.y),C=Math.abs(i.x-b.x),S=Math.abs(i.y-b.y);d=Math.max(l,C),h=Math.max(g,S)}return{contentWidth:d,contentHeight:h}}setEdgeForce(){if(this.ignoreBounds||this.isDragging||this.panMode===j||this.targetScale<this.scale)return this.isBouncingX=!1,void(this.isBouncingY=!1);const{target:e}=this,{x:t,y:o,xDiff:n,yDiff:s}=this.checkBounds(),a=this.option("maxVelocity");let r=this.velocity.e,d=this.velocity.f;n!==0?(this.isBouncingX=!0,n*r<=0?r+=.14*n:(r=.14*n,t.min!==1/0&&(this.target.e=Math.max(e.e,t.min)),t.max!==1/0&&(this.target.e=Math.min(e.e,t.max))),a&&(r=Math.max(Math.min(r,a),-1*a))):this.isBouncingX=!1,s!==0?(this.isBouncingY=!0,s*d<=0?d+=.14*s:(d=.14*s,o.min!==1/0&&(this.target.f=Math.max(e.f,o.min)),o.max!==1/0&&(this.target.f=Math.min(e.f,o.max))),a&&(d=Math.max(Math.min(d,a),-1*a))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=r),this.isBouncingY&&(this.velocity.f=d)}enable(){const{content:e}=this,t=new DOMMatrixReadOnly(window.getComputedStyle(e).transform);for(const o of Z)this.current[o]=this.target[o]=t[o];this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=L.Ready,this.emit("ready")}onClick(e){var t;e.type==="click"&&e.detail===0&&(this.dragOffset.x=0,this.dragOffset.y=0),this.isDragging&&((t=this.pointerTracker)===null||t===void 0||t.clear(),this.trackingPoints=[],this.startDecelAnim());const o=e.target;if(!o||e.defaultPrevented)return;if(o.hasAttribute("disabled"))return e.preventDefault(),void e.stopPropagation();if((()=>{const f=window.getSelection();return f&&f.type==="Range"})()&&!o.closest("button"))return;const n=o.closest("[data-panzoom-action]"),s=o.closest("[data-panzoom-change]"),a=n||s,r=a&&R(a)?a.dataset:null;if(r){const f=r.panzoomChange,y=r.panzoomAction;if((f||y)&&e.preventDefault(),f){let b={};try{b=JSON.parse(f)}catch{console&&console.warn("The given data was not valid JSON")}return void this.applyChange(b)}if(y)return void(this[y]&&this[y]())}if(Math.abs(this.dragOffset.x)>3||Math.abs(this.dragOffset.y)>3)return e.preventDefault(),void e.stopPropagation();if(o.closest("[data-fancybox]"))return;const d=this.content.getBoundingClientRect(),h=this.dragStart;if(h.time&&!this.canZoomOut()&&(Math.abs(d.x-h.x)>2||Math.abs(d.y-h.y)>2))return;this.dragStart.time=0;const u=f=>{this.option("zoom",e)&&f&&typeof f=="string"&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(f)&&typeof this[f]=="function"&&(e.preventDefault(),this[f]({event:e}))},m=this.option("click",e),p=this.option("dblClick",e);p?(this.clicks++,this.clicks==1&&(this.clickTimer=setTimeout(()=>{this.clicks===1?(this.emit("click",e),!e.defaultPrevented&&m&&u(m)):(this.emit("dblClick",e),e.defaultPrevented||u(p)),this.clicks=0,this.clickTimer=null},350))):(this.emit("click",e),!e.defaultPrevented&&m&&u(m))}addTrackingPoint(e){const t=this.trackingPoints.filter(o=>o.time>Date.now()-100);t.push(e),this.trackingPoints=t}onPointerDown(e,t,o){var n;if(this.option("touch",e)===!1)return!1;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];const s=this.content.getBoundingClientRect();if(this.dragStart={x:s.x,y:s.y,top:s.top,left:s.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===j&&this.targetScale>1)return e.preventDefault(),e.stopPropagation(),!1;const a=e.composedPath()[0];if(!o.length){if(["TEXTAREA","OPTION","INPUT","SELECT","VIDEO","IFRAME"].includes(a.nodeName)||a.closest("[contenteditable],[data-selectable],[data-draggable],[data-clickable],[data-panzoom-change],[data-panzoom-action]"))return!1;(n=window.getSelection())===null||n===void 0||n.removeAllRanges()}if(e.type==="mousedown")["A","BUTTON"].includes(a.nodeName)||e.preventDefault();else if(Math.abs(this.velocity.a)>.3)return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(t),this.emit("touchStart",e)),!0}onPointerMove(e,t,o){if(this.option("touch",e)===!1||!this.isDragging||t.length<2&&this.panOnlyZoomed&&x(this.targetScale)<=x(this.minScale)||(this.emit("touchMove",e),e.defaultPrevented))return;this.addTrackingPoint(t[0]);const{content:n}=this,s=st(o[0],o[1]),a=st(t[0],t[1]);let r=0,d=0;if(t.length>1){const g=n.getBoundingClientRect();r=s.clientX-g.left-.5*g.width,d=s.clientY-g.top-.5*g.height}const h=nt(o[0],o[1]),u=nt(t[0],t[1]);let m=h?u/h:1,p=a.clientX-s.clientX,f=a.clientY-s.clientY;this.dragOffset.x+=p,this.dragOffset.y+=f,this.dragOffset.time=Date.now()-this.dragStart.time;let y=x(this.targetScale)===x(this.minScale)&&this.option("lockAxis");if(y&&!this.lockedAxis)if(y==="xy"||y==="y"||e.type==="touchmove"){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void e.preventDefault();const g=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=g>45&&g<135?"y":"x",this.dragOffset.x=0,this.dragOffset.y=0,p=0,f=0}else this.lockedAxis=y;if(Ae(e.target,this.content)&&(y="x",this.dragOffset.y=0),y&&y!=="xy"&&this.lockedAxis!==y&&x(this.targetScale)===x(this.minScale))return;e.cancelable&&e.preventDefault(),this.container.classList.add(this.cn("isDragging"));const b=this.checkBounds(p,f);this.option("rubberband")?(this.isInfinite!=="x"&&(b.xDiff>0&&p<0||b.xDiff<0&&p>0)&&(p*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*b.xDiff))),this.isInfinite!=="y"&&(b.yDiff>0&&f<0||b.yDiff<0&&f>0)&&(f*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*b.yDiff)))):(b.xDiff&&(p=0),b.yDiff&&(f=0));const v=this.targetScale,i=this.minScale,l=this.maxScale;v<.5*i&&(m=Math.max(m,i)),v>1.5*l&&(m=Math.min(m,l)),this.lockedAxis==="y"&&x(v)===x(i)&&(p=0),this.lockedAxis==="x"&&x(v)===x(i)&&(f=0),this.applyChange({originX:r,originY:d,panX:p,panY:f,scale:m,friction:this.option("dragFriction"),ignoreBounds:!0})}onPointerUp(e,t,o){if(o.length)return this.dragOffset.x=0,this.dragOffset.y=0,void(this.trackingPoints=[]);this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(t),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),Ae(e.target,this.content)&&this.lockedAxis==="y"&&(this.trackingPoints=[]),this.emit("touchEnd",e),this.isDragging=!1,this.lockedAxis=!1,this.state!==L.Destroy&&(e.defaultPrevented||this.startDecelAnim()))}startDecelAnim(){var e;const t=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const g of Z)this.velocity[g]=0;this.target.e=this.current.e,this.target.f=this.current.f,I(this.container,"is-scaling"),I(this.container,"is-animating"),this.isTicking=!1;const{trackingPoints:o}=this,n=o[0],s=o[o.length-1];let a=0,r=0,d=0;s&&n&&(a=s.clientX-n.clientX,r=s.clientY-n.clientY,d=s.time-n.time);const h=((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1;h!==1&&(a*=h,r*=h);let u=0,m=0,p=0,f=0,y=this.option("decelFriction");const b=this.targetScale;if(d>0){p=Math.abs(a)>3?a/(d/30):0,f=Math.abs(r)>3?r/(d/30):0;const g=this.option("maxVelocity");g&&(p=Math.max(Math.min(p,g),-1*g),f=Math.max(Math.min(f,g),-1*g))}p&&(u=p/(1/(1-y)-1)),f&&(m=f/(1/(1-y)-1)),(this.option("lockAxis")==="y"||this.option("lockAxis")==="xy"&&this.lockedAxis==="y"&&x(b)===this.minScale)&&(u=p=0),(this.option("lockAxis")==="x"||this.option("lockAxis")==="xy"&&this.lockedAxis==="x"&&x(b)===this.minScale)&&(m=f=0);const v=this.dragOffset.x,i=this.dragOffset.y,l=this.option("dragMinThreshold")||0;Math.abs(v)<l&&Math.abs(i)<l&&(u=m=0,p=f=0),(this.option("zoom")&&(b<this.minScale-1e-5||b>this.maxScale+1e-5)||t&&!u&&!m)&&(y=.35),this.applyChange({panX:u,panY:m,friction:y}),this.emit("decel",p,f,v,i)}onWheel(e){var t=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(s,a){return Math.abs(a)>Math.abs(s)?a:s});const o=Math.max(-1,Math.min(1,t));if(this.emit("wheel",e,o),this.panMode===j||e.defaultPrevented)return;const n=this.option("wheel");n==="pan"?(e.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-e.deltaX,panY:2*-e.deltaY,bounce:!1})):n==="zoom"&&this.option("zoom")!==!1&&this.zoomWithWheel(e)}onMouseMove(e){this.panWithMouse(e)}onKeydown(e){e.key==="Escape"&&this.toggleFS()}onResize(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}setTransform(){this.emit("beforeTransform");const{current:e,target:t,content:o,contentRect:n}=this,s=Object.assign({},ye);for(const v of Z){const i=v=="e"||v==="f"?Ce:Qt;s[v]=x(e[v],i),Math.abs(t[v]-e[v])<(v=="e"||v==="f"?.51:.001)&&(e[v]=t[v])}let{a,b:r,c:d,d:h,e:u,f:m}=s,p=`matrix(${a}, ${r}, ${d}, ${h}, ${u}, ${m})`,f=o.parentElement instanceof HTMLPictureElement?o.parentElement:o;if(this.option("transformParent")&&(f=f.parentElement||f),f.style.transform===p)return;f.style.transform=p;const{contentWidth:y,contentHeight:b}=this.calculateContentDim();n.width=y,n.height=b,this.emit("afterTransform")}updateMetrics(e=!1){var t;if(!this||this.state===L.Destroy||this.isContentLoading)return;const o=Math.max(1,((t=window.visualViewport)===null||t===void 0?void 0:t.scale)||1),{container:n,content:s}=this,a=s instanceof HTMLImageElement,r=n.getBoundingClientRect(),d=getComputedStyle(this.container);let h=r.width*o,u=r.height*o;const m=parseFloat(d.paddingTop)+parseFloat(d.paddingBottom),p=h-(parseFloat(d.paddingLeft)+parseFloat(d.paddingRight)),f=u-m;this.containerRect={width:h,height:u,innerWidth:p,innerHeight:f};let y=this.option("width")||"auto",b=this.option("height")||"auto";y==="auto"&&(y=parseFloat(s.dataset.width||"")||(w=>{let E=0;return E=w instanceof HTMLImageElement?w.naturalWidth:w instanceof SVGElement?w.width.baseVal.value:Math.max(w.offsetWidth,w.scrollWidth),E||0})(s)),b==="auto"&&(b=parseFloat(s.dataset.height||"")||(w=>{let E=0;return E=w instanceof HTMLImageElement?w.naturalHeight:w instanceof SVGElement?w.height.baseVal.value:Math.max(w.offsetHeight,w.scrollHeight),E||0})(s));let v=s.parentElement instanceof HTMLPictureElement?s.parentElement:s;this.option("transformParent")&&(v=v.parentElement||v);const i=v.getAttribute("style")||"";v.style.setProperty("transform","none","important"),a&&(v.style.width="",v.style.height=""),v.offsetHeight;const l=s.getBoundingClientRect();let g=l.width*o,C=l.height*o,S=0,P=0;a&&(Math.abs(y-g)>1||Math.abs(b-C)>1)&&({width:g,height:C,top:S,left:P}=((w,E,T,A)=>{const N=T/A;return N>w/E?(T=w,A=w/N):(T=E*N,A=E),{width:T,height:A,top:.5*(E-A),left:.5*(w-T)}})(g,C,y,b)),this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:l.top-r.top+S,bottom:r.bottom-l.bottom+S,left:l.left-r.left+P,right:r.right-l.right+P,fitWidth:g,fitHeight:C,width:g,height:C,fullWidth:y,fullHeight:b}),v.style.cssText=i,a&&(v.style.width=`${g}px`,v.style.height=`${C}px`),this.setTransform(),e!==!0&&this.emit("refresh"),this.ignoreBounds||(x(this.targetScale)<x(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===L.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()}calculateBounds(){const{contentWidth:e,contentHeight:t}=this.calculateContentDim(this.target),{targetScale:o,lockedAxis:n}=this,{fitWidth:s,fitHeight:a}=this.contentRect;let r=0,d=0,h=0,u=0;const m=this.option("infinite");if(m===!0||n&&m===n)r=-1/0,h=1/0,d=-1/0,u=1/0;else{let{containerRect:p,contentRect:f}=this,y=x(s*o,Ce),b=x(a*o,Ce),{innerWidth:v,innerHeight:i}=p;if(p.width===y&&(v=p.width),p.width===b&&(i=p.height),e>v){h=.5*(e-v),r=-1*h;let l=.5*(f.right-f.left);r+=l,h+=l}if(s>v&&e<v&&(r-=.5*(s-v),h-=.5*(s-v)),t>i){u=.5*(t-i),d=-1*u;let l=.5*(f.bottom-f.top);d+=l,u+=l}a>i&&t<i&&(r-=.5*(a-i),h-=.5*(a-i))}return{x:{min:r,max:h},y:{min:d,max:u}}}getBounds(){const e=this.option("bounds");return e!=="auto"?e:this.calculateBounds()}updateControls(){const e=this,t=e.container,{panMode:o,contentRect:n,targetScale:s,minScale:a}=e;let r=a,d=e.option("click")||!1;d&&(r=e.getNextScale(d));let h=e.canZoomIn(),u=e.canZoomOut(),m=o===rt&&!!this.option("touch"),p=u&&m;if(m&&(x(s)<x(a)&&!this.panOnlyZoomed&&(p=!0),(x(n.width,1)>x(n.fitWidth,1)||x(n.height,1)>x(n.fitHeight,1))&&(p=!0)),x(n.width*s,1)<x(n.fitWidth,1)&&(p=!1),o===j&&(p=!1),$(t,this.cn("isDraggable"),p),!this.option("zoom"))return;let f=h&&x(r)>x(s),y=!f&&!p&&u&&x(r)<x(s);$(t,this.cn("canZoomIn"),f),$(t,this.cn("canZoomOut"),y);for(const b of t.querySelectorAll("[data-panzoom-action]")){let v=!1,i=!1;switch(b.dataset.panzoomAction){case"zoomIn":h?v=!0:i=!0;break;case"zoomOut":u?v=!0:i=!0;break;case"toggleZoom":case"iterateZoom":h||u?v=!0:i=!0;const l=b.querySelector("g");l&&(l.style.display=h?"":"none")}v?(b.removeAttribute("disabled"),b.removeAttribute("tabindex")):i&&(b.setAttribute("disabled",""),b.setAttribute("tabindex","-1"))}}panTo({x:e=this.target.e,y:t=this.target.f,scale:o=this.targetScale,friction:n=this.option("friction"),angle:s=0,originX:a=0,originY:r=0,flipX:d=!1,flipY:h=!1,ignoreBounds:u=!1}){this.state!==L.Destroy&&this.applyChange({panX:e-this.target.e,panY:t-this.target.f,scale:o/this.targetScale,angle:s,originX:a,originY:r,friction:n,flipX:d,flipY:h,ignoreBounds:u})}applyChange({panX:e=0,panY:t=0,scale:o=1,angle:n=0,originX:s=-this.current.e,originY:a=-this.current.f,friction:r=this.option("friction"),flipX:d=!1,flipY:h=!1,ignoreBounds:u=!1,bounce:m=this.option("bounce")}){const p=this.state;if(p===L.Destroy)return;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=r||0,this.ignoreBounds=u;const{current:f}=this,y=f.e,b=f.f,v=this.getMatrix(this.target);let i=new DOMMatrix().translate(y,b).translate(s,a).translate(e,t);if(this.option("zoom")){if(!u){const l=this.targetScale,g=this.minScale,C=this.maxScale;l*o<g&&(o=g/l),l*o>C&&(o=C/l)}i=i.scale(o)}i=i.translate(-s,-a).translate(-y,-b).multiply(v),n&&(i=i.rotate(n)),d&&(i=i.scale(-1,1)),h&&(i=i.scale(1,-1));for(const l of Z)l!=="e"&&l!=="f"&&(i[l]>this.minScale+1e-5||i[l]<this.minScale-1e-5)?this.target[l]=i[l]:this.target[l]=x(i[l],Ce);(this.targetScale<this.scale||Math.abs(o-1)>.1||this.panMode===j||m===!1)&&!u&&this.clampTargetBounds(),p===L.Init?this.animate():this.isResting||(this.state=L.Panning,this.requestTick())}stop(e=!1){if(this.state===L.Init||this.state===L.Destroy)return;const t=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const o of Z)this.velocity[o]=0,e==="current"?this.current[o]=this.target[o]:e==="target"&&(this.target[o]=this.current[o]);this.setTransform(),I(this.container,"is-scaling"),I(this.container,"is-animating"),this.isTicking=!1,this.state=L.Ready,t&&(this.emit("endAnimation"),this.updateControls())}requestTick(){this.isTicking||(this.emit("startAnimation"),this.updateControls(),O(this.container,"is-animating"),this.isScaling&&O(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame(()=>this.animate()))}panWithMouse(e,t=this.option("mouseMoveFriction")){if(this.pmme=e,this.panMode!==j||!e||x(this.targetScale)<=x(this.minScale))return;this.emit("mouseMove",e);const{container:o,containerRect:n,contentRect:s}=this,a=n.width,r=n.height,d=o.getBoundingClientRect(),h=(e.clientX||0)-d.left,u=(e.clientY||0)-d.top;let{contentWidth:m,contentHeight:p}=this.calculateContentDim(this.target);const f=this.option("mouseMoveFactor");f>1&&(m!==a&&(m*=f),p!==r&&(p*=f));let y=.5*(m-a)-h/a*100/100*(m-a);y+=.5*(s.right-s.left);let b=.5*(p-r)-u/r*100/100*(p-r);b+=.5*(s.bottom-s.top),this.applyChange({panX:y-this.target.e,panY:b-this.target.f,friction:t})}zoomWithWheel(e){if(this.state===L.Destroy||this.state===L.Init)return;const t=Date.now();if(t-this.pwt<45)return void e.preventDefault();this.pwt=t;var o=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(h,u){return Math.abs(u)>Math.abs(h)?u:h});const n=Math.max(-1,Math.min(1,o)),{targetScale:s,maxScale:a,minScale:r}=this;let d=s*(100+45*n)/100;x(d)<x(r)&&x(s)<=x(r)?(this.cwd+=Math.abs(n),d=r):x(d)>x(a)&&x(s)>=x(a)?(this.cwd+=Math.abs(n),d=a):(this.cwd=0,d=Math.max(Math.min(d,a),r)),this.cwd>this.option("wheelLimit")||(e.preventDefault(),x(d)!==x(s)&&this.zoomTo(d,{event:e}))}canZoomIn(){return this.option("zoom")&&(x(this.contentRect.width,1)<x(this.contentRect.fitWidth,1)||x(this.targetScale)<x(this.maxScale))}canZoomOut(){return this.option("zoom")&&x(this.targetScale)>x(this.minScale)}zoomIn(e=1.25,t){this.zoomTo(this.targetScale*e,t)}zoomOut(e=.8,t){this.zoomTo(this.targetScale*e,t)}zoomToFit(e){this.zoomTo("fit",e)}zoomToCover(e){this.zoomTo("cover",e)}zoomToFull(e){this.zoomTo("full",e)}zoomToMax(e){this.zoomTo("max",e)}toggleZoom(e){this.zoomTo(this.getNextScale("toggleZoom"),e)}toggleMax(e){this.zoomTo(this.getNextScale("toggleMax"),e)}toggleCover(e){this.zoomTo(this.getNextScale("toggleCover"),e)}iterateZoom(e){this.zoomTo("next",e)}zoomTo(e=1,{friction:t="auto",originX:o="auto",originY:n="auto",event:s}={}){if(this.isContentLoading||this.state===L.Destroy)return;const{targetScale:a,fullScale:r,maxScale:d,coverScale:h}=this;if(this.stop(),this.panMode===j&&(s=this.pmme||s),s||o==="auto"||n==="auto"){const m=this.content.getBoundingClientRect(),p=this.container.getBoundingClientRect(),f=s?s.clientX:p.left+.5*p.width,y=s?s.clientY:p.top+.5*p.height;o=f-m.left-.5*m.width,n=y-m.top-.5*m.height}let u=1;typeof e=="number"?u=e:e==="full"?u=r:e==="cover"?u=h:e==="max"?u=d:e==="fit"?u=1:e==="next"&&(u=this.getNextScale("iterateZoom")),u=u/a||1,t=t==="auto"?u>1?.15:.25:t,this.applyChange({scale:u,originX:o,originY:n,friction:t}),s&&this.panMode===j&&this.panWithMouse(s,t)}rotateCCW(){this.applyChange({angle:-90})}rotateCW(){this.applyChange({angle:90})}flipX(){this.applyChange({flipX:!0})}flipY(){this.applyChange({flipY:!0})}fitX(){this.stop("target");const{containerRect:e,contentRect:t,target:o}=this;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-o.e,panY:.5*e.height-(t.top+.5*t.fitHeight)-o.f,scale:e.width/t.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}fitY(){this.stop("target");const{containerRect:e,contentRect:t,target:o}=this;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-o.e,panY:.5*e.innerHeight-(t.top+.5*t.fitHeight)-o.f,scale:e.height/t.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}toggleFS(){const{container:e}=this,t=this.cn("inFullscreen"),o=this.cn("htmlHasFullscreen");e.classList.toggle(t);const n=e.classList.contains(t);n?(document.documentElement.classList.add(o),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(o),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(n?"enterFS":"exitFS")}getMatrix(e=this.current){const{a:t,b:o,c:n,d:s,e:a,f:r}=e;return new DOMMatrix([t,o,n,s,a,r])}reset(e){if(this.state!==L.Init&&this.state!==L.Destroy){this.stop("current");for(const t of Z)this.target[t]=ye[t];this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=e===void 0?this.option("friction"):e,this.state=L.Panning,this.requestTick())}}destroy(){this.stop(),this.state=L.Destroy,this.detachEvents(),this.detachObserver();const{container:e,content:t}=this,o=this.option("classes")||{};for(const n of Object.values(o))e.classList.remove(n+"");t&&(t.removeEventListener("load",this.onLoad),t.removeEventListener("error",this.onError)),this.detachPlugins()}}Object.defineProperty(se,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Jt}),Object.defineProperty(se,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});const ct=function(c,e){let t=!0;return(...o)=>{t&&(t=!1,c(...o),setTimeout(()=>{t=!0},e))}},dt=(c,e)=>{let t=[];return c.childNodes.forEach(o=>{o.nodeType!==Node.ELEMENT_NODE||e&&!o.matches(e)||t.push(o)}),t},ei={viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}};var k;(function(c){c[c.Init=0]="Init",c[c.Ready=1]="Ready",c[c.Destroy=2]="Destroy"})(k||(k={}));const He=c=>{if(typeof c=="string"||c instanceof HTMLElement)c={html:c};else{const e=c.thumb;e!==void 0&&(typeof e=="string"&&(c.thumbSrc=e),e instanceof HTMLImageElement&&(c.thumbEl=e,c.thumbElSrc=e.src,c.thumbSrc=e.src),delete c.thumb)}return Object.assign({html:"",el:null,isDom:!1,class:"",customClass:"",index:-1,dim:0,gap:0,pos:0,transition:!1},c)},ti=(c={})=>Object.assign({index:-1,slides:[],dim:0,pos:-1},c);class B extends Ne{constructor(e,t){super(t),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:e})}attach(){}detach(){}}const ii={classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2};class Nt extends B{constructor(){super(...arguments),Object.defineProperty(this,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){this.refresh()}build(){let e=this.list;if(!e){e=document.createElement("ul"),O(e,this.cn("list")),e.setAttribute("role","tablist");const t=this.instance.container;t.appendChild(e),O(t,this.cn("hasDots")),this.list=e}return e}refresh(){var e;const t=this.instance.pages.length,o=Math.min(2,this.option("minCount")),n=Math.max(2e3,this.option("maxCount")),s=this.option("dynamicFrom");if(t<o||t>n)return void this.cleanup();const a=typeof s=="number"&&t>5&&t>=s,r=!this.list||this.isDynamic!==a||this.list.children.length!==t;r&&this.cleanup();const d=this.build();if($(d,this.cn("isDynamic"),!!a),r)for(let m=0;m<t;m++)d.append(this.createItem(m));let h,u=0;for(const m of[...d.children]){const p=u===this.instance.page;p&&(h=m),$(m,this.cn("isCurrent"),p),(e=m.children[0])===null||e===void 0||e.setAttribute("aria-selected",p?"true":"false");for(const f of["isBeforePrev","isPrev","isNext","isAfterNext"])I(m,this.cn(f));u++}if(h=h||d.firstChild,a&&h){const m=h.previousElementSibling,p=m&&m.previousElementSibling;O(m,this.cn("isPrev")),O(p,this.cn("isBeforePrev"));const f=h.nextElementSibling,y=f&&f.nextElementSibling;O(f,this.cn("isNext")),O(y,this.cn("isAfterNext"))}this.isDynamic=a}createItem(e=0){var t;const o=document.createElement("li");o.setAttribute("role","presentation");const n=_(this.instance.localize(this.option("dotTpl"),[["%d",e+1]]).replace(/\%i/g,e+""));return o.appendChild(n),(t=o.children[0])===null||t===void 0||t.setAttribute("role","tab"),o}cleanup(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,I(this.instance.container,this.cn("hasDots"))}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(Nt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:ii});const we="disabled",xe="next",ht="prev";class kt extends B{constructor(){super(...arguments),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"next",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isDom",{enumerable:!0,configurable:!0,writable:!0,value:!1})}onRefresh(){const e=this.instance,t=e.pages.length,o=e.page;if(t<2)return void this.cleanup();this.build();let n=this.prev,s=this.next;n&&s&&(n.removeAttribute(we),s.removeAttribute(we),e.isInfinite||(o<=0&&n.setAttribute(we,""),o>=t-1&&s.setAttribute(we,"")))}addBtn(e){var t;const o=this.instance,n=document.createElement("button");n.setAttribute("tabindex","0"),n.setAttribute("title",o.localize(`{{${e.toUpperCase()}}}`)),O(n,this.cn("button")+" "+this.cn(e===xe?"isNext":"isPrev"));const s=o.isRTL?e===xe?ht:xe:e;var a;return n.innerHTML=o.localize(this.option(`${s}Tpl`)),n.dataset[`carousel${a=e,a?a.match("^[a-z]")?a.charAt(0).toUpperCase()+a.substring(1):a:""}`]="true",(t=this.container)===null||t===void 0||t.appendChild(n),n}build(){const e=this.instance.container,t=this.cn("container");let{container:o,prev:n,next:s}=this;o||(o=e.querySelector("."+t),this.isDom=!!o),o||(o=document.createElement("div"),O(o,t),e.appendChild(o)),this.container=o,s||(s=o.querySelector("[data-carousel-next]")),s||(s=this.addBtn(xe)),this.next=s,n||(n=o.querySelector("[data-carousel-prev]")),n||(n=this.addBtn(ht)),this.prev=n}cleanup(){this.isDom||(this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove()),this.prev=null,this.next=null,this.container=null,this.isDom=!1}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(kt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});class Dt extends B{constructor(){super(...arguments),Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null})}addAsTargetFor(e){this.target=this.instance,this.nav=e,this.attachEvents()}addAsNavFor(e){this.nav=this.instance,this.target=e,this.attachEvents()}attachEvents(){const{nav:e,target:t}=this;e&&t&&(e.options.initialSlide=t.options.initialPage,e.state===k.Ready?this.onNavReady(e):e.on("ready",this.onNavReady),t.state===k.Ready?this.onTargetReady(t):t.on("ready",this.onTargetReady))}onNavReady(e){e.on("createSlide",this.onNavCreateSlide),e.on("Panzoom.click",this.onNavClick),e.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}onTargetReady(e){e.on("change",this.onTargetChange),e.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}onNavClick(e,t,o){this.onNavTouch(e,e.panzoom,o)}onNavTouch(e,t,o){var n,s;if(Math.abs(t.dragOffset.x)>3||Math.abs(t.dragOffset.y)>3)return;const a=o.target,{nav:r,target:d}=this;if(!r||!d||!a)return;const h=a.closest("[data-index]");if(o.stopPropagation(),o.preventDefault(),!h)return;const u=parseInt(h.dataset.index||"",10)||0,m=d.getPageForSlide(u),p=r.getPageForSlide(u);r.slideTo(p),d.slideTo(m,{friction:((s=(n=this.nav)===null||n===void 0?void 0:n.plugins)===null||s===void 0?void 0:s.Sync.option("friction"))||0}),this.markSelectedSlide(u)}onNavCreateSlide(e,t){t.index===this.selectedIndex&&this.markSelectedSlide(t.index)}onTargetChange(){var e,t;const{target:o,nav:n}=this;if(!o||!n||n.state!==k.Ready||o.state!==k.Ready)return;const s=(t=(e=o.pages[o.page])===null||e===void 0?void 0:e.slides[0])===null||t===void 0?void 0:t.index,a=n.getPageForSlide(s);this.markSelectedSlide(s),n.slideTo(a,n.prevPage===null&&o.prevPage===null?{friction:0}:void 0)}markSelectedSlide(e){const t=this.nav;t&&t.state===k.Ready&&(this.selectedIndex=e,[...t.slides].map(o=>{o.el&&o.el.classList[o.index===e?"add":"remove"]("is-nav-selected")}))}attach(){const e=this;let t=e.options.target,o=e.options.nav;t?e.addAsNavFor(t):o&&e.addAsTargetFor(o)}detach(){const e=this,t=e.nav,o=e.target;t&&(t.off("ready",e.onNavReady),t.off("createSlide",e.onNavCreateSlide),t.off("Panzoom.click",e.onNavClick),t.off("Panzoom.touchEnd",e.onNavTouch)),e.nav=null,o&&(o.off("ready",e.onTargetReady),o.off("refresh",e.onTargetChange),o.off("change",e.onTargetChange)),e.target=null}}Object.defineProperty(Dt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});const oi={Navigation:kt,Dots:Nt,Sync:Dt},Se="animationend",ut="isSelected",Ee="slide";class ne extends tt{get axis(){return this.isHorizontal?"e":"f"}get isEnabled(){return this.state===k.Ready}get isInfinite(){let e=!1;const{contentDim:t,viewportDim:o,pages:n,slides:s}=this,a=s[0];return n.length>=2&&a&&t+a.dim>=o&&(e=this.option("infinite")),e}get isRTL(){return this.option("direction")==="rtl"}get isHorizontal(){return this.option("axis")==="x"}constructor(e,t={},o={}){if(super(),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:k.Init}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),typeof e=="string"&&(e=document.querySelector(e)),!e||!R(e))throw new Error("No Element found");this.container=e,this.slideNext=ct(this.slideNext.bind(this),150),this.slidePrev=ct(this.slidePrev.bind(this),150),this.userOptions=t,this.userPlugins=o,queueMicrotask(()=>{this.processOptions()})}processOptions(){var e,t;const o=F({},ne.defaults,this.userOptions);let n="";const s=o.breakpoints;if(s&&Je(s))for(const[a,r]of Object.entries(s))window.matchMedia(a).matches&&Je(r)&&(n+=a,F(o,r));n===this.bp&&this.state!==k.Init||(this.bp=n,this.state===k.Ready&&(o.initialSlide=((t=(e=this.pages[this.page])===null||e===void 0?void 0:e.slides[0])===null||t===void 0?void 0:t.index)||0),this.state!==k.Init&&this.destroy(),super.setOptions(o),this.option("enabled")===!1?this.attachEvents():setTimeout(()=>{this.init()},0))}init(){this.state=k.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},ne.Plugins),this.userPlugins)),this.emit("attachPlugins"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=k.Ready,this.emit("ready")}initLayout(){const{container:e}=this,t=this.option("classes");O(e,this.cn("container")),$(e,t.isLTR,!this.isRTL),$(e,t.isRTL,this.isRTL),$(e,t.isVertical,!this.isHorizontal),$(e,t.isHorizontal,this.isHorizontal);let o=this.option("viewport")||e.querySelector(`.${t.viewport}`);o||(o=document.createElement("div"),O(o,t.viewport),o.append(...dt(e,`.${t.slide}`)),e.prepend(o)),o.addEventListener("scroll",this.onScroll);let n=this.option("track")||e.querySelector(`.${t.track}`);n||(n=document.createElement("div"),O(n,t.track),n.append(...Array.from(o.childNodes))),n.setAttribute("aria-live","polite"),o.contains(n)||o.prepend(n),this.viewport=o,this.track=n,this.emit("initLayout")}initSlides(){const{track:e}=this;if(!e)return;const t=[...this.slides],o=[];[...dt(e,`.${this.cn(Ee)}`)].forEach(n=>{if(R(n)){const s=He({el:n,isDom:!0,index:this.slides.length});o.push(s)}});for(let n of[...this.option("slides",[])||[],...t])o.push(He(n));this.slides=o;for(let n=0;n<this.slides.length;n++)this.slides[n].index=n;for(const n of o)this.emit("beforeInitSlide",n,n.index),this.emit("initSlide",n,n.index);this.emit("initSlides")}setInitialPage(){const e=this.option("initialSlide");this.page=typeof e=="number"?this.getPageForSlide(e):parseInt(this.option("initialPage",0)+"",10)||0}setInitialPosition(){const{track:e,pages:t,isHorizontal:o}=this;if(!e||!t.length)return;let n=this.page;t[n]||(this.page=n=0);const s=(t[n].pos||0)*(this.isRTL&&o?1:-1),a=o?`${s}px`:"0",r=o?"0":`${s}px`;e.style.transform=`translate3d(${a}, ${r}, 0) scale(1)`,this.option("adaptiveHeight")&&this.setViewportHeight()}initPanzoom(){this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);const e=this.option("Panzoom")||{};this.panzoom=new se(this.viewport,F({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:t=>!(this.pages.length<2&&!t.options.infinite),bounds:()=>this.getBounds(),maxVelocity:t=>Math.abs(t.target[this.axis]-t.current[this.axis])<2*this.viewportDim?100:0},e)),this.panzoom.on("*",(t,o,...n)=>{this.emit(`Panzoom.${o}`,t,...n)}),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}attachEvents(){const e=this.container;e&&(e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}createPages(){let e=[];const{contentDim:t,viewportDim:o}=this;let n=this.option("slidesPerPage");n=(n==="auto"||t<=o)&&this.option("fill")!==!1?1/0:parseFloat(n+"");let s=0,a=0,r=0;for(const d of this.slides)(!e.length||a+d.dim-o>.05||r>=n)&&(e.push(ti()),s=e.length-1,a=0,r=0),e[s].slides.push(d),a+=d.dim+d.gap,r++;return e}processPages(){const e=this.pages,{contentDim:t,viewportDim:o,isInfinite:n}=this,s=this.option("center"),a=this.option("fill"),r=a&&s&&t>o&&!n;if(e.forEach((u,m)=>{var p;u.index=m,u.pos=((p=u.slides[0])===null||p===void 0?void 0:p.pos)||0,u.dim=0;for(const[f,y]of u.slides.entries())u.dim+=y.dim,f<u.slides.length-1&&(u.dim+=y.gap);r&&u.pos+.5*u.dim<.5*o?u.pos=0:r&&u.pos+.5*u.dim>=t-.5*o?u.pos=t-o:s&&(u.pos+=-.5*(o-u.dim))}),e.forEach(u=>{a&&!n&&t>o&&(u.pos=Math.max(u.pos,0),u.pos=Math.min(u.pos,t-o)),u.pos=x(u.pos,1e3),u.dim=x(u.dim,1e3),Math.abs(u.pos)<=.1&&(u.pos=0)}),n)return e;const d=[];let h;return e.forEach(u=>{const m=Object.assign({},u);h&&m.pos===h.pos?(h.dim+=m.dim,h.slides=[...h.slides,...m.slides]):(m.index=d.length,h=m,d.push(m))}),d}getPageFromIndex(e=0){const t=this.pages.length;let o;return e=parseInt((e||0).toString())||0,o=this.isInfinite?(e%t+t)%t:Math.max(Math.min(e,t-1),0),o}getSlideMetrics(e){var t,o;const n=this.isHorizontal?"width":"height";let s=0,a=0,r=e.el;const d=!(!r||r.parentNode);if(r?s=parseFloat(r.dataset[n]||"")||0:(r=document.createElement("div"),r.style.visibility="hidden",(this.track||document.body).prepend(r)),O(r,this.cn(Ee)+" "+e.class+" "+e.customClass),s)r.style[n]=`${s}px`,r.style[n==="width"?"height":"width"]="";else{d&&(this.track||document.body).prepend(r),s=r.getBoundingClientRect()[n]*Math.max(1,((t=window.visualViewport)===null||t===void 0?void 0:t.scale)||1);let u=r[this.isHorizontal?"offsetWidth":"offsetHeight"];u-1>s&&(s=u)}const h=getComputedStyle(r);return h.boxSizing==="content-box"&&(this.isHorizontal?(s+=parseFloat(h.paddingLeft)||0,s+=parseFloat(h.paddingRight)||0):(s+=parseFloat(h.paddingTop)||0,s+=parseFloat(h.paddingBottom)||0)),a=parseFloat(h[this.isHorizontal?"marginRight":"marginBottom"])||0,d?(o=r.parentElement)===null||o===void 0||o.removeChild(r):e.el||r.remove(),{dim:x(s,1e3),gap:x(a,1e3)}}getBounds(){const{isInfinite:e,isRTL:t,isHorizontal:o,pages:n}=this;let s={min:0,max:0};if(e)s={min:-1/0,max:1/0};else if(n.length){const a=n[0].pos,r=n[n.length-1].pos;s=t&&o?{min:a,max:r}:{min:-1*r,max:-1*a}}return{x:o?s:{min:0,max:0},y:o?{min:0,max:0}:s}}repositionSlides(){let e,{isHorizontal:t,isRTL:o,isInfinite:n,viewport:s,viewportDim:a,contentDim:r,page:d,pages:h,slides:u,panzoom:m}=this,p=0,f=0,y=0,b=0;m?b=-1*m.current[this.axis]:h[d]&&(b=h[d].pos||0),e=t?o?"right":"left":"top",o&&t&&(b*=-1);for(const g of u){const C=g.el;C?(e==="top"?(C.style.right="",C.style.left=""):C.style.top="",g.index!==p?C.style[e]=f===0?"":`${x(f,1e3)}px`:C.style[e]="",y+=g.dim+g.gap,p++):f+=g.dim+g.gap}if(n&&y&&s){let g=getComputedStyle(s),C="padding",S=t?"Right":"Bottom",P=parseFloat(g[C+(t?"Left":"Top")]);b-=P,a+=P,a+=parseFloat(g[C+S]);for(const w of u)w.el&&(x(w.pos)<x(a)&&x(w.pos+w.dim+w.gap)<x(b)&&x(b)>x(r-a)&&(w.el.style[e]=`${x(f+y,1e3)}px`),x(w.pos+w.gap)>=x(r-a)&&x(w.pos)>x(b+a)&&x(b)<x(a)&&(w.el.style[e]=`-${x(y,1e3)}px`))}let v,i,l=[...this.inTransition];if(l.length>1&&(v=h[l[0]],i=h[l[1]]),v&&i){let g=0;for(const C of u)C.el?this.inTransition.has(C.index)&&v.slides.indexOf(C)<0&&(C.el.style[e]=`${x(g+(v.pos-i.pos),1e3)}px`):g+=C.dim+C.gap}}createSlideEl(e){const{track:t,slides:o}=this;if(!t||!e||e.el&&e.el.parentNode)return;const n=e.el||document.createElement("div");O(n,this.cn(Ee)),O(n,e.class),O(n,e.customClass);const s=e.html;s&&(s instanceof HTMLElement?n.appendChild(s):n.innerHTML=e.html+"");const a=[];o.forEach((u,m)=>{u.el&&a.push(m)});const r=e.index;let d=null;a.length&&(d=o[a.reduce((u,m)=>Math.abs(m-r)<Math.abs(u-r)?m:u)]);const h=d&&d.el&&d.el.parentNode?d.index<e.index?d.el.nextSibling:d.el:null;t.insertBefore(n,t.contains(h)?h:null),e.el=n,this.emit("createSlide",e)}removeSlideEl(e,t=!1){const o=e==null?void 0:e.el;if(!o||!o.parentNode)return;const n=this.cn(ut);if(o.classList.contains(n)&&(I(o,n),this.emit("unselectSlide",e)),e.isDom&&!t)return o.removeAttribute("aria-hidden"),o.removeAttribute("data-index"),void(o.style.left="");this.emit("removeSlide",e);const s=new CustomEvent(Se);o.dispatchEvent(s),e.el&&(e.el.remove(),e.el=null)}transitionTo(e=0,t=this.option("transition")){var o,n,s,a;if(!t)return!1;const r=this.page,{pages:d,panzoom:h}=this;e=parseInt((e||0).toString())||0;const u=this.getPageFromIndex(e);if(!h||!d[u]||d.length<2||Math.abs((((n=(o=d[r])===null||o===void 0?void 0:o.slides[0])===null||n===void 0?void 0:n.dim)||0)-this.viewportDim)>1)return!1;const m=e>r?1:-1,p=d[u].pos*(this.isRTL?1:-1);if(r===u&&Math.abs(p-h.target[this.axis])<1)return!1;this.clearTransitions();const f=h.isResting;O(this.container,this.cn("inTransition"));const y=((s=d[r])===null||s===void 0?void 0:s.slides[0])||null,b=((a=d[u])===null||a===void 0?void 0:a.slides[0])||null;this.inTransition.add(b.index),this.createSlideEl(b);let v=y.el,i=b.el;f||t===Ee||(t="fadeFast",v=null);const l=this.isRTL?"next":"prev",g=this.isRTL?"prev":"next";return v&&(this.inTransition.add(y.index),y.transition=t,v.addEventListener(Se,this.onAnimationEnd),v.classList.add(`f-${t}Out`,`to-${m>0?g:l}`)),i&&(b.transition=t,i.addEventListener(Se,this.onAnimationEnd),i.classList.add(`f-${t}In`,`from-${m>0?l:g}`)),h.current[this.axis]=p,h.target[this.axis]=p,h.requestTick(),this.onChange(u),!0}manageSlideVisiblity(){const e=new Set,t=new Set,o=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0);for(const n of this.slides)o.has(n)?e.add(n):t.add(n);for(const n of this.inTransition)e.add(this.slides[n]);for(const n of e)this.createSlideEl(n),this.lazyLoadSlide(n);for(const n of t)e.has(n)||this.removeSlideEl(n);this.markSelectedSlides(),this.repositionSlides()}markSelectedSlides(){if(!this.pages[this.page]||!this.pages[this.page].slides)return;const e="aria-hidden";let t=this.cn(ut);if(t)for(const o of this.slides){const n=o.el;n&&(n.dataset.index=`${o.index}`,n.classList.contains("f-thumbs__slide")?this.getVisibleSlides(0).has(o)?n.removeAttribute(e):n.setAttribute(e,"true"):this.pages[this.page].slides.includes(o)?(n.classList.contains(t)||(O(n,t),this.emit("selectSlide",o)),n.removeAttribute(e)):(n.classList.contains(t)&&(I(n,t),this.emit("unselectSlide",o)),n.setAttribute(e,"true")))}}flipInfiniteTrack(){const{axis:e,isHorizontal:t,isInfinite:o,isRTL:n,viewportDim:s,contentDim:a}=this,r=this.panzoom;if(!r||!o)return;let d=r.current[e],h=r.target[e]-d,u=0,m=.5*s;n&&t?(d<-m&&(u=-1,d+=a),d>a-m&&(u=1,d-=a)):(d>m&&(u=1,d-=a),d<-a+m&&(u=-1,d+=a)),u&&(r.current[e]=d,r.target[e]=d+h)}lazyLoadImg(e,t){const o=this,n="f-fadeIn",s="is-preloading";let a=!1,r=null;const d=()=>{a||(a=!0,r&&(r.remove(),r=null),I(t,s),t.complete&&(O(t,n),setTimeout(()=>{I(t,n)},350)),this.option("adaptiveHeight")&&e.el&&this.pages[this.page].slides.indexOf(e)>-1&&(o.updateMetrics(),o.setViewportHeight()),this.emit("load",e))};O(t,s),t.src=t.dataset.lazySrcset||t.dataset.lazySrc||"",delete t.dataset.lazySrc,delete t.dataset.lazySrcset,t.addEventListener("error",()=>{d()}),t.addEventListener("load",()=>{d()}),setTimeout(()=>{const h=t.parentNode;h&&e.el&&(t.complete?d():a||(r=_(it),h.insertBefore(r,t)))},300)}lazyLoadSlide(e){const t=e&&e.el;if(!t)return;const o=new Set;let n=Array.from(t.querySelectorAll("[data-lazy-src],[data-lazy-srcset]"));t.dataset.lazySrc&&n.push(t),n.map(s=>{s instanceof HTMLImageElement?o.add(s):s instanceof HTMLElement&&s.dataset.lazySrc&&(s.style.backgroundImage=`url('${s.dataset.lazySrc}')`,delete s.dataset.lazySrc)});for(const s of o)this.lazyLoadImg(e,s)}onAnimationEnd(e){var t;const o=e.target,n=o?parseInt(o.dataset.index||"",10)||0:-1,s=this.slides[n],a=e.animationName;if(!o||!s||!a)return;const r=!!this.inTransition.has(n)&&s.transition;r&&a.substring(0,r.length+2)===`f-${r}`&&this.inTransition.delete(n),this.inTransition.size||this.clearTransitions(),n===this.page&&(!((t=this.panzoom)===null||t===void 0)&&t.isResting)&&this.emit("settle")}onDecel(e,t=0,o=0,n=0,s=0){if(this.option("dragFree"))return void this.setPageFromPosition();const{isRTL:a,isHorizontal:r,axis:d,pages:h}=this,u=h.length,m=Math.abs(Math.atan2(o,t)/(Math.PI/180));let p=0;if(p=m>45&&m<135?r?0:o:r?t:0,!u)return;let f=this.page,y=a&&r?1:-1;const b=e.current[d]*y;let{pageIndex:v}=this.getPageFromPosition(b);Math.abs(p)>5?(h[f].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(f=v),f=a&&r?p<0?f-1:f+1:p<0?f+1:f-1):f=n===0&&s===0?f:v,this.slideTo(f,{transition:!1,friction:e.option("decelFriction")})}onClick(e){const t=e.target,o=t&&R(t)?t.dataset:null;let n,s;o&&(o.carouselPage!==void 0?(s="slideTo",n=o.carouselPage):o.carouselNext!==void 0?s="slideNext":o.carouselPrev!==void 0&&(s="slidePrev")),s?(e.preventDefault(),e.stopPropagation(),t&&!t.hasAttribute("disabled")&&this[s](n)):this.emit("click",e)}onSlideTo(e){const t=e.detail||0;this.slideTo(this.getPageForSlide(t),{friction:0})}onChange(e,t=0){const o=this.page;this.prevPage=o,this.page=e,this.option("adaptiveHeight")&&this.setViewportHeight(),e!==o&&(this.markSelectedSlides(),this.emit("change",e,o,t))}onRefresh(){let e=this.contentDim,t=this.viewportDim;this.updateMetrics(),this.contentDim===e&&this.viewportDim===t||this.slideTo(this.page,{friction:0,transition:!1})}onScroll(){var e;(e=this.viewport)===null||e===void 0||e.scroll(0,0)}onResize(){this.option("breakpoints")&&this.processOptions()}onBeforeTransform(e){this.lp!==e.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=e.current.e}onEndAnimation(){this.inTransition.size||this.emit("settle")}reInit(e=null,t=null){this.destroy(),this.state=k.Init,this.prevPage=null,this.userOptions=e||this.userOptions,this.userPlugins=t||this.userPlugins,this.processOptions()}slideTo(e=0,{friction:t=this.option("friction"),transition:o=this.option("transition")}={}){if(this.state===k.Destroy)return;e=parseInt((e||0).toString())||0;const n=this.getPageFromIndex(e),{axis:s,isHorizontal:a,isRTL:r,pages:d,panzoom:h}=this,u=d.length,m=r&&a?1:-1;if(!h||!u)return;if(this.page!==n){const f=new Event("beforeChange",{bubbles:!0,cancelable:!0});if(this.emit("beforeChange",f,e),f.defaultPrevented)return}if(this.transitionTo(e,o))return;let p=d[n].pos;if(this.isInfinite){const f=this.contentDim,y=h.target[s]*m;u===2?p+=f*Math.floor(parseFloat(e+"")/2):p=[p,p-f,p+f].reduce(function(b,v){return Math.abs(v-y)<Math.abs(b-y)?v:b})}p*=m,Math.abs(h.target[s]-p)<1||(h.panTo({x:a?p:0,y:a?0:p,friction:t}),this.onChange(n))}slideToClosest(e){if(this.panzoom){const{pageIndex:t}=this.getPageFromPosition();this.slideTo(t,e)}}slideNext(){this.slideTo(this.page+1)}slidePrev(){this.slideTo(this.page-1)}clearTransitions(){this.inTransition.clear(),I(this.container,this.cn("inTransition"));const e=["to-prev","to-next","from-prev","from-next"];for(const t of this.slides){const o=t.el;if(o){o.removeEventListener(Se,this.onAnimationEnd),o.classList.remove(...e);const n=t.transition;n&&o.classList.remove(`f-${n}Out`,`f-${n}In`)}}this.manageSlideVisiblity()}addSlide(e,t){var o,n,s,a;const r=this.panzoom,d=((o=this.pages[this.page])===null||o===void 0?void 0:o.pos)||0,h=((n=this.pages[this.page])===null||n===void 0?void 0:n.dim)||0,u=this.contentDim<this.viewportDim;let m=Array.isArray(t)?t:[t];const p=[];for(const f of m)p.push(He(f));this.slides.splice(e,0,...p);for(let f=0;f<this.slides.length;f++)this.slides[f].index=f;for(const f of p)this.emit("beforeInitSlide",f,f.index);if(this.page>=e&&(this.page+=p.length),this.updateMetrics(),r){const f=((s=this.pages[this.page])===null||s===void 0?void 0:s.pos)||0,y=((a=this.pages[this.page])===null||a===void 0?void 0:a.dim)||0,b=this.pages.length||1,v=this.isRTL?h-y:y-h,i=this.isRTL?d-f:f-d;u&&b===1?(e<=this.page&&(r.current[this.axis]-=v,r.target[this.axis]-=v),r.panTo({[this.isHorizontal?"x":"y"]:-1*f})):i&&e<=this.page&&(r.target[this.axis]-=i,r.current[this.axis]-=i,r.requestTick())}for(const f of p)this.emit("initSlide",f,f.index)}prependSlide(e){this.addSlide(0,e)}appendSlide(e){this.addSlide(this.slides.length,e)}removeSlide(e){const t=this.slides.length;e=(e%t+t)%t;const o=this.slides[e];if(o){this.removeSlideEl(o,!0),this.slides.splice(e,1);for(let n=0;n<this.slides.length;n++)this.slides[n].index=n;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1}),this.emit("destroySlide",o)}}updateMetrics(){const{panzoom:e,viewport:t,track:o,slides:n,isHorizontal:s,isInfinite:a}=this;if(!o)return;const r=s?"width":"height",d=s?"offsetWidth":"offsetHeight";if(t){let m=Math.max(t[d],x(t.getBoundingClientRect()[r],1e3)),p=getComputedStyle(t),f="padding",y=s?"Right":"Bottom";m-=parseFloat(p[f+(s?"Left":"Top")])+parseFloat(p[f+y]),this.viewportDim=m}let h,u=0;for(const[m,p]of n.entries()){let f=0,y=0;!p.el&&h?(f=h.dim,y=h.gap):({dim:f,gap:y}=this.getSlideMetrics(p),h=p),f=x(f,1e3),y=x(y,1e3),p.dim=f,p.gap=y,p.pos=u,u+=f,(a||m<n.length-1)&&(u+=y)}u=x(u,1e3),this.contentDim=u,e&&(e.contentRect[r]=u,e.contentRect[s?"fullWidth":"fullHeight"]=u),this.pages=this.createPages(),this.pages=this.processPages(),this.state===k.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),this.manageSlideVisiblity(),this.emit("refresh")}getProgress(e,t=!1,o=!1){e===void 0&&(e=this.page);const n=this,s=n.panzoom,a=n.contentDim,r=n.pages[e]||0;if(!r||!s)return e>this.page?-1:1;let d=-1*s.current.e,h=x((d-r.pos)/(1*r.dim),1e3),u=h,m=h;this.isInfinite&&o!==!0&&(u=x((d-r.pos+a)/(1*r.dim),1e3),m=x((d-r.pos-a)/(1*r.dim),1e3));let p=[h,u,m].reduce(function(f,y){return Math.abs(y)<Math.abs(f)?y:f});return t?p:p>1?1:p<-1?-1:p}setViewportHeight(){const{page:e,pages:t,viewport:o,isHorizontal:n}=this;if(!o||!t[e])return;let s=0;n&&this.track&&(this.track.style.height="auto",t[e].slides.forEach(a=>{a.el&&(s=Math.max(s,a.el.offsetHeight))})),o.style.height=s?`${s}px`:""}getPageForSlide(e){for(const t of this.pages)for(const o of t.slides)if(o.index===e)return t.index;return-1}getVisibleSlides(e=0){var t;const o=new Set;let{panzoom:n,contentDim:s,viewportDim:a,pages:r,page:d}=this;if(a){s=s+((t=this.slides[this.slides.length-1])===null||t===void 0?void 0:t.gap)||0;let h=0;h=n&&n.state!==L.Init&&n.state!==L.Destroy?-1*n.current[this.axis]:r[d]&&r[d].pos||0,this.isInfinite&&(h-=Math.floor(h/s)*s),this.isRTL&&this.isHorizontal&&(h*=-1);const u=h-a*e,m=h+a*(e+1),p=this.isInfinite?[-1,0,1]:[0];for(const f of this.slides)for(const y of p){const b=f.pos+y*s,v=b+f.dim+f.gap;b<m&&v>u&&o.add(f)}}return o}getPageFromPosition(e){const{viewportDim:t,contentDim:o,slides:n,pages:s,panzoom:a}=this,r=s.length,d=n.length,h=n[0],u=n[d-1],m=this.option("center");let p=0,f=0,y=0,b=e===void 0?-1*((a==null?void 0:a.target[this.axis])||0):e;m&&(b+=.5*t),this.isInfinite?(b<h.pos-.5*u.gap&&(b-=o,y=-1),b>u.pos+u.dim+.5*u.gap&&(b-=o,y=1)):b=Math.max(h.pos||0,Math.min(b,u.pos));let v=u,i=n.find(l=>{const g=l.pos-.5*v.gap,C=l.pos+l.dim+.5*l.gap;return v=l,b>=g&&b<C});return i||(i=u),f=this.getPageForSlide(i.index),p=f+y*r,{page:p,pageIndex:f}}setPageFromPosition(){const{pageIndex:e}=this.getPageFromPosition();this.onChange(e)}destroy(){if([k.Destroy].includes(this.state))return;this.state=k.Destroy;const{container:e,viewport:t,track:o,slides:n,panzoom:s}=this,a=this.option("classes");e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),s&&(s.destroy(),this.panzoom=null),n&&n.forEach(d=>{this.removeSlideEl(d)}),this.detachPlugins(),t&&(t.removeEventListener("scroll",this.onScroll),t.offsetParent&&o&&o.offsetParent&&t.replaceWith(...o.childNodes));for(const[d,h]of Object.entries(a))d!=="container"&&h&&e.classList.remove(h);this.track=null,this.viewport=null,this.page=0,this.slides=[];const r=this.events.get("ready");this.events=new Map,r&&this.events.set("ready",r)}}Object.defineProperty(ne,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:se}),Object.defineProperty(ne,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:ei}),Object.defineProperty(ne,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:oi});const zt=function(c){if(!R(c))return 0;const e=window.scrollY,t=window.innerHeight,o=e+t,n=c.getBoundingClientRect(),s=n.y+e,a=n.height,r=s+a;if(e>r||o<s)return 0;if(e<s&&o>r||s<e&&r>o)return 100;let d=a;s<e&&(d-=e-s),r>o&&(d-=r-o);const h=d/t*100;return Math.round(h)},be=!(typeof window>"u"||!window.document||!window.document.createElement);let je;const Xe=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden]):not(.fancybox-focus-guard)","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'].join(","),ft=c=>{if(c&&be){je===void 0&&document.createElement("div").focus({get preventScroll(){return je=!0,!1}});try{if(je)c.focus({preventScroll:!0});else{const e=window.scrollY||document.body.scrollTop,t=window.scrollX||document.body.scrollLeft;c.focus(),document.body.scrollTo({top:e,left:t,behavior:"auto"})}}catch{}}},Rt=()=>{const c=document;let e,t="",o="",n="";return c.fullscreenEnabled?(t="requestFullscreen",o="exitFullscreen",n="fullscreenElement"):c.webkitFullscreenEnabled&&(t="webkitRequestFullscreen",o="webkitExitFullscreen",n="webkitFullscreenElement"),t&&(e={request:function(s=c.documentElement){return t==="webkitRequestFullscreen"?s[t](Element.ALLOW_KEYBOARD_INPUT):s[t]()},exit:function(){return c[n]&&c[o]()},isFullscreen:function(){return c[n]}}),e},Qe={dragToClose:!0,hideScrollbar:!0,Carousel:{classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"}},contentClick:"toggleZoom",contentDblClick:!1,backdropClick:"close",animated:!0,idle:3500,showClass:"f-zoomInUp",hideClass:"f-fadeOut",commonCaption:!1,parentEl:null,startIndex:0,l10n:Object.assign(Object.assign({},At),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}),tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:`<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">
    <div class="fancybox__backdrop"></div>
    <div class="fancybox__carousel"></div>
    <div class="fancybox__footer"></div>
  </div>`},groupAll:!1,groupAttr:"data-fancybox",defaultType:"image",defaultDisplay:"block",autoFocus:!0,trapFocus:!0,placeFocusBack:!0,closeButton:"auto",keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},Fullscreen:{autoStart:!1},compact:()=>window.matchMedia("(max-width: 578px), (max-height: 578px)").matches,wheel:"zoom"};var D,z;(function(c){c[c.Init=0]="Init",c[c.Ready=1]="Ready",c[c.Closing=2]="Closing",c[c.CustomClosing=3]="CustomClosing",c[c.Destroy=4]="Destroy"})(D||(D={})),function(c){c[c.Loading=0]="Loading",c[c.Opening=1]="Opening",c[c.Ready=2]="Ready",c[c.Closing=3]="Closing"}(z||(z={}));let pt="",ve=!1,Oe=!1,ie=null;const Ft=()=>{let c="",e="";const t=M.getInstance();if(t){const o=t.carousel,n=t.getSlide();if(o&&n){let s=n.slug||void 0,a=n.triggerEl||void 0;e=s||t.option("slug")||"",!e&&a&&a.dataset&&(e=a.dataset.fancybox||""),e&&e!=="true"&&(c="#"+e+(!s&&o.slides.length>1?"-"+(n.index+1):""))}}return{hash:c,slug:e,index:1}},ke=()=>{const c=new URL(document.URL).hash,e=c.slice(1).split("-"),t=e[e.length-1],o=t&&/^\+?\d+$/.test(t)&&parseInt(e.pop()||"1",10)||1;return{hash:c,slug:e.join("-"),index:o}},Ht=()=>{const{slug:c,index:e}=ke();if(!c)return;let t=document.querySelector(`[data-slug="${c}"]`);if(t&&t.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),M.getInstance())return;const o=document.querySelectorAll(`[data-fancybox="${c}"]`);o.length&&(t=o[e-1],t&&t.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))},jt=()=>{if(M.defaults.Hash===!1)return;const c=M.getInstance();if((c==null?void 0:c.options.Hash)===!1)return;const{slug:e,index:t}=ke(),{slug:o}=Ft();c&&(e===o?c.jumpTo(t-1):(ve=!0,c.close())),Ht()},Xt=()=>{ie&&clearTimeout(ie),queueMicrotask(()=>{jt()})},mt=()=>{window.addEventListener("hashchange",Xt,!1),setTimeout(()=>{jt()},500)};be&&(/complete|interactive|loaded/.test(document.readyState)?mt():document.addEventListener("DOMContentLoaded",mt));const Pe="is-zooming-in";class Yt extends B{onCreateSlide(e,t,o){const n=this.instance.optionFor(o,"src")||"";o.el&&o.type==="image"&&typeof n=="string"&&this.setImage(o,n)}onRemoveSlide(e,t,o){o.panzoom&&o.panzoom.destroy(),o.panzoom=void 0,o.imageEl=void 0}onChange(e,t,o,n){I(this.instance.container,Pe);for(const s of t.slides){const a=s.panzoom;a&&s.index!==o&&a.reset(.35)}}onClose(){var e;const t=this.instance,o=t.container,n=t.getSlide();if(!o||!o.parentElement||!n)return;const{el:s,contentEl:a,panzoom:r,thumbElSrc:d}=n;if(!s||!d||!a||!r||r.isContentLoading||r.state===L.Init||r.state===L.Destroy)return;r.updateMetrics();let h=this.getZoomInfo(n);if(!h)return;this.instance.state=D.CustomClosing,o.classList.remove(Pe),o.classList.add("is-zooming-out"),a.style.backgroundImage=`url('${d}')`;const u=o.getBoundingClientRect();(((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1)===1&&Object.assign(o.style,{position:"absolute",top:`${o.offsetTop+window.scrollY}px`,left:`${o.offsetLeft+window.scrollX}px`,bottom:"auto",right:"auto",width:`${u.width}px`,height:`${u.height}px`,overflow:"hidden"});const{x:m,y:p,scale:f,opacity:y}=h;if(y){const b=((v,i,l,g)=>{const C=i-v,S=g-l;return P=>l+((P-v)/C*S||0)})(r.scale,f,1,0);r.on("afterTransform",()=>{a.style.opacity=b(r.scale)+""})}r.on("endAnimation",()=>{t.destroy()}),r.target.a=f,r.target.b=0,r.target.c=0,r.target.d=f,r.panTo({x:m,y:p,scale:f,friction:y?.2:.33,ignoreBounds:!0}),r.isResting&&t.destroy()}setImage(e,t){const o=this.instance;e.src=t,this.process(e,t).then(n=>{const{contentEl:s,imageEl:a,thumbElSrc:r,el:d}=e;if(o.isClosing()||!s||!a)return;s.offsetHeight;const h=!!o.isOpeningSlide(e)&&this.getZoomInfo(e);if(this.option("protected")&&d){d.addEventListener("contextmenu",p=>{p.preventDefault()});const m=document.createElement("div");O(m,"fancybox-protected"),s.appendChild(m)}if(r&&h){const m=n.contentRect,p=Math.max(m.fullWidth,m.fullHeight);let f=null;!h.opacity&&p>1200&&(f=document.createElement("img"),O(f,"fancybox-ghost"),f.src=r,s.appendChild(f));const y=()=>{f&&(O(f,"f-fadeFastOut"),setTimeout(()=>{f&&(f.remove(),f=null)},200))};(u=r,new Promise((b,v)=>{const i=new Image;i.onload=b,i.onerror=v,i.src=u})).then(()=>{o.hideLoading(e),e.state=z.Opening,this.instance.emit("reveal",e),this.zoomIn(e).then(()=>{y(),this.instance.done(e)},()=>{}),f&&setTimeout(()=>{y()},p>2500?800:200)},()=>{o.hideLoading(e),o.revealContent(e)})}else{const m=this.optionFor(e,"initialSize"),p=this.optionFor(e,"zoom"),f={event:o.prevMouseMoveEvent||o.options.event,friction:p?.12:0};let y=o.optionFor(e,"showClass")||void 0,b=!0;o.isOpeningSlide(e)&&(m==="full"?n.zoomToFull(f):m==="cover"?n.zoomToCover(f):m==="max"?n.zoomToMax(f):b=!1,n.stop("current")),b&&y&&(y=n.isDragging?"f-fadeIn":""),o.hideLoading(e),o.revealContent(e,y)}var u},()=>{o.setError(e,"{{IMAGE_ERROR}}")})}process(e,t){return new Promise((o,n)=>{var s;const a=this.instance,r=e.el;a.clearContent(e),a.showLoading(e);let d=this.optionFor(e,"content");if(typeof d=="string"&&(d=_(d)),!d||!R(d)){if(d=document.createElement("img"),d instanceof HTMLImageElement){let h="",u=e.caption;h=typeof u=="string"&&u?u.replace(/<[^>]+>/gi,"").substring(0,1e3):`Image ${e.index+1} of ${((s=a.carousel)===null||s===void 0?void 0:s.pages.length)||1}`,d.src=t||"",d.alt=h,d.draggable=!1,e.srcset&&d.setAttribute("srcset",e.srcset),this.instance.isOpeningSlide(e)&&(d.fetchPriority="high")}e.sizes&&d.setAttribute("sizes",e.sizes)}O(d,"fancybox-image"),e.imageEl=d,a.setContent(e,d,!1),e.panzoom=new se(r,F({transformParent:!0},this.option("Panzoom")||{},{content:d,width:a.optionFor(e,"width","auto"),height:a.optionFor(e,"height","auto"),wheel:()=>{const h=a.option("wheel");return(h==="zoom"||h=="pan")&&h},click:(h,u)=>{var m,p;if(a.isCompact||a.isClosing()||e.index!==((m=a.getSlide())===null||m===void 0?void 0:m.index))return!1;if(u){const y=u.composedPath()[0];if(["A","BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].includes(y.nodeName))return!1}let f=!u||u.target&&((p=e.contentEl)===null||p===void 0?void 0:p.contains(u.target));return a.option(f?"contentClick":"backdropClick")||!1},dblClick:()=>a.isCompact?"toggleZoom":a.option("contentDblClick")||!1,spinner:!1,panOnlyZoomed:!0,wheelLimit:1/0,on:{ready:h=>{o(h)},error:()=>{n()},destroy:()=>{n()}}}))})}zoomIn(e){return new Promise((t,o)=>{const n=this.instance,s=n.container,{panzoom:a,contentEl:r,el:d}=e;a&&a.updateMetrics();const h=this.getZoomInfo(e);if(!(h&&d&&r&&a&&s))return void o();const{x:u,y:m,scale:p,opacity:f}=h,y=()=>{e.state!==z.Closing&&(f&&(r.style.opacity=Math.max(Math.min(1,1-(1-a.scale)/(1-p)),0)+""),a.scale>=1&&a.scale>a.targetScale-.1&&t(a))},b=l=>{(l.scale<.99||l.scale>1.01)&&!l.isDragging||(I(s,Pe),r.style.opacity="",l.off("endAnimation",b),l.off("touchStart",b),l.off("afterTransform",y),t(l))};a.on("endAnimation",b),a.on("touchStart",b),a.on("afterTransform",y),a.on(["error","destroy"],()=>{o()}),a.panTo({x:u,y:m,scale:p,friction:0,ignoreBounds:!0}),a.stop("current");const v={event:a.panMode==="mousemove"?n.prevMouseMoveEvent||n.options.event:void 0},i=this.optionFor(e,"initialSize");O(s,Pe),n.hideLoading(e),i==="full"?a.zoomToFull(v):i==="cover"?a.zoomToCover(v):i==="max"?a.zoomToMax(v):a.reset(.172)})}getZoomInfo(e){const{el:t,imageEl:o,thumbEl:n,panzoom:s}=e,a=this.instance,r=a.container;if(!t||!o||!n||!s||zt(n)<3||!this.optionFor(e,"zoom")||!r||a.state===D.Destroy||getComputedStyle(r).getPropertyValue("--f-images-zoom")==="0")return!1;const d=window.visualViewport||null;if((d?d.scale:1)!==1)return!1;let{top:h,left:u,width:m,height:p}=n.getBoundingClientRect(),{top:f,left:y,fitWidth:b,fitHeight:v}=s.contentRect;if(!(m&&p&&b&&v))return!1;const i=s.container.getBoundingClientRect();y+=i.left,f+=i.top;const l=-1*(y+.5*b-(u+.5*m)),g=-1*(f+.5*v-(h+.5*p)),C=m/b;let S=this.option("zoomOpacity")||!1;return S==="auto"&&(S=Math.abs(m/p-b/v)>.1),{x:l,y:g,scale:C,opacity:S}}attach(){const e=this,t=e.instance;t.on("Carousel.change",e.onChange),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.removeSlide",e.onRemoveSlide),t.on("close",e.onClose)}detach(){const e=this,t=e.instance;t.off("Carousel.change",e.onChange),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.removeSlide",e.onRemoveSlide),t.off("close",e.onClose)}}Object.defineProperty(Yt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{initialSize:"fit",Panzoom:{maxScale:1},protected:!1,zoom:!0,zoomOpacity:"auto"}}),typeof SuppressedError=="function"&&SuppressedError;const Ye="html",gt="image",Be="map",V="youtube",Q="vimeo",pe="html5video",vt=(c,e={})=>{const t=new URL(c),o=new URLSearchParams(t.search),n=new URLSearchParams;for(const[r,d]of[...o,...Object.entries(e)]){let h=d+"";if(r==="t"){let u=h.match(/((\d*)m)?(\d*)s?/);u&&n.set("start",60*parseInt(u[2]||"0")+parseInt(u[3]||"0")+"")}else n.set(r,h)}let s=n+"",a=c.match(/#t=((.*)?\d+s)/);return a&&(s+=`#t=${a[1]}`),s},ni={ajax:null,autoSize:!0,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"},preload:!0,videoAutoplay:!0,videoRatio:16/9,videoTpl:`<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">
  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn't support embedded videos.</video>`,videoFormat:"",vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}},si=["image","html","ajax","inline","clone","iframe","map","pdf","html5video","youtube","vimeo"];class Bt extends B{onBeforeInitSlide(e,t,o){this.processType(o)}onCreateSlide(e,t,o){this.setContent(o)}onClearContent(e,t){t.xhr&&(t.xhr.abort(),t.xhr=null);const o=t.iframeEl;o&&(o.onload=o.onerror=null,o.src="//about:blank",t.iframeEl=null);const n=t.contentEl,s=t.placeholderEl;if(t.type==="inline"&&n&&s)n.classList.remove("fancybox__content"),n.style.display!=="none"&&(n.style.display="none"),s.parentNode&&s.parentNode.insertBefore(n,s),s.remove(),t.contentEl=void 0,t.placeholderEl=void 0;else for(;t.el&&t.el.firstChild;)t.el.removeChild(t.el.firstChild)}onSelectSlide(e,t,o){o.state===z.Ready&&this.playVideo()}onUnselectSlide(e,t,o){var n,s;if(o.type===pe){try{(s=(n=o.el)===null||n===void 0?void 0:n.querySelector("video"))===null||s===void 0||s.pause()}catch{}return}let a;o.type===Q?a={method:"pause",value:"true"}:o.type===V&&(a={event:"command",func:"pauseVideo"}),a&&o.iframeEl&&o.iframeEl.contentWindow&&o.iframeEl.contentWindow.postMessage(JSON.stringify(a),"*"),o.poller&&clearTimeout(o.poller)}onDone(e,t){e.isCurrentSlide(t)&&!e.isClosing()&&this.playVideo()}onRefresh(e,t){t.slides.forEach(o=>{o.el&&(this.resizeIframe(o),this.setAspectRatio(o))})}onMessage(e){try{let t=JSON.parse(e.data);if(e.origin==="https://player.vimeo.com"){if(t.event==="ready")for(let o of Array.from(document.getElementsByClassName("fancybox__iframe")))o instanceof HTMLIFrameElement&&o.contentWindow===e.source&&(o.dataset.ready="true")}else if(e.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&t.event==="onReady"){const o=document.getElementById(t.id);o&&(o.dataset.ready="true")}}catch{}}loadAjaxContent(e){const t=this.instance.optionFor(e,"src")||"";this.instance.showLoading(e);const o=this.instance,n=new XMLHttpRequest;o.showLoading(e),n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&o.state===D.Ready&&(o.hideLoading(e),n.status===200?o.setContent(e,n.responseText):o.setError(e,n.status===404?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};const s=e.ajax||null;n.open(s?"POST":"GET",t+""),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(s),e.xhr=n}setInlineContent(e){let t=null;if(R(e.src))t=e.src;else if(typeof e.src=="string"){const o=e.src.split("#",2).pop();t=o?document.getElementById(o):null}if(t){if(e.type==="clone"||t.closest(".fancybox__slide")){t=t.cloneNode(!0);const o=t.dataset.animationName;o&&(t.classList.remove(o),delete t.dataset.animationName);let n=t.getAttribute("id");n=n?`${n}--clone`:`clone-${this.instance.id}-${e.index}`,t.setAttribute("id",n)}else if(t.parentNode){const o=document.createElement("div");o.classList.add("fancybox-placeholder"),t.parentNode.insertBefore(o,t),e.placeholderEl=o}this.instance.setContent(e,t)}else this.instance.setError(e,"{{ELEMENT_NOT_FOUND}}")}setIframeContent(e){const{src:t,el:o}=e;if(!t||typeof t!="string"||!o)return;o.classList.add("is-loading");const n=this.instance,s=document.createElement("iframe");s.className="fancybox__iframe",s.setAttribute("id",`fancybox__iframe_${n.id}_${e.index}`);for(const[r,d]of Object.entries(this.optionFor(e,"iframeAttr")||{}))s.setAttribute(r,d);s.onerror=()=>{n.setError(e,"{{IFRAME_ERROR}}")},e.iframeEl=s;const a=this.optionFor(e,"preload");if(e.type!=="iframe"||a===!1)return s.setAttribute("src",e.src+""),n.setContent(e,s,!1),this.resizeIframe(e),void n.revealContent(e);n.showLoading(e),s.onload=()=>{if(!s.src.length)return;const r=s.dataset.ready!=="true";s.dataset.ready="true",this.resizeIframe(e),r?n.revealContent(e):n.hideLoading(e)},s.setAttribute("src",t),n.setContent(e,s,!1)}resizeIframe(e){const{type:t,iframeEl:o}=e;if(t===V||t===Q)return;const n=o==null?void 0:o.parentElement;if(!o||!n)return;let s=e.autoSize;s===void 0&&(s=this.optionFor(e,"autoSize"));let a=e.width||0,r=e.height||0;a&&r&&(s=!1);const d=n&&n.style;if(e.preload!==!1&&s!==!1&&d)try{const h=window.getComputedStyle(n),u=parseFloat(h.paddingLeft)+parseFloat(h.paddingRight),m=parseFloat(h.paddingTop)+parseFloat(h.paddingBottom),p=o.contentWindow;if(p){const f=p.document,y=f.getElementsByTagName(Ye)[0],b=f.body;d.width="",b.style.overflow="hidden",a=a||y.scrollWidth+u,d.width=`${a}px`,b.style.overflow="",d.flex="0 0 auto",d.height=`${b.scrollHeight}px`,r=y.scrollHeight+m}}catch{}if(a||r){const h={flex:"0 1 auto",width:"",height:""};a&&a!=="auto"&&(h.width=`${a}px`),r&&r!=="auto"&&(h.height=`${r}px`),Object.assign(d,h)}}playVideo(){const e=this.instance.getSlide();if(!e)return;const{el:t}=e;if(!t||!t.offsetParent||!this.optionFor(e,"videoAutoplay"))return;if(e.type===pe)try{const n=t.querySelector("video");if(n){const s=n.play();s!==void 0&&s.then(()=>{}).catch(a=>{n.muted=!0,n.play()})}}catch{}if(e.type!==V&&e.type!==Q)return;const o=()=>{if(e.iframeEl&&e.iframeEl.contentWindow){let n;if(e.iframeEl.dataset.ready==="true")return n=e.type===V?{event:"command",func:"playVideo"}:{method:"play",value:"true"},n&&e.iframeEl.contentWindow.postMessage(JSON.stringify(n),"*"),void(e.poller=void 0);e.type===V&&(n={event:"listening",id:e.iframeEl.getAttribute("id")},e.iframeEl.contentWindow.postMessage(JSON.stringify(n),"*"))}e.poller=setTimeout(o,250)};o()}processType(e){if(e.html)return e.type=Ye,e.src=e.html,void(e.html="");const t=this.instance.optionFor(e,"src","");if(!t||typeof t!="string")return;let o=e.type,n=null;if(n=t.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){const s=this.optionFor(e,V),{nocookie:a}=s,r=function(m,p){var f={};for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&p.indexOf(y)<0&&(f[y]=m[y]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function"){var b=0;for(y=Object.getOwnPropertySymbols(m);b<y.length;b++)p.indexOf(y[b])<0&&Object.prototype.propertyIsEnumerable.call(m,y[b])&&(f[y[b]]=m[y[b]])}return f}(s,["nocookie"]),d=`www.youtube${a?"-nocookie":""}.com`,h=vt(t,r),u=encodeURIComponent(n[2]);e.videoId=u,e.src=`https://${d}/embed/${u}?${h}`,e.thumbSrc=e.thumbSrc||`https://i.ytimg.com/vi/${u}/mqdefault.jpg`,o=V}else if(n=t.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/)){const s=vt(t,this.optionFor(e,Q)),a=encodeURIComponent(n[1]),r=n[4]||"";e.videoId=a,e.src=`https://player.vimeo.com/video/${a}?${r?`h=${r}${s?"&":""}`:""}${s}`,o=Q}if(!o&&e.triggerEl){const s=e.triggerEl.dataset.type;si.includes(s)&&(o=s)}o||typeof t=="string"&&(t.charAt(0)==="#"?o="inline":(n=t.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(o=pe,e.videoFormat=e.videoFormat||"video/"+(n[1]==="ogv"?"ogg":n[1])):t.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?o=gt:t.match(/\.(pdf)((\?|#).*)?$/i)&&(o="pdf")),(n=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(e.src=`https://maps.google.${n[1]}/?ll=${(n[2]?n[2]+"&z="+Math.floor(parseFloat(n[3]))+(n[4]?n[4].replace(/^\//,"&"):""):n[4]+"").replace(/\?/,"&")}&output=${n[4]&&n[4].indexOf("layer=c")>0?"svembed":"embed"}`,o=Be):(n=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(e.src=`https://maps.google.${n[1]}/maps?q=${n[2].replace("query=","q=").replace("api=1","")}&output=embed`,o=Be),o=o||this.instance.option("defaultType"),e.type=o,o===gt&&(e.thumbSrc=e.thumbSrc||e.src)}setContent(e){const t=this.instance.optionFor(e,"src")||"";if(e&&e.type&&t){switch(e.type){case Ye:this.instance.setContent(e,t);break;case pe:const o=this.option("videoTpl");o&&this.instance.setContent(e,o.replace(/\{\{src\}\}/gi,t+"").replace(/\{\{format\}\}/gi,this.optionFor(e,"videoFormat")||"").replace(/\{\{poster\}\}/gi,e.poster||e.thumbSrc||""));break;case"inline":case"clone":this.setInlineContent(e);break;case"ajax":this.loadAjaxContent(e);break;case"pdf":case Be:case V:case Q:e.preload=!1;case"iframe":this.setIframeContent(e)}this.setAspectRatio(e)}}setAspectRatio(e){const t=e.contentEl;if(!(e.el&&t&&e.type&&[V,Q,pe].includes(e.type)))return;let o,n=e.width||"auto",s=e.height||"auto";if(n==="auto"||s==="auto"){o=this.optionFor(e,"videoRatio");const h=(o+"").match(/(\d+)\s*\/\s?(\d+)/);o=h&&h.length>2?parseFloat(h[1])/parseFloat(h[2]):parseFloat(o+"")}else n&&s&&(o=n/s);if(!o)return;t.style.aspectRatio="",t.style.width="",t.style.height="",t.offsetHeight;const a=t.getBoundingClientRect(),r=a.width||1,d=a.height||1;t.style.aspectRatio=o+"",o<r/d?(s=s==="auto"?d:Math.min(d,s),t.style.width="auto",t.style.height=`${s}px`):(n=n==="auto"?r:Math.min(r,n),t.style.width=`${n}px`,t.style.height="auto")}attach(){const e=this,t=e.instance;t.on("Carousel.beforeInitSlide",e.onBeforeInitSlide),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.selectSlide",e.onSelectSlide),t.on("Carousel.unselectSlide",e.onUnselectSlide),t.on("Carousel.Panzoom.refresh",e.onRefresh),t.on("done",e.onDone),t.on("clearContent",e.onClearContent),window.addEventListener("message",e.onMessage)}detach(){const e=this,t=e.instance;t.off("Carousel.beforeInitSlide",e.onBeforeInitSlide),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.selectSlide",e.onSelectSlide),t.off("Carousel.unselectSlide",e.onUnselectSlide),t.off("Carousel.Panzoom.refresh",e.onRefresh),t.off("done",e.onDone),t.off("clearContent",e.onClearContent),window.removeEventListener("message",e.onMessage)}}Object.defineProperty(Bt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:ni});const Te="play",Me="pause",me="ready";class Wt extends B{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:me}),Object.defineProperty(this,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null})}get isActive(){return this.state!==me}onReady(e){this.option("autoStart")&&(e.isInfinite||e.page<e.pages.length-1)&&this.start()}onChange(){this.removeProgressBar(),this.pause()}onSettle(){this.resume()}onVisibilityChange(){document.visibilityState==="visible"?this.resume():this.pause()}onMouseEnter(){this.inHover=!0,this.pause()}onMouseLeave(){var e;this.inHover=!1,!((e=this.instance.panzoom)===null||e===void 0)&&e.isResting&&this.resume()}onTimerEnd(){const e=this.instance;this.state==="play"&&(e.isInfinite||e.page!==e.pages.length-1?e.slideNext():e.slideTo(0))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}createProgressBar(){var e;if(!this.option("showProgress"))return null;this.removeProgressBar();const t=this.instance,o=((e=t.pages[t.page])===null||e===void 0?void 0:e.slides)||[];let n=this.option("progressParentEl");if(n||(n=(o.length===1?o[0].el:null)||t.viewport),!n)return null;const s=document.createElement("div");return O(s,"f-progress"),n.prepend(s),this.progressBar=s,s.offsetHeight,s}set(){const e=this,t=e.instance;if(t.pages.length<2||e.timer)return;const o=e.option("timeout");e.state=Te,O(t.container,"has-autoplay");let n=e.createProgressBar();n&&(n.style.transitionDuration=`${o}ms`,n.style.transform="scaleX(1)"),e.timer=setTimeout(()=>{e.timer=null,e.inHover||e.onTimerEnd()},o),e.emit("set")}clear(){const e=this;e.timer&&(clearTimeout(e.timer),e.timer=null),e.removeProgressBar()}start(){const e=this;if(e.set(),e.state!==me){if(e.option("pauseOnHover")){const t=e.instance.container;t.addEventListener("mouseenter",e.onMouseEnter,!1),t.addEventListener("mouseleave",e.onMouseLeave,!1)}document.addEventListener("visibilitychange",e.onVisibilityChange,!1),e.emit("start")}}stop(){const e=this,t=e.state,o=e.instance.container;e.clear(),e.state=me,o.removeEventListener("mouseenter",e.onMouseEnter,!1),o.removeEventListener("mouseleave",e.onMouseLeave,!1),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),I(o,"has-autoplay"),t!==me&&e.emit("stop")}pause(){const e=this;e.state===Te&&(e.state=Me,e.clear(),e.emit(Me))}resume(){const e=this,t=e.instance;if(t.isInfinite||t.page!==t.pages.length-1)if(e.state!==Te){if(e.state===Me&&!e.inHover){const o=new Event("resume",{bubbles:!0,cancelable:!0});e.emit("resume",o),o.defaultPrevented||e.set()}}else e.set();else e.stop()}toggle(){this.state===Te||this.state===Me?this.stop():this.start()}attach(){const e=this,t=e.instance;t.on("ready",e.onReady),t.on("Panzoom.startAnimation",e.onChange),t.on("Panzoom.endAnimation",e.onSettle),t.on("Panzoom.touchMove",e.onChange)}detach(){const e=this,t=e.instance;t.off("ready",e.onReady),t.off("Panzoom.startAnimation",e.onChange),t.off("Panzoom.endAnimation",e.onSettle),t.off("Panzoom.touchMove",e.onChange),e.stop()}}Object.defineProperty(Wt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});class _t extends B{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null})}onPrepare(e){const t=e.carousel;if(!t)return;const o=e.container;o&&(t.options.Autoplay=F({autoStart:!1},this.option("Autoplay")||{},{pauseOnHover:!1,timeout:this.option("timeout"),progressParentEl:()=>this.option("progressParentEl")||null,on:{start:()=>{e.emit("startSlideshow")},set:n=>{var s;o.classList.add("has-slideshow"),((s=e.getSlide())===null||s===void 0?void 0:s.state)!==z.Ready&&n.pause()},stop:()=>{o.classList.remove("has-slideshow"),e.isCompact||e.endIdle(),e.emit("endSlideshow")},resume:(n,s)=>{var a,r,d;!s||!s.cancelable||((a=e.getSlide())===null||a===void 0?void 0:a.state)===z.Ready&&(!((d=(r=e.carousel)===null||r===void 0?void 0:r.panzoom)===null||d===void 0)&&d.isResting)||s.preventDefault()}}}),t.attachPlugins({Autoplay:Wt}),this.ref=t.plugins.Autoplay)}onReady(e){const t=e.carousel,o=this.ref;o&&t&&this.option("playOnStart")&&(t.isInfinite||t.page<t.pages.length-1)&&o.start()}onDone(e,t){const o=this.ref,n=e.carousel;if(!o||!n)return;const s=t.panzoom;s&&s.on("startAnimation",()=>{e.isCurrentSlide(t)&&o.stop()}),e.isCurrentSlide(t)&&o.resume()}onKeydown(e,t){var o;const n=this.ref;n&&t===this.option("key")&&((o=document.activeElement)===null||o===void 0?void 0:o.nodeName)!=="BUTTON"&&n.toggle()}attach(){const e=this,t=e.instance;t.on("Carousel.init",e.onPrepare),t.on("Carousel.ready",e.onReady),t.on("done",e.onDone),t.on("keydown",e.onKeydown)}detach(){const e=this,t=e.instance;t.off("Carousel.init",e.onPrepare),t.off("Carousel.ready",e.onReady),t.off("done",e.onDone),t.off("keydown",e.onKeydown)}}Object.defineProperty(_t,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{key:" ",playOnStart:!1,progressParentEl:c=>{var e;return((e=c.instance.container)===null||e===void 0?void 0:e.querySelector(".fancybox__toolbar [data-fancybox-toggle-slideshow]"))||c.instance.container},timeout:3e3}});const $t={classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"};var U;(function(c){c[c.Init=0]="Init",c[c.Ready=1]="Ready",c[c.Hidden=2]="Hidden"})(U||(U={}));const bt="isResting",Ie="thumbWidth",de="thumbHeight",W="thumbClipWidth";let qt=class extends B{constructor(){super(...arguments),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:U.Init})}get isModern(){return this.type==="modern"}onInitSlide(c,e){const t=e.el?e.el.dataset:void 0;t&&(e.thumbSrc=t.thumbSrc||e.thumbSrc||"",e[W]=parseFloat(t[W]||"")||e[W]||0,e[de]=parseFloat(t.thumbHeight||"")||e[de]||0),this.addSlide(e)}onInitSlides(){this.build()}onChange(){var c;if(!this.isModern)return;const e=this.container,t=this.instance,o=t.panzoom,n=this.carousel,s=n?n.panzoom:null,a=t.page;if(o&&n&&s){if(o.isDragging){I(e,this.cn(bt));let r=((c=n.pages[a])===null||c===void 0?void 0:c.pos)||0;r+=t.getProgress(a)*(this[W]+this.thumbGap);let d=s.getBounds();-1*r>d.x.min&&-1*r<d.x.max&&s.panTo({x:-1*r,friction:.12})}else $(e,this.cn(bt),o.isResting);this.shiftModern()}}onRefresh(){this.updateProps();for(const c of this.instance.slides||[])this.resizeModernSlide(c);this.shiftModern()}isDisabled(){const c=this.option("minCount")||0;if(c){const t=this.instance;let o=0;for(const n of t.slides||[])n.thumbSrc&&o++;if(o<c)return!0}const e=this.option("type");return["modern","classic"].indexOf(e)<0}getThumb(c){const e=this.option("thumbTpl")||"";return{html:this.instance.localize(e,[["%i",c.index],["%d",c.index+1],["%s",c.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}}addSlide(c){const e=this.carousel;e&&e.addSlide(c.index,this.getThumb(c))}getSlides(){const c=[];for(const e of this.instance.slides||[])c.push(this.getThumb(e));return c}resizeModernSlide(c){this.isModern&&(c[Ie]=c[W]&&c[de]?Math.round(this[de]*(c[W]/c[de])):this[Ie])}updateProps(){const c=this.container;if(!c)return;const e=t=>parseFloat(getComputedStyle(c).getPropertyValue("--f-thumb-"+t))||0;this.thumbGap=e("gap"),this.thumbExtraGap=e("extra-gap"),this[Ie]=e("width")||40,this[W]=e("clip-width")||40,this[de]=e("height")||40}build(){const c=this;if(c.state!==U.Init)return;if(c.isDisabled())return void c.emit("disabled");const e=c.instance,t=e.container,o=c.getSlides(),n=c.option("type");c.type=n;const s=c.option("parentEl"),a=c.cn("container"),r=c.cn("track");let d=s==null?void 0:s.querySelector("."+a);d||(d=document.createElement("div"),O(d,a),s?s.appendChild(d):t.after(d)),O(d,`is-${n}`),O(t,c.cn("hasThumbs")),c.container=d,c.updateProps();let h=d.querySelector("."+r);h||(h=document.createElement("div"),O(h,c.cn("track")),d.appendChild(h)),c.track=h;const u=F({},{track:h,infinite:!1,center:!0,fill:n==="classic",dragFree:!0,slidesPerPage:1,transition:!1,preload:.25,friction:.12,Panzoom:{maxVelocity:0},Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},c.option("Carousel")||{},{Sync:{target:e},slides:o}),m=new e.constructor(d,u);m.on("createSlide",(p,f)=>{c.setProps(f.index),c.emit("createSlide",f,f.el)}),m.on("ready",()=>{c.shiftModern(),c.emit("ready")}),m.on("refresh",()=>{c.shiftModern()}),m.on("Panzoom.click",(p,f,y)=>{c.onClick(y)}),c.carousel=m,c.state=U.Ready}onClick(c){c.preventDefault(),c.stopPropagation();const e=this.instance,{pages:t,page:o}=e,n=b=>{if(b){const v=b.closest("[data-carousel-index]");if(v)return[parseInt(v.dataset.carouselIndex||"",10)||0,v]}return[-1,void 0]},s=(b,v)=>{const i=document.elementFromPoint(b,v);return i?n(i):[-1,void 0]};let[a,r]=n(c.target);if(a>-1)return;const d=this[W],h=c.clientX,u=c.clientY;let[m,p]=s(h-d,u),[f,y]=s(h+d,u);p&&y?(a=Math.abs(h-p.getBoundingClientRect().right)<Math.abs(h-y.getBoundingClientRect().left)?m:f,a===o&&(a=a===m?f:m)):p?a=m:y&&(a=f),a>-1&&t[a]&&e.slideTo(a)}getShift(c){var e;const t=this,{instance:o}=t,n=t.carousel;if(!o||!n)return 0;const s=t[Ie],a=t[W],r=t.thumbGap,d=t.thumbExtraGap;if(!(!((e=n.slides[c])===null||e===void 0)&&e.el))return 0;const h=.5*(s-a),u=o.pages.length-1;let m=o.getProgress(0),p=o.getProgress(u),f=o.getProgress(c,!1,!0),y=0,b=h+d+r;const v=m<0&&m>-1,i=p>0&&p<1;return c===0?(y=b*Math.abs(m),i&&m===1&&(y-=b*Math.abs(p))):c===u?(y=b*Math.abs(p)*-1,v&&p===-1&&(y+=b*Math.abs(m))):v||i?(y=-1*b,y+=b*Math.abs(m),y+=b*(1-Math.abs(p))):y=b*f,y}setProps(c){var e;const t=this;if(!t.isModern)return;const{instance:o}=t,n=t.carousel;if(o&&n){const s=(e=n.slides[c])===null||e===void 0?void 0:e.el;if(s&&s.childNodes.length){let a=x(1-Math.abs(o.getProgress(c))),r=x(t.getShift(c));s.style.setProperty("--progress",a?a+"":""),s.style.setProperty("--shift",r+"")}}}shiftModern(){const c=this;if(!c.isModern)return;const{instance:e,track:t}=c,o=e.panzoom,n=c.carousel;if(!(e&&t&&o&&n)||o.state===L.Init||o.state===L.Destroy)return;for(const a of e.slides)c.setProps(a.index);let s=(c[W]+c.thumbGap)*(n.slides.length||0);t.style.setProperty("--width",s+"")}cleanup(){const c=this;c.carousel&&c.carousel.destroy(),c.carousel=null,c.container&&c.container.remove(),c.container=null,c.track&&c.track.remove(),c.track=null,c.state=U.Init,I(c.instance.container,c.cn("hasThumbs"))}attach(){const c=this,e=c.instance;e.on("initSlide",c.onInitSlide),e.state===k.Init?e.on("initSlides",c.onInitSlides):c.onInitSlides(),e.on(["change","Panzoom.afterTransform"],c.onChange),e.on("Panzoom.refresh",c.onRefresh)}detach(){const c=this,e=c.instance;e.off("initSlide",c.onInitSlide),e.off("initSlides",c.onInitSlides),e.off(["change","Panzoom.afterTransform"],c.onChange),e.off("Panzoom.refresh",c.onRefresh),c.cleanup()}};Object.defineProperty(qt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:$t});const ai=Object.assign(Object.assign({},$t),{key:"t",showOnStart:!0,parentEl:null}),yt="is-masked",Ct="aria-hidden";class Zt extends B{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hidden",{enumerable:!0,configurable:!0,writable:!0,value:!1})}get isEnabled(){const e=this.ref;return e&&!e.isDisabled()}get isHidden(){return this.hidden}onClick(e,t){t.stopPropagation()}onCreateSlide(e,t){var o,n,s;const a=((s=(n=(o=this.instance)===null||o===void 0?void 0:o.carousel)===null||n===void 0?void 0:n.slides[t.index])===null||s===void 0?void 0:s.type)||"",r=t.el;if(r&&a){let d=`for-${a}`;["video","youtube","vimeo","html5video"].includes(a)&&(d+=" for-video"),O(r,d)}}onInit(){var e;const t=this,o=t.instance,n=o.carousel;if(t.ref||!n)return;const s=t.option("parentEl")||o.footer||o.container;if(!s)return;const a=F({},t.options,{parentEl:s,classes:{container:"f-thumbs fancybox__thumbs"},Carousel:{Sync:{friction:o.option("Carousel.friction")||0}},on:{ready:r=>{const d=r.container;d&&this.hidden&&(t.refresh(),d.style.transition="none",t.hide(),d.offsetHeight,queueMicrotask(()=>{d.style.transition="",t.show()}))}}});a.Carousel=a.Carousel||{},a.Carousel.on=F(((e=t.options.Carousel)===null||e===void 0?void 0:e.on)||{},{click:this.onClick,createSlide:this.onCreateSlide}),n.options.Thumbs=a,n.attachPlugins({Thumbs:qt}),t.ref=n.plugins.Thumbs,t.option("showOnStart")||(t.ref.state=U.Hidden,t.hidden=!0)}onResize(){var e;const t=(e=this.ref)===null||e===void 0?void 0:e.container;t&&(t.style.maxHeight="")}onKeydown(e,t){const o=this.option("key");o&&o===t&&this.toggle()}toggle(){const e=this.ref;if(e&&!e.isDisabled())return e.state===U.Hidden?(e.state=U.Init,void e.build()):void(this.hidden?this.show():this.hide())}show(){const e=this.ref;if(!e||e.isDisabled())return;const t=e.container;t&&(this.refresh(),t.offsetHeight,t.removeAttribute(Ct),t.classList.remove(yt),this.hidden=!1)}hide(){const e=this.ref,t=e&&e.container;t&&(this.refresh(),t.offsetHeight,t.classList.add(yt),t.setAttribute(Ct,"true")),this.hidden=!0}refresh(){const e=this.ref;if(!e||!e.state)return;const t=e.container,o=(t==null?void 0:t.firstChild)||null;t&&o&&o.childNodes.length&&(t.style.maxHeight=`${o.getBoundingClientRect().height}px`)}attach(){const e=this,t=e.instance;t.state===D.Init?t.on("Carousel.init",e.onInit):e.onInit(),t.on("resize",e.onResize),t.on("keydown",e.onKeydown)}detach(){var e;const t=this,o=t.instance;o.off("Carousel.init",t.onInit),o.off("resize",t.onResize),o.off("keydown",t.onKeydown),(e=o.carousel)===null||e===void 0||e.detachPlugins(["Thumbs"]),t.ref=null}}Object.defineProperty(Zt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:ai});const We={panLeft:{icon:'<svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg>',change:{panX:-100}},panRight:{icon:'<svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg>',change:{panX:100}},panUp:{icon:'<svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg>',change:{panY:-100}},panDown:{icon:'<svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg>',change:{panY:100}},zoomIn:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>',action:"zoomIn"},zoomOut:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"zoomOut"},toggle1to1:{icon:'<svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg>',action:"toggleZoom"},toggleZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"toggleZoom"},iterateZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"iterateZoom"},rotateCCW:{icon:'<svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg>',action:"rotateCCW"},rotateCW:{icon:'<svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg>',action:"rotateCW"},flipX:{icon:'<svg style="stroke-width: 1.3"><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg>',action:"flipX"},flipY:{icon:'<svg style="stroke-width: 1.3"><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg>',action:"flipY"},fitX:{icon:'<svg><path d="M4 12V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v6M10 18H3M21 18h-7M6 15l-3 3 3 3M18 15l3 3-3 3"/></svg>',action:"fitX"},fitY:{icon:'<svg><path d="M12 20H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M18 14v7M18 3v7M15 18l3 3 3-3M15 6l3-3 3 3"/></svg>',action:"fitY"},reset:{icon:'<svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>',action:"reset"},toggleFS:{icon:'<svg><g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g></svg>',action:"toggleFS"}};var oe;(function(c){c[c.Init=0]="Init",c[c.Ready=1]="Ready",c[c.Disabled=2]="Disabled"})(oe||(oe={}));const ri={absolute:"auto",display:{left:["infobar"],middle:[],right:["iterateZoom","slideshow","fullscreen","thumbs","close"]},enabled:"auto",items:{infobar:{tpl:'<div class="fancybox__infobar" tabindex="-1"><span data-fancybox-current-index></span>/<span data-fancybox-count></span></div>'},download:{tpl:'<a class="f-button" title="{{DOWNLOAD}}" data-fancybox-download href="javasript:;"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></a>'},prev:{tpl:'<button class="f-button" title="{{PREV}}" data-fancybox-prev><svg><path d="m15 6-6 6 6 6"/></svg></button>'},next:{tpl:'<button class="f-button" title="{{NEXT}}" data-fancybox-next><svg><path d="m9 6 6 6-6 6"/></svg></button>'},slideshow:{tpl:'<button class="f-button" title="{{TOGGLE_SLIDESHOW}}" data-fancybox-toggle-slideshow><svg><g><path d="M8 4v16l13 -8z"></path></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},fullscreen:{tpl:'<button class="f-button" title="{{TOGGLE_FULLSCREEN}}" data-fancybox-toggle-fullscreen><svg><g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},thumbs:{tpl:'<button class="f-button" title="{{TOGGLE_THUMBS}}" data-fancybox-toggle-thumbs><svg><circle cx="5.5" cy="5.5" r="1"/><circle cx="12" cy="5.5" r="1"/><circle cx="18.5" cy="5.5" r="1"/><circle cx="5.5" cy="12" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="18.5" cy="12" r="1"/><circle cx="5.5" cy="18.5" r="1"/><circle cx="12" cy="18.5" r="1"/><circle cx="18.5" cy="18.5" r="1"/></svg></button>'},close:{tpl:'<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="m19.5 4.5-15 15M4.5 4.5l15 15"/></svg></button>'}},parentEl:null},li={tabindex:"-1",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},wt="has-toolbar",_e="fancybox__toolbar";class Vt extends B{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:oe.Init}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null})}onReady(e){var t;if(!e.carousel)return;let o=this.option("display"),n=this.option("absolute"),s=this.option("enabled");if(s==="auto"){const h=this.instance.carousel;let u=0;if(h)for(const m of h.slides)(m.panzoom||m.type==="image")&&u++;u||(s=!1)}s||(o=void 0);let a=0;const r={left:[],middle:[],right:[]};if(o)for(const h of["left","middle","right"])for(const u of o[h]){const m=this.createEl(u);m&&((t=r[h])===null||t===void 0||t.push(m),a++)}let d=null;if(a&&(d=this.createContainer()),d){for(const[h,u]of Object.entries(r)){const m=document.createElement("div");O(m,_e+"__column is-"+h);for(const p of u)m.appendChild(p);n!=="auto"||h!=="middle"||u.length||(n=!0),d.appendChild(m)}n===!0&&O(d,"is-absolute"),this.state=oe.Ready,this.onRefresh()}else this.state=oe.Disabled}onClick(e){var t,o;const n=this.instance,s=n.getSlide(),a=s==null?void 0:s.panzoom,r=e.target,d=r&&R(r)?r.dataset:null;if(!d)return;if(d.fancyboxToggleThumbs!==void 0)return e.preventDefault(),e.stopPropagation(),void((t=n.plugins.Thumbs)===null||t===void 0||t.toggle());if(d.fancyboxToggleFullscreen!==void 0)return e.preventDefault(),e.stopPropagation(),void this.instance.toggleFullscreen();if(d.fancyboxToggleSlideshow!==void 0){e.preventDefault(),e.stopPropagation();const m=(o=n.carousel)===null||o===void 0?void 0:o.plugins.Autoplay;let p=m.isActive;return a&&a.panMode==="mousemove"&&!p&&a.reset(),void(p?m.stop():m.start())}const h=d.panzoomAction,u=d.panzoomChange;if((u||h)&&(e.preventDefault(),e.stopPropagation()),u){let m={};try{m=JSON.parse(u)}catch{}a&&a.applyChange(m)}else h&&a&&a[h]&&a[h]()}onChange(){this.onRefresh()}onRefresh(){if(this.instance.isClosing())return;const e=this.container;if(!e)return;const t=this.instance.getSlide();if(!t||t.state!==z.Ready)return;const o=t&&!t.error&&t.panzoom;for(const a of e.querySelectorAll("[data-panzoom-action]"))o?(a.removeAttribute("disabled"),a.removeAttribute("tabindex")):(a.setAttribute("disabled",""),a.setAttribute("tabindex","-1"));let n=o&&o.canZoomIn(),s=o&&o.canZoomOut();for(const a of e.querySelectorAll('[data-panzoom-action="zoomIn"]'))n?(a.removeAttribute("disabled"),a.removeAttribute("tabindex")):(a.setAttribute("disabled",""),a.setAttribute("tabindex","-1"));for(const a of e.querySelectorAll('[data-panzoom-action="zoomOut"]'))s?(a.removeAttribute("disabled"),a.removeAttribute("tabindex")):(a.setAttribute("disabled",""),a.setAttribute("tabindex","-1"));for(const a of e.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){s||n?(a.removeAttribute("disabled"),a.removeAttribute("tabindex")):(a.setAttribute("disabled",""),a.setAttribute("tabindex","-1"));const r=a.querySelector("g");r&&(r.style.display=n?"":"none")}}onDone(e,t){var o;(o=t.panzoom)===null||o===void 0||o.on("afterTransform",()=>{this.instance.isCurrentSlide(t)&&this.onRefresh()}),this.instance.isCurrentSlide(t)&&this.onRefresh()}createContainer(){const e=this.instance.container;if(!e)return null;const t=this.option("parentEl")||e;let o=t.querySelector("."+_e);return o||(o=document.createElement("div"),O(o,_e),t.prepend(o)),o.addEventListener("click",this.onClick,{passive:!1,capture:!0}),e&&O(e,wt),this.container=o,o}createEl(e){const t=this.instance,o=t.carousel;if(!o||e==="toggleFS"||e==="fullscreen"&&!Rt())return null;let n=null;const s=o.slides.length||0;let a=0,r=0;for(const h of o.slides)(h.panzoom||h.type==="image")&&a++,(h.type==="image"||h.downloadSrc)&&r++;if(s<2&&["infobar","prev","next"].includes(e))return n;if(We[e]!==void 0&&!a||e==="download"&&!r)return null;if(e==="thumbs"){const h=t.plugins.Thumbs;if(!h||!h.isEnabled)return null}if(e==="slideshow"&&(!o.plugins.Autoplay||s<2))return null;if(We[e]!==void 0){const h=We[e];n=document.createElement("button"),n.setAttribute("title",this.instance.localize(`{{${e.toUpperCase()}}}`)),O(n,"f-button"),h.action&&(n.dataset.panzoomAction=h.action),h.change&&(n.dataset.panzoomChange=JSON.stringify(h.change)),n.appendChild(_(this.instance.localize(h.icon)))}else{const h=(this.option("items")||[])[e];h&&(n=_(this.instance.localize(h.tpl)),typeof h.click=="function"&&n.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),typeof h.click=="function"&&h.click.call(this,this,u)}))}const d=n==null?void 0:n.querySelector("svg");if(d)for(const[h,u]of Object.entries(li))d.getAttribute(h)||d.setAttribute(h,String(u));return n}removeContainer(){const e=this.container;e&&e.remove(),this.container=null,this.state=oe.Disabled;const t=this.instance.container;t&&I(t,wt)}attach(){const e=this,t=e.instance;t.on("Carousel.initSlides",e.onReady),t.on("done",e.onDone),t.on(["reveal","Carousel.change"],e.onChange),e.onReady(e.instance)}detach(){const e=this,t=e.instance;t.off("Carousel.initSlides",e.onReady),t.off("done",e.onDone),t.off(["reveal","Carousel.change"],e.onChange),e.removeContainer()}}Object.defineProperty(Vt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:ri});const ci={Hash:class extends B{onReady(){ve=!1}onChange(c){ie&&clearTimeout(ie);const{hash:e}=Ft(),{hash:t}=ke(),o=c.isOpeningSlide(c.getSlide());o&&(pt=t===e?"":t),e&&e!==t&&(ie=setTimeout(()=>{try{if(c.state===D.Ready){let n="replaceState";o&&!Oe&&(n="pushState",Oe=!0),window.history[n]({},document.title,window.location.pathname+window.location.search+e)}}catch{}},300))}onClose(c){if(ie&&clearTimeout(ie),!ve&&Oe)return Oe=!1,ve=!1,void window.history.back();if(!ve)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(pt||""))}catch{}}attach(){const c=this.instance;c.on("ready",this.onReady),c.on(["Carousel.ready","Carousel.change"],this.onChange),c.on("close",this.onClose)}detach(){const c=this.instance;c.off("ready",this.onReady),c.off(["Carousel.ready","Carousel.change"],this.onChange),c.off("close",this.onClose)}static parseURL(){return ke()}static startFromUrl(){Ht()}static destroy(){window.removeEventListener("hashchange",Xt,!1)}},Html:Bt,Images:Yt,Slideshow:_t,Thumbs:Zt,Toolbar:Vt},xt="with-fancybox",$e="hide-scrollbar",St="--fancybox-scrollbar-compensate",Et="--fancybox-body-margin",qe="aria-hidden",Ze="is-using-tab",Ve="is-animated",Ot="is-compact",Pt="is-loading",Ue="is-opening",Le="has-caption",he="disabled",ee="tabindex",Tt="download",Ge="href",ue="src",G=c=>typeof c=="string",Mt=function(){var c=window.getSelection();return!!c&&c.type==="Range"};let X,Y=null,te=null,It=0,Lt=0;const ge=new Map;let di=0;class M extends tt{get isIdle(){return this.idle}get isCompact(){return this.option("compact")}constructor(e=[],t={},o={}){super(t),Object.defineProperty(this,"userSlides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"idle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"idleTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"startedFs",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:D.Init}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"footer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastFocus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prevMouseMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),X||(X=Rt()),this.id=t.id||++di,ge.set(this.id,this),this.userSlides=e,this.userPlugins=o,queueMicrotask(()=>{this.init()})}init(){if(this.state===D.Destroy)return;this.state=D.Init,this.attachPlugins(Object.assign(Object.assign({},M.Plugins),this.userPlugins)),this.emit("init"),this.emit("attachPlugins"),this.option("hideScrollbar")===!0&&(()=>{if(!be)return;const t=document,o=t.body,n=t.documentElement;if(o.classList.contains($e))return;let s=window.innerWidth-n.getBoundingClientRect().width;const a=parseFloat(window.getComputedStyle(o).marginRight);s<0&&(s=0),n.style.setProperty(St,`${s}px`),a&&o.style.setProperty(Et,`${a}px`),o.classList.add($e)})(),this.initLayout(),this.scale();const e=()=>{this.initCarousel(this.userSlides),this.state=D.Ready,this.attachEvents(),this.emit("ready"),setTimeout(()=>{this.container&&this.container.setAttribute(qe,"false")},16)};this.option("Fullscreen.autoStart")&&X&&!X.isFullscreen()?X.request().then(()=>{this.startedFs=!0,e()}).catch(()=>e()):e()}initLayout(){var e,t;const o=this.option("parentEl")||document.body,n=_(this.localize(this.option("tpl.main")||""));n&&(n.setAttribute("id",`fancybox-${this.id}`),n.setAttribute("aria-label",this.localize("{{MODAL}}")),n.classList.toggle(Ot,this.isCompact),O(n,this.option("mainClass")||""),O(n,Ue),this.container=n,this.footer=n.querySelector(".fancybox__footer"),o.appendChild(n),O(document.documentElement,xt),Y&&te||(Y=document.createElement("span"),O(Y,"fancybox-focus-guard"),Y.setAttribute(ee,"0"),Y.setAttribute(qe,"true"),Y.setAttribute("aria-label","Focus guard"),te=Y.cloneNode(),(e=n.parentElement)===null||e===void 0||e.insertBefore(Y,n),(t=n.parentElement)===null||t===void 0||t.append(te)),n.addEventListener("mousedown",s=>{It=s.pageX,Lt=s.pageY,I(n,Ze)}),this.option("animated")&&(O(n,Ve),setTimeout(()=>{this.isClosing()||I(n,Ve)},350)),this.emit("initLayout"))}initCarousel(e){const t=this.container;if(!t)return;const o=t.querySelector(".fancybox__carousel");if(!o)return;const n=this.carousel=new ne(o,F({},{slides:e,transition:"fade",Panzoom:{lockAxis:this.option("dragToClose")?"xy":"x",infinite:!!this.option("dragToClose")&&"y"},Dots:!1,Navigation:{classes:{container:"fancybox__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"}},initialPage:this.option("startIndex"),l10n:this.option("l10n")},this.option("Carousel")||{}));n.on("*",(s,a,...r)=>{this.emit(`Carousel.${a}`,s,...r)}),n.on(["ready","change"],()=>{this.manageCaption()}),this.on("Carousel.removeSlide",(s,a,r)=>{this.clearContent(r),r.state=void 0}),n.on("Panzoom.touchStart",()=>{var s,a;this.isCompact||this.endIdle(),!((s=document.activeElement)===null||s===void 0)&&s.closest(".f-thumbs")&&((a=this.container)===null||a===void 0||a.focus())}),n.on("settle",()=>{this.idleTimer||this.isCompact||!this.option("idle")||this.setIdle(),this.option("autoFocus")&&!this.isClosing&&this.checkFocus()}),this.option("dragToClose")&&(n.on("Panzoom.afterTransform",(s,a)=>{const r=this.getSlide();if(r&&Ke(r.el))return;const d=this.container;if(d){const h=Math.abs(a.current.f),u=h<1?"":Math.max(.5,Math.min(1,1-h/a.contentRect.fitHeight*1.5));d.style.setProperty("--fancybox-ts",u?"0s":""),d.style.setProperty("--fancybox-opacity",u+"")}}),n.on("Panzoom.touchEnd",(s,a,r)=>{var d;const h=this.getSlide();if(h&&Ke(h.el)||a.isMobile&&document.activeElement&&["TEXTAREA","INPUT"].indexOf((d=document.activeElement)===null||d===void 0?void 0:d.nodeName)!==-1)return;const u=Math.abs(a.dragOffset.y);a.lockedAxis==="y"&&(u>=200||u>=50&&a.dragOffset.time<300)&&(r&&r.cancelable&&r.preventDefault(),this.close(r,"f-throwOut"+(a.current.f<0?"Up":"Down")))})),n.on("change",s=>{var a;let r=(a=this.getSlide())===null||a===void 0?void 0:a.triggerEl;if(r){const d=new CustomEvent("slideTo",{bubbles:!0,cancelable:!0,detail:s.page});r.dispatchEvent(d)}}),n.on(["refresh","change"],s=>{const a=this.container;if(!a)return;for(const h of a.querySelectorAll("[data-fancybox-current-index]"))h.innerHTML=s.page+1;for(const h of a.querySelectorAll("[data-fancybox-count]"))h.innerHTML=s.pages.length;if(!s.isInfinite){for(const h of a.querySelectorAll("[data-fancybox-next]"))s.page<s.pages.length-1?(h.removeAttribute(he),h.removeAttribute(ee)):(h.setAttribute(he,""),h.setAttribute(ee,"-1"));for(const h of a.querySelectorAll("[data-fancybox-prev]"))s.page>0?(h.removeAttribute(he),h.removeAttribute(ee)):(h.setAttribute(he,""),h.setAttribute(ee,"-1"))}const r=this.getSlide();if(!r)return;let d=r.downloadSrc||"";d||r.type!=="image"||r.error||!G(r[ue])||(d=r[ue]);for(const h of a.querySelectorAll("[data-fancybox-download]")){const u=r.downloadFilename;d?(h.removeAttribute(he),h.removeAttribute(ee),h.setAttribute(Ge,d),h.setAttribute(Tt,u||d),h.setAttribute("target","_blank")):(h.setAttribute(he,""),h.setAttribute(ee,"-1"),h.removeAttribute(Ge),h.removeAttribute(Tt))}}),this.emit("initCarousel")}attachEvents(){const e=this,t=e.container;if(!t)return;t.addEventListener("click",e.onClick,{passive:!1,capture:!1}),t.addEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),document.addEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),document.addEventListener("visibilitychange",e.onVisibilityChange,!1),document.addEventListener("mousemove",e.onMousemove),e.option("trapFocus")&&document.addEventListener("focus",e.onFocus,!0),window.addEventListener("resize",e.onResize);const o=window.visualViewport;o&&(o.addEventListener("scroll",e.onResize),o.addEventListener("resize",e.onResize))}detachEvents(){const e=this,t=e.container;if(!t)return;document.removeEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),t.removeEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),t.removeEventListener("click",e.onClick,{passive:!1,capture:!1}),document.removeEventListener("mousemove",e.onMousemove),window.removeEventListener("resize",e.onResize);const o=window.visualViewport;o&&(o.removeEventListener("resize",e.onResize),o.removeEventListener("scroll",e.onResize)),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),document.removeEventListener("focus",e.onFocus,!0)}scale(){const e=this.container;if(!e)return;const t=window.visualViewport,o=Math.max(1,(t==null?void 0:t.scale)||1);let n="",s="",a="";if(t&&o>1){let r=`${t.offsetLeft}px`,d=`${t.offsetTop}px`;n=t.width*o+"px",s=t.height*o+"px",a=`translate3d(${r}, ${d}, 0) scale(${1/o})`}e.style.transform=a,e.style.width=n,e.style.height=s}onClick(e){var t;const{container:o,isCompact:n}=this;if(!o||this.isClosing())return;!n&&this.option("idle")&&this.resetIdle();const s=e.composedPath()[0];if(s.closest(".fancybox-spinner")||s.closest("[data-fancybox-close]"))return e.preventDefault(),void this.close(e);if(s.closest("[data-fancybox-prev]"))return e.preventDefault(),void this.prev();if(s.closest("[data-fancybox-next]"))return e.preventDefault(),void this.next();if(e.type==="click"&&e.detail===0||Math.abs(e.pageX-It)>30||Math.abs(e.pageY-Lt)>30)return;const a=document.activeElement;if(Mt()&&a&&o.contains(a))return;if(n&&((t=this.getSlide())===null||t===void 0?void 0:t.type)==="image")return void(this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout(()=>{this.toggleIdle(),this.clickTimer=null},350));if(this.emit("click",e),e.defaultPrevented)return;let r=!1;if(s.closest(".fancybox__content")){if(a){if(a.closest("[contenteditable]"))return;s.matches(Xe)||a.blur()}if(Mt())return;r=this.option("contentClick")}else s.closest(".fancybox__carousel")&&!s.matches(Xe)&&(r=this.option("backdropClick"));r==="close"?(e.preventDefault(),this.close(e)):r==="next"?(e.preventDefault(),this.next()):r==="prev"&&(e.preventDefault(),this.prev())}onWheel(e){const t=e.target;let o=this.option("wheel",e);t.closest(".fancybox__thumbs")&&(o="slide");const n=o==="slide",s=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(d,h){return Math.abs(h)>Math.abs(d)?h:d}),a=Math.max(-1,Math.min(1,s)),r=Date.now();this.pwt&&r-this.pwt<300?n&&e.preventDefault():(this.pwt=r,this.emit("wheel",e,a),e.defaultPrevented||(o==="close"?(e.preventDefault(),this.close(e)):o==="slide"&&(Ae(t)||(e.preventDefault(),this[a>0?"prev":"next"]()))))}onKeydown(e){if(!this.isTopmost())return;this.isCompact||!this.option("idle")||this.isClosing()||this.resetIdle();const t=e.key,o=this.option("keyboard");if(!o)return;const n=e.composedPath()[0],s=document.activeElement&&document.activeElement.classList,a=s&&s.contains("f-button")||n.dataset.carouselPage||n.dataset.carouselIndex;if(t!=="Escape"&&!a&&R(n)&&(n.isContentEditable||["TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(n.nodeName)!==-1)||(e.key==="Tab"?O(this.container,Ze):I(this.container,Ze),e.ctrlKey||e.altKey||e.shiftKey))return;this.emit("keydown",t,e);const r=o[t];r&&typeof this[r]=="function"&&(e.preventDefault(),this[r]())}onResize(){const e=this.container;if(!e)return;const t=this.isCompact;e.classList.toggle(Ot,t),this.manageCaption(this.getSlide()),this.isCompact?this.clearIdle():this.endIdle(),this.scale(),this.emit("resize")}onFocus(e){this.isTopmost()&&this.checkFocus(e)}onMousemove(e){this.prevMouseMoveEvent=e,!this.isCompact&&this.option("idle")&&this.resetIdle()}onVisibilityChange(){document.visibilityState==="visible"?this.checkFocus():this.endIdle()}manageCloseBtn(e){const t=this.optionFor(e,"closeButton")||!1;if(t==="auto"){const n=this.plugins.Toolbar;if(n&&n.state===oe.Ready)return}if(!t||!e.contentEl||e.closeBtnEl)return;const o=this.option("tpl.closeButton");if(o){const n=_(this.localize(o));e.closeBtnEl=e.contentEl.appendChild(n),e.el&&O(e.el,"has-close-btn")}}manageCaption(e=void 0){var t,o;const n="fancybox__caption",s=this.container;if(!s)return;I(s,Le);const a=this.isCompact||this.option("commonCaption"),r=!a;if(this.caption&&this.stop(this.caption),r&&this.caption&&(this.caption.remove(),this.caption=null),a&&!this.caption)for(const m of((t=this.carousel)===null||t===void 0?void 0:t.slides)||[])m.captionEl&&(m.captionEl.remove(),m.captionEl=void 0,I(m.el,Le),(o=m.el)===null||o===void 0||o.removeAttribute("aria-labelledby"));if(e||(e=this.getSlide()),!e||a&&!this.isCurrentSlide(e))return;const d=e.el;let h=this.optionFor(e,"caption","");if(!h)return void(a&&this.caption&&this.animate(this.caption,"f-fadeOut",()=>{this.caption&&(this.caption.innerHTML="")}));let u=null;if(r){if(u=e.captionEl||null,d&&!u){const m=n+`_${this.id}_${e.index}`;u=document.createElement("div"),O(u,n),u.setAttribute("id",m),e.captionEl=d.appendChild(u),O(d,Le),d.setAttribute("aria-labelledby",m)}}else u=this.caption,u||(u=s.querySelector("."+n)),!u&&(u=document.createElement("div"),u.dataset.fancyboxCaption="",O(u,n),(this.footer||s).prepend(u)),O(s,Le),this.caption=u;u&&(u.innerHTML="",G(h)||typeof h=="number"?u.innerHTML=h+"":h instanceof HTMLElement&&u.appendChild(h))}checkFocus(e){this.focus(e)}focus(e){var t;if(this.ignoreFocusChange)return;const o=document.activeElement||null,n=(e==null?void 0:e.target)||null,s=this.container,a=(t=this.carousel)===null||t===void 0?void 0:t.viewport;if(!s||!a||!e&&o&&s.contains(o))return;const r=this.getSlide(),d=r&&r.state===z.Ready?r.el:null;if(!d||d.contains(o)||s===o)return;e&&e.cancelable&&e.preventDefault(),this.ignoreFocusChange=!0;const h=Array.from(s.querySelectorAll(Xe));let u=[],m=null;for(let f of h){const y=!f.offsetParent||!!f.closest('[aria-hidden="true"]'),b=d&&d.contains(f),v=!a.contains(f);if(f===s||(b||v)&&!y){u.push(f);const i=f.dataset.origTabindex;i!==void 0&&i&&(f.tabIndex=parseFloat(i)),f.removeAttribute("data-orig-tabindex"),!f.hasAttribute("autoFocus")&&m||(m=f)}else{const i=f.dataset.origTabindex===void 0?f.getAttribute("tabindex")||"":f.dataset.origTabindex;i&&(f.dataset.origTabindex=i),f.tabIndex=-1}}let p=null;e?(!n||u.indexOf(n)<0)&&(p=m||s,u.length&&(o===te?p=u[0]:this.lastFocus!==s&&o!==Y||(p=u[u.length-1]))):p=r&&r.type==="image"?s:m||s,p&&ft(p),this.lastFocus=document.activeElement,this.ignoreFocusChange=!1}next(){const e=this.carousel;e&&e.pages.length>1&&e.slideNext()}prev(){const e=this.carousel;e&&e.pages.length>1&&e.slidePrev()}jumpTo(...e){this.carousel&&this.carousel.slideTo(...e)}isTopmost(){var e;return((e=M.getInstance())===null||e===void 0?void 0:e.id)==this.id}animate(e=null,t="",o){if(!e||!t)return void(o&&o());this.stop(e);const n=s=>{s.target===e&&e.dataset.animationName&&(e.removeEventListener("animationend",n),delete e.dataset.animationName,o&&o(),I(e,t))};e.dataset.animationName=t,e.addEventListener("animationend",n),O(e,t)}stop(e){e&&e.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:e}))}setContent(e,t="",o=!0){if(this.isClosing())return;const n=e.el;if(!n)return;let s=null;if(R(t)?s=t:(s=_(t+""),R(s)||(s=document.createElement("div"),s.innerHTML=t+"")),["img","picture","iframe","video","audio"].includes(s.nodeName.toLowerCase())){const a=document.createElement("div");a.appendChild(s),s=a}R(s)&&e.filter&&!e.error&&(s=s.querySelector(e.filter)),s&&R(s)?(O(s,"fancybox__content"),e.id&&s.setAttribute("id",e.id),s.style.display!=="none"&&getComputedStyle(s).getPropertyValue("display")!=="none"||(s.style.display=e.display||this.option("defaultDisplay")||"flex"),n.classList.add(`has-${e.error?"error":e.type||"unknown"}`),n.prepend(s),e.contentEl=s,o&&this.revealContent(e),this.manageCloseBtn(e),this.manageCaption(e)):this.setError(e,"{{ELEMENT_NOT_FOUND}}")}revealContent(e,t){const o=e.el,n=e.contentEl;o&&n&&(this.emit("reveal",e),this.hideLoading(e),e.state=z.Opening,(t=this.isOpeningSlide(e)?t===void 0?this.optionFor(e,"showClass"):t:"f-fadeIn")?this.animate(n,t,()=>{this.done(e)}):this.done(e))}done(e){this.isClosing()||(e.state=z.Ready,this.emit("done",e),O(e.el,"is-done"),this.isCurrentSlide(e)&&this.option("autoFocus")&&queueMicrotask(()=>{var t;(t=e.panzoom)===null||t===void 0||t.updateControls(),this.option("autoFocus")&&this.focus()}),this.isOpeningSlide(e)&&(I(this.container,Ue),!this.isCompact&&this.option("idle")&&this.setIdle()))}isCurrentSlide(e){const t=this.getSlide();return!(!e||!t)&&t.index===e.index}isOpeningSlide(e){var t,o;return((t=this.carousel)===null||t===void 0?void 0:t.prevPage)===null&&e&&e.index===((o=this.getSlide())===null||o===void 0?void 0:o.index)}showLoading(e){e.state=z.Loading;const t=e.el;t&&(O(t,Pt),this.emit("loading",e),e.spinnerEl||setTimeout(()=>{if(!this.isClosing()&&!e.spinnerEl&&e.state===z.Loading){let o=_(it);O(o,"fancybox-spinner"),e.spinnerEl=o,t.prepend(o),this.animate(o,"f-fadeIn")}},250))}hideLoading(e){const t=e.el;if(!t)return;const o=e.spinnerEl;this.isClosing()?o==null||o.remove():(I(t,Pt),o&&this.animate(o,"f-fadeOut",()=>{o.remove()}),e.state===z.Loading&&(this.emit("loaded",e),e.state=z.Ready))}setError(e,t){if(this.isClosing())return;const o=new Event("error",{bubbles:!0,cancelable:!0});if(this.emit("error",o,e),o.defaultPrevented)return;e.error=t,this.hideLoading(e),this.clearContent(e);const n=document.createElement("div");n.classList.add("fancybox-error"),n.innerHTML=this.localize(t||"<p>{{ERROR}}</p>"),this.setContent(e,n)}clearContent(e){if(e.state===void 0)return;this.emit("clearContent",e),e.contentEl&&(e.contentEl.remove(),e.contentEl=void 0);const t=e.el;t&&(I(t,"has-error"),I(t,"has-unknown"),I(t,`has-${e.type||"unknown"}`)),e.closeBtnEl&&e.closeBtnEl.remove(),e.closeBtnEl=void 0,e.captionEl&&e.captionEl.remove(),e.captionEl=void 0,e.spinnerEl&&e.spinnerEl.remove(),e.spinnerEl=void 0}getSlide(){var e;const t=this.carousel;return((e=t==null?void 0:t.pages[t==null?void 0:t.page])===null||e===void 0?void 0:e.slides[0])||void 0}close(e,t){if(this.isClosing())return;const o=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(this.emit("shouldClose",o,e),o.defaultPrevented)return;e&&e.cancelable&&(e.preventDefault(),e.stopPropagation());const n=()=>{this.proceedClose(e,t)};this.startedFs&&X&&X.isFullscreen()?Promise.resolve(X.exit()).then(()=>n()):n()}clearIdle(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=null}setIdle(e=!1){const t=()=>{this.clearIdle(),this.idle=!0,O(this.container,"is-idle"),this.emit("setIdle")};if(this.clearIdle(),!this.isClosing())if(e)t();else{const o=this.option("idle");o&&(this.idleTimer=setTimeout(t,o))}}endIdle(){this.clearIdle(),this.idle&&!this.isClosing()&&(this.idle=!1,I(this.container,"is-idle"),this.emit("endIdle"))}resetIdle(){this.endIdle(),this.setIdle()}toggleIdle(){this.idle?this.endIdle():this.setIdle(!0)}toggleFullscreen(){X&&(X.isFullscreen()?X.exit():X.request().then(()=>{this.startedFs=!0}))}isClosing(){return[D.Closing,D.CustomClosing,D.Destroy].includes(this.state)}proceedClose(e,t){var o,n;this.state=D.Closing,this.clearIdle(),this.detachEvents();const s=this.container,a=this.carousel,r=this.getSlide(),d=r&&this.option("placeFocusBack")?r.triggerEl||this.option("triggerEl"):null;if(d&&(zt(d)?ft(d):d.focus()),s&&(I(s,Ue),O(s,"is-closing"),s.setAttribute(qe,"true"),this.option("animated")&&O(s,Ve),s.style.pointerEvents="none"),a){a.clearTransitions(),(o=a.panzoom)===null||o===void 0||o.destroy(),(n=a.plugins.Navigation)===null||n===void 0||n.detach();for(const h of a.slides){h.state=z.Closing,this.hideLoading(h);const u=h.contentEl;u&&this.stop(u);const m=h==null?void 0:h.panzoom;m&&(m.stop(),m.detachEvents(),m.detachObserver()),this.isCurrentSlide(h)||a.emit("removeSlide",h)}}this.emit("close",e),this.state!==D.CustomClosing?(t===void 0&&r&&(t=this.optionFor(r,"hideClass")),t&&r?(this.animate(r.contentEl,t,()=>{a&&a.emit("removeSlide",r)}),setTimeout(()=>{this.destroy()},500)):this.destroy()):setTimeout(()=>{this.destroy()},500)}destroy(){var e;if(this.state===D.Destroy)return;this.state=D.Destroy,(e=this.carousel)===null||e===void 0||e.destroy();const t=this.container;t&&t.remove(),ge.delete(this.id);const o=M.getInstance();o?o.focus():(Y&&(Y.remove(),Y=null),te&&(te.remove(),te=null),I(document.documentElement,xt),(()=>{if(!be)return;const n=document,s=n.body;s.classList.remove($e),s.style.setProperty(Et,""),n.documentElement.style.setProperty(St,"")})(),this.emit("destroy"))}static bind(e,t,o){if(!be)return;let n,s="",a={};if(e===void 0?n=document.body:G(e)?(n=document.body,s=e,typeof t=="object"&&(a=t||{})):(n=e,G(t)&&(s=t),typeof o=="object"&&(a=o||{})),!n||!R(n))return;s=s||"[data-fancybox]";const r=M.openers.get(n)||new Map;r.set(s,a),M.openers.set(n,r),r.size===1&&n.addEventListener("click",M.fromEvent)}static unbind(e,t){let o,n="";if(G(e)?(o=document.body,n=e):(o=e,G(t)&&(n=t)),!o)return;const s=M.openers.get(o);s&&n&&s.delete(n),n&&s||(M.openers.delete(o),o.removeEventListener("click",M.fromEvent))}static destroy(){let e;for(;e=M.getInstance();)e.destroy();for(const t of M.openers.keys())t.removeEventListener("click",M.fromEvent);M.openers=new Map}static fromEvent(e){if(e.defaultPrevented||e.button&&e.button!==0||e.ctrlKey||e.metaKey||e.shiftKey)return;let t=e.composedPath()[0];const o=t.closest("[data-fancybox-trigger]");if(o){const y=o.dataset.fancyboxTrigger||"",b=document.querySelectorAll(`[data-fancybox="${y}"]`),v=parseInt(o.dataset.fancyboxIndex||"",10)||0;t=b[v]||t}if(!(t&&t instanceof Element))return;let n,s,a,r;if([...M.openers].reverse().find(([y,b])=>!(!y.contains(t)||![...b].reverse().find(([v,i])=>{let l=t.closest(v);return!!l&&(n=y,s=v,a=l,r=i,!0)}))),!n||!s||!a)return;r=r||{},e.preventDefault(),t=a;let d=[],h=F({},Qe,r);h.event=e,h.triggerEl=t,h.delegate=o;const u=h.groupAll,m=h.groupAttr,p=m&&t?t.getAttribute(`${m}`):"";if((!t||p||u)&&(d=[].slice.call(n.querySelectorAll(s))),t&&!u&&(d=p?d.filter(y=>y.getAttribute(`${m}`)===p):[t]),!d.length)return;const f=M.getInstance();return f&&f.options.triggerEl&&d.indexOf(f.options.triggerEl)>-1?void 0:(t&&(h.startIndex=d.indexOf(t)),M.fromNodes(d,h))}static fromSelector(e,t,o){let n=null,s="",a={};if(G(e)?(n=document.body,s=e,typeof t=="object"&&(a=t||{})):e instanceof HTMLElement&&G(t)&&(n=e,s=t,typeof o=="object"&&(a=o||{})),!n||!s)return!1;const r=M.openers.get(n);return!!r&&(a=F({},r.get(s)||{},a),!!a&&M.fromNodes(Array.from(n.querySelectorAll(s)),a))}static fromNodes(e,t){t=F({},Qe,t||{});const o=[];for(const n of e){const s=n.dataset||{},a=s[ue]||n.getAttribute(Ge)||n.getAttribute("currentSrc")||n.getAttribute(ue)||void 0;let r;const d=t.delegate;let h;d&&o.length===t.startIndex&&(r=d instanceof HTMLImageElement?d:d.querySelector("img:not([aria-hidden])")),r||(r=n instanceof HTMLImageElement?n:n.querySelector("img:not([aria-hidden])")),r&&(h=r.currentSrc||r[ue]||void 0,!h&&r.dataset&&(h=r.dataset.lazySrc||r.dataset[ue]||void 0));const u={src:a,triggerEl:n,thumbEl:r,thumbElSrc:h,thumbSrc:h};for(const m in s){let p=s[m]+"";p=p!=="false"&&(p==="true"||p),u[m]=p}o.push(u)}return new M(o,t)}static getInstance(e){return e?ge.get(e):Array.from(ge.values()).reverse().find(t=>!t.isClosing()&&t)||null}static getSlide(){var e;return((e=M.getInstance())===null||e===void 0?void 0:e.getSlide())||null}static show(e=[],t={}){return new M(e,t)}static next(){const e=M.getInstance();e&&e.next()}static prev(){const e=M.getInstance();e&&e.prev()}static close(e=!0,...t){if(e)for(const o of ge.values())o.close(...t);else{const o=M.getInstance();o&&o.close(...t)}}}Object.defineProperty(M,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.33"}),Object.defineProperty(M,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Qe}),Object.defineProperty(M,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:ci}),Object.defineProperty(M,"openers",{enumerable:!0,configurable:!0,writable:!0,value:new Map});export{M as C};
//# sourceMappingURL=vendor-fab6ff31.js.map
